Bootstrapping Chef on 172.16.1.170
172.16.1.170 Starting Chef Client, version 11.4.0[0m
172.16.1.170 resolving cookbooks for run list: ["yum::ibm", "openstack-common", "openstack-common::logging", "openstack-common::set_endpoints_by_interface", "openstack-common::sysctl", "openstack-ops-database::server", "openstack-ops-database::openstack-db", "openstack-ops-messaging::server", "openstack-identity::server", "openstack-identity::registration", "openstack-image::api", "openstack-image::registry", "openstack-image::identity_registration", "openstack-image::image_upload", "openstack-compute::nova-setup", "openstack-compute::identity_registration", "openstack-compute::api-ec2", "openstack-compute::api-os-compute", "openstack-compute::api-metadata", "openstack-compute::vncproxy", "openstack-compute::scheduler", "openstack-compute::conductor", "openstack-compute::nova-cert", "openstack-network::openvswitch", "openstack-network::dhcp_agent", "openstack-network::metadata_agent", "openstack-network::server", "openstack-network::identity_registration", "openstack-compute::compute"][0m
172.16.1.170 Synchronizing Cookbooks:[0m
172.16.1.170   - yum-epel[0m
172.16.1.170   - build-essential[0m
172.16.1.170   - python[0m
172.16.1.170   - selinux[0m
172.16.1.170   - openstack-common[0m
172.16.1.170   - openstack-identity[0m
172.16.1.170   - openstack-network[0m
172.16.1.170   - openstack-image[0m
172.16.1.170   - openstack-compute[0m
172.16.1.170   - qpid[0m
172.16.1.170   - yum-erlang_solutions[0m
172.16.1.170   - yum[0m
172.16.1.170   - apt[0m
172.16.1.170   - erlang[0m
172.16.1.170   - rabbitmq[0m
172.16.1.170   - openstack-ops-messaging[0m
172.16.1.170   - db2[0m
172.16.1.170   - database[0m
172.16.1.170   - postgresql[0m
172.16.1.170   - mysql[0m
172.16.1.170   - openstack-ops-database[0m
172.16.1.170   - xfs[0m
172.16.1.170   - aws[0m
172.16.1.170   - openssl[0m
172.16.1.170   - windows[0m
172.16.1.170   - homebrew[0m
172.16.1.170 Compiling Cookbooks...[0m
172.16.1.170 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant YumGlobalconfig
172.16.1.170 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant YumRepository
172.16.1.170 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant YumGlobalconfig
172.16.1.170 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant YumRepository
172.16.1.170 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant OpenstackIdentityRegister
172.16.1.170 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant OpenstackIdentityRegister
172.16.1.170 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant OpenstackImageImage
172.16.1.170 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant OpenstackImageImage
172.16.1.170 Recipe: yum::ibm[0m
172.16.1.170   * yum_repository[IBM-rhel] action add[0m
172.16.1.170 Recipe: <Dynamically Defined Resource>[0m
172.16.1.170   * template[/etc/yum.repos.d/rhel.repo] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/yum.repos.d/rhel.repo][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-6yfe1y	2014-08-08 01:43:47.287999964 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-l7ccuz	2014-08-08 01:43:47.286999963 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,9 @@[0m[37m
172.16.1.170         +# This file was generated by Chef[0m[37m
172.16.1.170         +# Do NOT modify this file by hand.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[rhel][0m[37m
172.16.1.170         +name=rhel[0m[37m
172.16.1.170         +baseurl=ftp://yuezhy%40cn.ibm.com:zhangyue123@ftp3.linux.ibm.com/redhat/abat_yum/rhel-6-u5/[0m[37m
172.16.1.170         +enabled=1[0m[37m
172.16.1.170         +gpgcheck=0[0m[37m
172.16.1.170         +sslverify=0[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * execute[yum-makecache-rhel] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute yum -q makecache --disablerepo=* --enablerepo=rhel[0m
172.16.1.170 [0m
172.16.1.170   * ruby_block[yum-cache-reload-rhel] action create[0m[32m
172.16.1.170     - execute the ruby block yum-cache-reload-rhel[0m
172.16.1.170 [0m
172.16.1.170   * execute[yum-makecache-rhel] action nothing[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * ruby_block[yum-cache-reload-rhel] action nothing[0m (up to date)[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170 Recipe: yum::ibm[0m
172.16.1.170   * yum_repository[IBM-epel] action add[0m
172.16.1.170 Recipe: <Dynamically Defined Resource>[0m
172.16.1.170   * template[/etc/yum.repos.d/epel.repo] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/yum.repos.d/epel.repo][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-w1bmyv	2014-08-08 01:44:03.640999964 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-hz58u1	2014-08-08 01:44:03.639999964 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,9 @@[0m[37m
172.16.1.170         +# This file was generated by Chef[0m[37m
172.16.1.170         +# Do NOT modify this file by hand.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[epel][0m[37m
172.16.1.170         +name=epel[0m[37m
172.16.1.170         +baseurl=http://dl.fedoraproject.org/pub/epel/6Server/x86_64[0m[37m
172.16.1.170         +enabled=1[0m[37m
172.16.1.170         +gpgcheck=0[0m[37m
172.16.1.170         +sslverify=0[0m
172.16.1.170 [0m
172.16.1.170   * execute[yum-makecache-epel] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute yum -q makecache --disablerepo=* --enablerepo=epel[0m
172.16.1.170 [0m
172.16.1.170   * ruby_block[yum-cache-reload-epel] action create[0m[32m
172.16.1.170     - execute the ruby block yum-cache-reload-epel[0m
172.16.1.170 [0m
172.16.1.170   * execute[yum-makecache-epel] action nothing[0m (up to date)[0m
172.16.1.170   * ruby_block[yum-cache-reload-epel] action nothing[0m (up to date)[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170 Recipe: yum::ibm[0m
172.16.1.170   * yum_repository[IBM-openstack-noarch] action add[0m
172.16.1.170 Recipe: <Dynamically Defined Resource>[0m
172.16.1.170   * template[/etc/yum.repos.d/openstack-noarch.repo] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/yum.repos.d/openstack-noarch.repo][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-5gwyuy	2014-08-08 01:44:30.559999964 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-13iwuuw	2014-08-08 01:44:30.559999964 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,9 @@[0m[37m
172.16.1.170         +# This file was generated by Chef[0m[37m
172.16.1.170         +# Do NOT modify this file by hand.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[openstack-noarch][0m[37m
172.16.1.170         +name=openstack-noarch[0m[37m
172.16.1.170         +baseurl=http://rchgsa.ibm.com/projects/e/emsol/ccs/build/driver/osee-icehouse/openstack/D20140225-1707/noarch/[0m[37m
172.16.1.170         +enabled=1[0m[37m
172.16.1.170         +gpgcheck=0[0m[37m
172.16.1.170         +sslverify=0[0m
172.16.1.170 [0m
172.16.1.170   * execute[yum-makecache-openstack-noarch] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute yum -q makecache --disablerepo=* --enablerepo=openstack-noarch[0m
172.16.1.170 [0m
172.16.1.170   * ruby_block[yum-cache-reload-openstack-noarch] action create[0m[32m
172.16.1.170     - execute the ruby block yum-cache-reload-openstack-noarch[0m
172.16.1.170 [0m
172.16.1.170   * execute[yum-makecache-openstack-noarch] action nothing[0m (up to date)[0m
172.16.1.170   * ruby_block[yum-cache-reload-openstack-noarch] action nothing[0m (up to date)[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170 Recipe: yum::ibm[0m
172.16.1.170   * yum_repository[IBM-openstack-x86_64] action add[0m
172.16.1.170 Recipe: <Dynamically Defined Resource>[0m
172.16.1.170   * template[/etc/yum.repos.d/openstack-x86_64.repo] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/yum.repos.d/openstack-x86_64.repo][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-16m3i40	2014-08-08 01:44:31.514999964 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-ntx04p	2014-08-08 01:44:31.513999964 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,9 @@[0m[37m
172.16.1.170         +# This file was generated by Chef[0m[37m
172.16.1.170         +# Do NOT modify this file by hand.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[openstack-x86_64][0m[37m
172.16.1.170         +name=openstack-x86_64[0m[37m
172.16.1.170         +baseurl=http://rchgsa.ibm.com/projects/e/emsol/ccs/build/driver/osee-icehouse/openstack/D20140225-1707/x86_64[0m[37m
172.16.1.170         +enabled=1[0m[37m
172.16.1.170         +gpgcheck=0[0m[37m
172.16.1.170         +sslverify=0[0m
172.16.1.170 [0m
172.16.1.170   * execute[yum-makecache-openstack-x86_64] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute yum -q makecache --disablerepo=* --enablerepo=openstack-x86_64[0m
172.16.1.170 [0m
172.16.1.170   * ruby_block[yum-cache-reload-openstack-x86_64] action create[0m[32m
172.16.1.170     - execute the ruby block yum-cache-reload-openstack-x86_64[0m
172.16.1.170 [0m
172.16.1.170   * execute[yum-makecache-openstack-x86_64] action nothing[0m (up to date)[0m
172.16.1.170   * ruby_block[yum-cache-reload-openstack-x86_64] action nothing[0m (up to date)[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for directory[/var/lib/mysql] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous directory[/var/lib/mysql]: /var/chef/cache/cookbooks/mysql/recipes/_server_rhel.rb:11:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  directory[/var/lib/mysql]: /var/chef/cache/cookbooks/mysql/recipes/_server_rhel.rb:20:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[python-keystone] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[python-keystone]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:37:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[python-keystone]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:32:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[curl] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[curl]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:41:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[curl]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:47:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[MySQL-python] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[MySQL-python]: /var/chef/cache/cookbooks/openstack-identity/recipes/server.rb:38:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[MySQL-python]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:54:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[openstack-glance] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[openstack-glance]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:46:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[openstack-glance]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:62:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[cronie] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[cronie]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:46:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[cronie]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:62:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[python-glanceclient] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[python-glanceclient]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:46:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[python-glanceclient]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:62:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[python-anyjson] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[python-anyjson]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:46:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[python-anyjson]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:62:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for directory[/var/cache/glance] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous directory[/var/cache/glance]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:99:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  directory[/var/cache/glance]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:68:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for directory[/etc/glance] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous directory[/etc/glance]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:93:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  directory[/etc/glance]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:86:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[python-glanceclient] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[python-glanceclient]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:62:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[python-glanceclient]: /var/chef/cache/cookbooks/openstack-image/recipes/image_upload.rb:31:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[MySQL-python] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[MySQL-python]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:54:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[MySQL-python]: /var/chef/cache/cookbooks/openstack-compute/recipes/nova-common.rb:41:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[python-memcached] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[python-memcached]: /var/chef/cache/cookbooks/openstack-identity/recipes/server.rb:45:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[python-memcached]: /var/chef/cache/cookbooks/openstack-compute/recipes/nova-common.rb:48:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for openstack-identity_register[Register Service Tenant] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous openstack-identity_register[Register Service Tenant]: /var/chef/cache/cookbooks/openstack-image/recipes/identity_registration.rb:67:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  openstack-identity_register[Register Service Tenant]: /var/chef/cache/cookbooks/openstack-compute/recipes/identity_registration.rb:41:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for directory[/var/lock/nova] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous directory[/var/lock/nova]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-ec2.rb:29:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  directory[/var/lock/nova]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-os-compute.rb:29:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[python-keystoneclient] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[python-keystoneclient]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-ec2.rb:38:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[python-keystoneclient]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-os-compute.rb:42:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[openstack-nova-api] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[openstack-nova-api]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-ec2.rb:43:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[openstack-nova-api]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-os-compute.rb:47:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for template[/etc/nova/api-paste.ini] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous template[/etc/nova/api-paste.ini]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-ec2.rb:64:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  template[/etc/nova/api-paste.ini]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-os-compute.rb:68:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for directory[/var/lock/nova] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous directory[/var/lock/nova]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-os-compute.rb:29:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  directory[/var/lock/nova]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-metadata.rb:32:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[python-keystoneclient] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[python-keystoneclient]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-os-compute.rb:42:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[python-keystoneclient]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-metadata.rb:41:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[openstack-nova-api] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[openstack-nova-api]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-os-compute.rb:47:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[openstack-nova-api]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-metadata.rb:46:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for template[/etc/nova/api-paste.ini] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous template[/etc/nova/api-paste.ini]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-os-compute.rb:68:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  template[/etc/nova/api-paste.ini]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-metadata.rb:67:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for directory[/var/lock/nova] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous directory[/var/lock/nova]: /var/chef/cache/cookbooks/openstack-compute/recipes/api-metadata.rb:32:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  directory[/var/lock/nova]: /var/chef/cache/cookbooks/openstack-compute/recipes/scheduler.rb:26:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[MySQL-python] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[MySQL-python]: /var/chef/cache/cookbooks/openstack-compute/recipes/nova-common.rb:41:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[MySQL-python]: /var/chef/cache/cookbooks/openstack-network/recipes/common.rb:61:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for directory[/var/cache/neutron] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous directory[/var/cache/neutron]: /var/chef/cache/cookbooks/openstack-network/recipes/common.rb:75:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  directory[/var/cache/neutron]: /var/chef/cache/cookbooks/openstack-network/recipes/common.rb:82:in `from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Cloning resource attributes for package[python-neutronclient] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Previous package[python-neutronclient]: /var/chef/cache/cookbooks/openstack-compute/recipes/nova-setup.rb:101:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:32+08:00] WARN: Current  package[python-neutronclient]: /var/chef/cache/cookbooks/openstack-network/recipes/common.rb:120:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Cloning resource attributes for service[neutron-server] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Previous service[neutron-server]: /var/chef/cache/cookbooks/openstack-network/recipes/common.rb:130:in `from_file'
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Current  service[neutron-server]: /var/chef/cache/cookbooks/openstack-network/recipes/openvswitch.rb:86:in `from_file'
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Cloning resource attributes for package[openstack-neutron] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Previous package[openstack-neutron]: /var/chef/cache/cookbooks/openstack-network/recipes/common.rb:53:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Current  package[openstack-neutron]: /var/chef/cache/cookbooks/openstack-network/recipes/dhcp_agent.rb:30:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Cloning resource attributes for package[openstack-neutron-ml2] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Previous package[openstack-neutron-ml2]: /var/chef/cache/cookbooks/openstack-network/recipes/common.rb:53:in `block in from_file'
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Current  package[openstack-neutron-ml2]: /var/chef/cache/cookbooks/openstack-network/recipes/dhcp_agent.rb:46:in `from_file'
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Cloning resource attributes for service[neutron-server] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Previous service[neutron-server]: /var/chef/cache/cookbooks/openstack-network/recipes/openvswitch.rb:86:in `from_file'
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Current  service[neutron-server]: /var/chef/cache/cookbooks/openstack-network/recipes/server.rb:47:in `from_file'
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Cloning resource attributes for openstack-identity_register[Register Service Tenant] from prior resource (CHEF-3694)
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Previous openstack-identity_register[Register Service Tenant]: /var/chef/cache/cookbooks/openstack-compute/recipes/identity_registration.rb:41:in `from_file'
172.16.1.170 [2014-08-08T01:44:33+08:00] WARN: Current  openstack-identity_register[Register Service Tenant]: /var/chef/cache/cookbooks/openstack-network/recipes/identity_registration.rb:65:in `from_file'
172.16.1.170 Converging 209 resources[0m
172.16.1.170 Recipe: yum::ibm[0m
172.16.1.170   * yum_repository[IBM-rhel] action nothing[0m (up to date)[0m
172.16.1.170   * yum_repository[IBM-epel] action nothing[0m (up to date)[0m
172.16.1.170   * yum_repository[IBM-openstack-noarch] action nothing[0m (up to date)[0m
172.16.1.170   * yum_repository[IBM-openstack-x86_64] action nothing[0m
172.16.1.170  (up to date)[0m
172.16.1.170 Recipe: openstack-common::default[0m
172.16.1.170   * yum_repository[RDO-icehouse] action nothing[0m (up to date)[0m
172.16.1.170 Recipe: openstack-common::logging[0m
172.16.1.170   * directory[/etc/openstack] action create[0m
172.16.1.170 [32m
172.16.1.170     - create new directory /etc/openstack[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '' to '0755'[0m[32m
172.16.1.170     - change owner from '' to 'root'[0m[32m
172.16.1.170     - change group from '' to 'root'[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/openstack/logging.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/openstack/logging.conf][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-tofaqf	2014-08-08 01:44:33.368999965 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-lc93hj	2014-08-08 01:44:33.367999964 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,139 @@[0m[37m
172.16.1.170         +[loggers][0m[37m
172.16.1.170         +keys=root,ceilometer,cinder,glance,horizon,keystone,nova,neutron,swift,amqplib,sqlalchemy,boto,suds,eventletwsgi,nova_api_openstack_wsgi,nova_osapi_compute_wsgi_server[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[formatters][0m[37m
172.16.1.170         +keys=normal,normal_with_name,debug,syslog_with_name,syslog_debug[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[handlers][0m[37m
172.16.1.170         +keys=stderr,devel,prod,debug[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +## FORMATTERS ##[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[formatter_debug][0m
172.16.1.170 [37m
172.16.1.170         +format=[%(name)s]: %(asctime)s %(levelname)s %(module)s.%(funcName)s %(message)s[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[formatter_normal][0m
172.16.1.170 [37m
172.16.1.170         +format=%(asctime)s %(levelname)s %(message)s[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[formatter_normal_with_name][0m[37m
172.16.1.170         +format=[%(name)s]: %(asctime)s %(levelname)s %(message)s[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[formatter_syslog_with_name][0m[37m
172.16.1.170         +format=%(name)s: %(levelname)s %(message)s[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[formatter_syslog_debug][0m[37m
172.16.1.170         +format=%(name)s: %(levelname)s %(module)s.%(funcName)s %(message)s[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +## LOGGERS ##[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_amqplib][0m[37m
172.16.1.170         +level = WARNING[0m[37m
172.16.1.170         +handlers = stderr[0m[37m
172.16.1.170         +qualname = amqplib[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_sqlalchemy][0m[37m
172.16.1.170         +level = WARNING[0m[37m
172.16.1.170         +handlers = stderr[0m[37m
172.16.1.170         +qualname = sqlalchemy[0m[37m
172.16.1.170         +# "level = INFO" logs SQL queries.[0m[37m
172.16.1.170         +# "level = DEBUG" logs SQL queries and results.[0m[37m
172.16.1.170         +# "level = WARNING" logs neither.  (Recommended for production systems.)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_boto][0m[37m
172.16.1.170         +level = WARNING[0m[37m
172.16.1.170         +handlers = stderr[0m[37m
172.16.1.170         +qualname = boto[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_suds][0m[37m
172.16.1.170         +level = INFO[0m[37m
172.16.1.170         +handlers = stderr[0m[37m
172.16.1.170         +qualname = suds[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_nova_api_openstack_wsgi][0m[37m
172.16.1.170         +level = WARNING[0m[37m
172.16.1.170         +handlers = prod,debug[0m[37m
172.16.1.170         +qualname = nova.api.openstack.wsgi[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_nova_osapi_compute_wsgi_server][0m[37m
172.16.1.170         +level = WARNING[0m[37m
172.16.1.170         +handlers = prod,debug[0m[37m
172.16.1.170         +qualname = nova.osapi_compute.wsgi.server[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_eventletwsgi][0m[37m
172.16.1.170         +level = WARNING[0m[37m
172.16.1.170         +handlers = stderr[0m[37m
172.16.1.170         +qualname = eventlet.wsgi.server[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_root][0m
172.16.1.170 [37m
172.16.1.170         +level=NOTSET[0m[37m
172.16.1.170         +handlers=devel[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_ceilometer][0m
172.16.1.170 [37m
172.16.1.170         +level=DEBUG[0m[37m
172.16.1.170         +handlers=prod,debug[0m
172.16.1.170 [37m
172.16.1.170         +qualname=ceilometer[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[logger_cinder][0m
172.16.1.170 [37m
172.16.1.170         +level=DEBUG[0m[37m
172.16.1.170         +handlers=prod,debug[0m
172.16.1.170 [37m
172.16.1.170         +qualname=cinder[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_glance][0m[37m
172.16.1.170         +level=DEBUG[0m
172.16.1.170 [37m
172.16.1.170         +handlers=prod,debug[0m
172.16.1.170 [37m
172.16.1.170         +qualname=glance[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[logger_horizon][0m
172.16.1.170 [37m
172.16.1.170         +level=DEBUG[0m
172.16.1.170 [37m
172.16.1.170         +handlers=prod,debug[0m
172.16.1.170 [37m
172.16.1.170         +qualname=horizon[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_keystone][0m[37m
172.16.1.170         +level=DEBUG[0m[37m
172.16.1.170         +handlers=prod,debug[0m[37m
172.16.1.170         +qualname=keystone[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_nova][0m[37m
172.16.1.170         +level=DEBUG[0m[37m
172.16.1.170         +handlers=prod,debug[0m[37m
172.16.1.170         +qualname=nova[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_neutron][0m[37m
172.16.1.170         +level=DEBUG[0m[37m
172.16.1.170         +handlers=prod,debug[0m[37m
172.16.1.170         +qualname=neutron[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[logger_swift][0m[37m
172.16.1.170         +level=DEBUG[0m[37m
172.16.1.170         +handlers=prod,debug[0m[37m
172.16.1.170         +qualname=swift[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +## HANDLERS ##[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[handler_stderr][0m[37m
172.16.1.170         +class = StreamHandler[0m[37m
172.16.1.170         +args = (sys.stderr,)[0m[37m
172.16.1.170         +formatter = debug[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[handler_devel][0m
172.16.1.170 [37m
172.16.1.170         +class=StreamHandler[0m[37m
172.16.1.170         +level=NOTSET[0m
172.16.1.170 [37m
172.16.1.170         +formatter=debug[0m
172.16.1.170 [37m
172.16.1.170         +args=(sys.stdout,)[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[handler_file][0m
172.16.1.170 [37m
172.16.1.170         +class=FileHandler[0m[37m
172.16.1.170         +formatter=debug[0m
172.16.1.170 [37m
172.16.1.170         +args=('/var/log/openstack/openstack.log', 'w')[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[handler_prod][0m
172.16.1.170 [37m
172.16.1.170         +level=INFO[0m
172.16.1.170 [37m
172.16.1.170         +class=handlers.SysLogHandler[0m
172.16.1.170 [37m
172.16.1.170         +formatter=syslog_with_name[0m
172.16.1.170 [37m
172.16.1.170         +args=(('/dev/log'), handlers.SysLogHandler.LOG_LOCAL0)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[handler_debug][0m[37m
172.16.1.170         +level=DEBUG[0m[37m
172.16.1.170         +class=handlers.SysLogHandler[0m[37m
172.16.1.170         +formatter=syslog_debug[0m[37m
172.16.1.170         +args=(('/dev/log'), handlers.SysLogHandler.LOG_LOCAL1)[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-common::sysctl[0m
172.16.1.170   * directory[/etc/sysctl.d] action create[0m
172.16.1.170 [32m
172.16.1.170     - create new directory /etc/sysctl.d[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '' to '0755'[0m[32m
172.16.1.170     - change owner from '' to 'root'[0m[32m
172.16.1.170     - change group from '' to 'root'[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/sysctl.d/60-openstack.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/sysctl.d/60-openstack.conf][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-1cji3a4	2014-08-08 01:44:33.490999964 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-x7uav5	2014-08-08 01:44:33.490999964 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,4 @@[0m[37m
172.16.1.170         +# Managed by Chef[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +net.ipv4.conf.all.rp_filter = 0[0m[37m
172.16.1.170         +net.ipv4.conf.default.rp_filter = 0[0m
172.16.1.170 [0m
172.16.1.170   * execute[sysctl -p /etc/sysctl.d/60-openstack.conf] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute sysctl -p /etc/sysctl.d/60-openstack.conf[0m
172.16.1.170 [0m
172.16.1.170   * execute[sysctl -p /etc/sysctl.d/60-openstack.conf] action nothing[0m (up to date)[0m
172.16.1.170 Recipe: mysql::_server_rhel[0m
172.16.1.170   * package[mysql-server] action install[0m
172.16.1.170 [32m
172.16.1.170     - install version 5.1.71-1.el6 of package mysql-server[0m
172.16.1.170 [0m
172.16.1.170   * directory[/var/run/mysqld] action create[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * directory[/var/lib/mysql] action create[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * directory[/var/log/mysql] action create[0m[32m
172.16.1.170     - create new directory /var/log/mysql[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '' to '0755'[0m[32m
172.16.1.170     - change owner from '' to 'mysql'[0m[32m
172.16.1.170     - change group from '' to 'mysql'[0m
172.16.1.170 [0m
172.16.1.170   * directory[/etc/mysql/conf.d] action create[0m
172.16.1.170 [32m
172.16.1.170     - create new directory /etc/mysql/conf.d[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '' to '0755'[0m[32m
172.16.1.170     - change owner from '' to 'mysql'[0m[32m
172.16.1.170     - change group from '' to 'mysql'[0m
172.16.1.170 [0m
172.16.1.170   * directory[/var/lib/mysql] action create[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * template[initial-my.cnf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[initial-my.cnf] from 3ba593 to 1cfdb3[0m[37m
172.16.1.170         --- /etc/my.cnf	2013-08-09 17:52:10.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-13mv5dj	2014-08-08 01:44:57.502999965 +0800[0m[37m
172.16.1.170         @@ -1,10 +1,228 @@[0m[37m
172.16.1.170         -[mysqld][0m[37m
172.16.1.170         -datadir=/var/lib/mysql[0m[37m
172.16.1.170         -socket=/var/lib/mysql/mysql.sock[0m[37m
172.16.1.170         -user=mysql[0m[37m
172.16.1.170         -# Disabling symbolic-links is recommended to prevent assorted security risks[0m[37m
172.16.1.170         -symbolic-links=0[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Generated by Chef for bx-all[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Local modifications will be overwritten.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# The MySQL database server configuration file.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# You can copy this to one of:[0m[37m
172.16.1.170         +# - "/etc/mysql/my.cnf" to set global options,[0m[37m
172.16.1.170         +# - "~/.my.cnf" to set user-specific options.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# One can use all long options that the program supports.[0m
172.16.1.170 [37m
172.16.1.170         +# Run program with --help to get a list of available options and with[0m[37m
172.16.1.170         +# --print-defaults to see which it would actually understand and use.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# For explanations see[0m[37m
172.16.1.170         +# http://dev.mysql.com/doc/mysql/en/server-system-variables.html[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This will be passed to all mysql clients[0m[37m
172.16.1.170         +# It has been reported that passwords should be enclosed with ticks/quotes[0m[37m
172.16.1.170         +# escpecially if they contain "#" chars...[0m[37m
172.16.1.170         +# Remember to edit /etc/mysql/debian.cnf when changing the socket location.[0m[37m
172.16.1.170         +[client][0m[37m
172.16.1.170         +port            = 3306[0m[37m
172.16.1.170         +socket          = /var/lib/mysql/mysql.sock[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Here is entries for some specific programs[0m[37m
172.16.1.170         +# The following values assume you have at least 32M ram[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +# This was formally known as [safe_mysqld]. Both versions are currently parsed.[0m[37m
172.16.1.170          [mysqld_safe][0m[37m
172.16.1.170         -log-error=/var/log/mysqld.log[0m[37m
172.16.1.170         -pid-file=/var/run/mysqld/mysqld.pid[0m[37m
172.16.1.170         +socket          = /var/lib/mysql/mysql.sock[0m[37m
172.16.1.170         +nice            = 0[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[mysqld][0m[37m
172.16.1.170         +#[0m
172.16.1.170 [37m
172.16.1.170         +# * Basic Settings[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# * IMPORTANT[0m[37m
172.16.1.170         +#   If you make changes to these settings and your system uses apparmor, you may[0m[37m
172.16.1.170         +#   also need to also adjust /etc/apparmor.d/usr.sbin.mysqld.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +user            = mysql[0m[37m
172.16.1.170         +pid-file        = /var/run/mysqld/mysqld.pid[0m[37m
172.16.1.170         +socket          = /var/lib/mysql/mysql.sock[0m[37m
172.16.1.170         +port            = 3306[0m[37m
172.16.1.170         +basedir         = /usr[0m[37m
172.16.1.170         +datadir         = /var/lib/mysql[0m[37m
172.16.1.170         +tmpdir          = /tmp[0m[37m
172.16.1.170         +skip-external-locking[0m[37m
172.16.1.170         +skip-name-resolve[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Charset and Collation[0m[37m
172.16.1.170         +character-set-server = utf8[0m[37m
172.16.1.170         +collation-server     = utf8_general_ci[0m[37m
172.16.1.170         +event_scheduler      = 0[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Instead of skip-networking the default is now to listen only on[0m[37m
172.16.1.170         +# localhost which is more compatible and is not less secure.[0m[37m
172.16.1.170         +bind-address            = 0.0.0.0[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# * Fine Tuning[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +key_buffer_size         = 256M[0m[37m
172.16.1.170         +max_allowed_packet      = 16M[0m[37m
172.16.1.170         +thread_stack            = 256K[0m[37m
172.16.1.170         +thread_cache_size       = 8[0m[37m
172.16.1.170         +sort_buffer_size        = 2M[0m[37m
172.16.1.170         +read_buffer_size        = 128k[0m[37m
172.16.1.170         +read_rnd_buffer_size    = 256k[0m[37m
172.16.1.170         +join_buffer_size        = 128k[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +auto-increment-increment = 1[0m[37m
172.16.1.170         +auto-increment-offset    = 1[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This replaces the startup script and checks MyISAM tables if needed[0m[37m
172.16.1.170         +# the first time they are touched[0m[37m
172.16.1.170         +myisam-recover          = BACKUP[0m[37m
172.16.1.170         +max_connections         = 800[0m[37m
172.16.1.170         +max_connect_errors      = 10[0m[37m
172.16.1.170         +concurrent_insert       = 2[0m[37m
172.16.1.170         +connect_timeout         = 10[0m[37m
172.16.1.170         +wait_timeout            = 180[0m[37m
172.16.1.170         +net_read_timeout        = 30[0m[37m
172.16.1.170         +net_write_timeout       = 30[0m[37m
172.16.1.170         +back_log                = 128[0m[37m
172.16.1.170         +table_cache             = 128[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +tmp_table_size          = 32M[0m[37m
172.16.1.170         +max_heap_table_size     = 32M[0m[37m
172.16.1.170         +bulk_insert_buffer_size = 32M[0m[37m
172.16.1.170         +open-files-limit        = 1024[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Default Table Settings[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# * Query Cache Configuration[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +query_cache_limit       = 1M[0m[37m
172.16.1.170         +query_cache_size        = 16M[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# * Logging[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Both location gets rotated by the cronjob.[0m[37m
172.16.1.170         +# Be aware that this log type is a performance killer.[0m[37m
172.16.1.170         +#log            = /var/log/mysql/mysql.log[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Error logging goes to syslog. This is a Debian improvement :)[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# * Replication[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Here you can see queries with especially long duration[0m[37m
172.16.1.170         +slow_query_log      = 1[0m[37m
172.16.1.170         +slow_query_log_file = /var/log/mysql/slow.log[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +long_query_time         = 2[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# The following can be used as easy to replay backup logs or for replication.[0m[37m
172.16.1.170         +# note: if you are setting up a replication slave, see README.Debian about[0m[37m
172.16.1.170         +#       other settings you may need to change.[0m[37m
172.16.1.170         +expire_logs_days        = 10[0m[37m
172.16.1.170         +max_binlog_size         = 100M[0m[37m
172.16.1.170         +binlog_cache_size       = 32K[0m[37m
172.16.1.170         +#binlog_do_db           = include_database_name[0m[37m
172.16.1.170         +#binlog_ignore_db       = include_database_name[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +sync_binlog             = 0[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +slave_compressed_protocol = 0[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# * InnoDB[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.[0m[37m
172.16.1.170 
172.16.1.170         +# Read the manual for more InnoDB related options. There are many![0m[37m
172.16.1.170         +# You might want to disable InnoDB to shrink the mysqld process by circa 100MB.[0m[37m
172.16.1.170         +#skip-innodb[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +default_table_type = InnoDB[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +## InnoDB Plugin Independent Settings[0m[37m
172.16.1.170         +innodb_data_home_dir            = /var/lib/mysql[0m[37m
172.16.1.170         +innodb_log_group_home_dir       = /var/lib/mysql[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +innodb_file_per_table[0m[37m
172.16.1.170         +innodb_table_locks              = true[0m[37m
172.16.1.170         +innodb_lock_wait_timeout        = 60[0m[37m
172.16.1.170         +innodb_thread_concurrency       = 0[0m[37m
172.16.1.170         +innodb_commit_concurrency       = 0[0m[37m
172.16.1.170         +innodb_support_xa               = true[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +innodb_buffer_pool_size = 128M[0m[37m
172.16.1.170         +innodb_log_file_size    = 5M[0m[37m
172.16.1.170         +innodb_additional_mem_pool_size = 8M[0m[37m
172.16.1.170         +innodb_data_file_path   = ibdata1:10M:autoextend[0m[37m
172.16.1.170         +innodb_flush_log_at_trx_commit = 2[0m[37m
172.16.1.170         +innodb_log_buffer_size  = 8M[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# * Security Features[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Read the manual, too, if you want chroot![0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# For generating SSL certificates I recommend the OpenSSL GUI "tinyca".[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# ssl-ca=/etc/mysql/cacert.pem[0m[37m
172.16.1.170         +# ssl-cert=/etc/mysql/server-cert.pem[0m[37m
172.16.1.170         +# ssl-key=/etc/mysql/server-key.pem[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[mysqldump][0m[37m
172.16.1.170         +quick[0m[37m
172.16.1.170         +quote-names[0m[37m
172.16.1.170         +max_allowed_packet      = 16M[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[mysql][0m[37m
172.16.1.170         +#no-auto-rehash # faster start of mysql but no tab completition[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[myisamchk][0m[37m
172.16.1.170         +key_buffer                = 16M[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +myisam_sort_buffer_size   = 8M[0m[37m
172.16.1.170         +myisam_max_sort_file_size = 2147483648[0m[37m
172.16.1.170         +myisam_repair_threads     = 1[0m[37m
172.16.1.170         +myisam-recover            = BACKUP[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# * NDB Cluster[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# See /usr/share/doc/mysql-server-*/README.Debian for more information.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# The following configuration is read by the NDB Data Nodes (ndbd processes)[0m[37m
172.16.1.170         +# not from the NDB Management Nodes (ndb_mgmd processes).[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# [MYSQL_CLUSTER][0m
172.16.1.170 [37m
172.16.1.170         +# ndb-connectstring=127.0.0.1[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# * BerkeleyDB[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Using BerkeleyDB is now discouraged as its support will cease in 5.1.12.[0m[37m
172.16.1.170         +skip-bdb[0m[37m
172.16.1.170         +# Default to using old password format for compatibility with mysql 3.x[0m[37m
172.16.1.170         +# clients (those using the mysqlclient10 compatibility package).[0m[37m
172.16.1.170         +old_passwords           = [0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# * IMPORTANT: Additional settings that can override those from this file![0m[37m
172.16.1.170         +#   The files must end with '.cnf', otherwise they'll be ignored.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +!includedir /etc/mysql/conf.d/[0m[37m
172.16.1.170         +[0m
172.16.1.170 [0m
172.16.1.170   * service[mysql-start] action start[0m
172.16.1.170 [32m
172.16.1.170     - start service service[mysql-start][0m
172.16.1.170 [0m
172.16.1.170   * service[mysql-start] action nothing[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * execute[/usr/bin/mysql_install_db] action run[0m (skipped due to only_if)[0m
172.16.1.170   * execute[assign-root-password] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute /usr/bin/mysqladmin -u root password password[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/mysql_grants.sql] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/mysql_grants.sql][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-164b9v6	2014-08-08 01:45:04.821999960 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-zlvgsg	2014-08-08 01:45:04.820999958 +0800[0m
172.16.1.170 [37m
172.16.1.170         @@ -0,0 +1,18 @@[0m[37m
172.16.1.170         +# Generated by Chef for bx-all.[0m[37m
172.16.1.170         +# Local modifications will be overwritten.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Grant replication for a slave user.[0m[37m
172.16.1.170         +GRANT REPLICATION SLAVE ON *.* TO 'repl'@'%' identified by 'RMAuLZ6B5gsJRiN9k1go';[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# remove remote access for root user and set password for local root user[0m[37m
172.16.1.170         +DELETE FROM mysql.user WHERE User='root' AND Host NOT IN ('localhost', '127.0.0.1', '::1');[0m[37m
172.16.1.170         +UPDATE mysql.user SET Password=PASSWORD('password') WHERE User='root';[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Remove anonymous users[0m[37m
172.16.1.170         +DELETE FROM mysql.user WHERE User='';[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Remove test database and access to it[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Set the password for root@localhost[0m[37m
172.16.1.170         +SET PASSWORD FOR 'root'@'localhost' = PASSWORD('password');[0m[37m
172.16.1.170         +SET PASSWORD FOR 'root'@'127.0.0.1' = PASSWORD('password');[0m
172.16.1.170 [0m
172.16.1.170   * execute[install-grants] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute /usr/bin/mysql -u root  -ppassword < /etc/mysql_grants.sql[0m
172.16.1.170 [0m
172.16.1.170   * service[mysql] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[mysql][0m
172.16.1.170 [0m
172.16.1.170   * execute[install-grants] action nothing[0m (up to date)[0m
172.16.1.170   * template[final-my.cnf] action create[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[mysql] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[mysql][0m
172.16.1.170 [0m
172.16.1.170   * service[mysql] action start[0m
172.16.1.170  (up to date)[0m
172.16.1.170 Recipe: openstack-ops-database::openstack-db[0m
172.16.1.170   * execute[create database(nova) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS nova DEFAULT CHARACTER SET utf8"[0m
172.16.1.170 [0m
172.16.1.170   * execute[grant user(nova1) to database(nova) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON nova.* TO 'nova1'@'%' IDENTIFIED BY 'nova'"[0m
172.16.1.170 [0m
172.16.1.170   * execute[create database(horizon) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS horizon DEFAULT CHARACTER SET utf8"[0m
172.16.1.170 [0m
172.16.1.170   * execute[grant user(horizon1) to database(horizon) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON horizon.* TO 'horizon1'@'%' IDENTIFIED BY 'horizon'"[0m
172.16.1.170 [0m
172.16.1.170   * execute[create database(keystone) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS keystone DEFAULT CHARACTER SET utf8"[0m
172.16.1.170 [0m
172.16.1.170   * execute[grant user(keyston1) to database(keystone) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON keystone.* TO 'keyston1'@'%' IDENTIFIED BY 'keystone'"[0m
172.16.1.170 [0m
172.16.1.170   * execute[create database(glance) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS glance DEFAULT CHARACTER SET utf8"[0m
172.16.1.170 [0m
172.16.1.170   * execute[grant user(glance1) to database(glance) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON glance.* TO 'glance1'@'%' IDENTIFIED BY 'glance'"[0m
172.16.1.170 [0m
172.16.1.170   * execute[create database(ceilometer) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS ceilometer DEFAULT CHARACTER SET utf8"[0m
172.16.1.170 [0m
172.16.1.170   * execute[grant user(ceilome1) to database(ceilometer) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON ceilometer.* TO 'ceilome1'@'%' IDENTIFIED BY 'ceilometer'"[0m
172.16.1.170 [0m
172.16.1.170   * execute[create database(neutron) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS neutron DEFAULT CHARACTER SET utf8"[0m
172.16.1.170 [0m
172.16.1.170   * execute[grant user(neutron1) to database(neutron) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON neutron.* TO 'neutron1'@'%' IDENTIFIED BY 'neutron'"[0m
172.16.1.170 [0m
172.16.1.170   * execute[create database(cinder) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS cinder DEFAULT CHARACTER SET utf8"[0m
172.16.1.170 [0m
172.16.1.170   * execute[grant user(cinder1) to database(cinder) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON cinder.* TO 'cinder1'@'%' IDENTIFIED BY 'cinder'"[0m
172.16.1.170 [0m
172.16.1.170   * execute[create database(heat) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS heat DEFAULT CHARACTER SET utf8"[0m
172.16.1.170 [0m
172.16.1.170   * execute[grant user(heat1) to database(heat) on 172.16.1.170] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON heat.* TO 'heat1'@'%' IDENTIFIED BY 'heat'"[0m
172.16.1.170 [0m
172.16.1.170 Recipe: qpid::single[0m
172.16.1.170   * qpid_setup[setup qpid] action create[0m
172.16.1.170  (up to date)[0m
172.16.1.170 Recipe: <Dynamically Defined Resource>[0m
172.16.1.170   * package[qpid-cpp-server] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package qpid-cpp-server from uninstalled to 0.22-5.ibm.el6[0m
172.16.1.170 [0m
172.16.1.170   * package[qpid-tools] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package qpid-tools from uninstalled to 0.22-5.ibm.el6[0m
172.16.1.170 [0m
172.16.1.170   * package[python-qpid-qmf] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * execute[qpidd: sleep] action nothing[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[qpidd] action enable[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * directory[/var/log/qpid] action create[0m
172.16.1.170 [32m
172.16.1.170     - create new directory /var/log/qpid[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '' to '0744'[0m[32m
172.16.1.170     - change owner from '' to 'qpidd'[0m[32m
172.16.1.170     - change group from '' to 'qpidd'[0m
172.16.1.170 [0m
172.16.1.170   * file[/var/log/qpid/qpidd.log] action create[0m
172.16.1.170 [32m
172.16.1.170     - create new file /var/log/qpid/qpidd.log[0m[37m
172.16.1.170         (no diff)[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/qpid/qpidd.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/qpid/qpidd.conf][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-1gl65jj	2014-08-08 01:46:00.185999969 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1t40ysy	2014-08-08 01:46:00.185999969 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,24 @@[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Generated by Chef for .[0m[37m
172.16.1.170         +# Local modifications will be overwritten.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Configuration file for qpidd. Entries are of the form:[0m[37m
172.16.1.170         +#   name=value[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# (Note: no spaces on either side of '='). Using default settings:[0m[37m
172.16.1.170         +# "qpidd --help" or "man qpidd" for more details.[0m[37m
172.16.1.170         +# cluster-mechanism=DIGEST-MD5 ANONYMOUS[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# broker option[0m[37m
172.16.1.170         +auth=no[0m[37m
172.16.1.170         +max-connections=2000[0m[37m
172.16.1.170         +connection-backlog=1000[0m[37m
172.16.1.170         +worker-threads=100[0m[37m
172.16.1.170         +max-negotiate-time=60000[0m[37m
172.16.1.170         +link-heartbeat-interval=1200[0m[37m
172.16.1.170         +log-enable=info+[0m[37m
172.16.1.170         +log-to-file=/var/log/qpid/qpidd.log[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +port=5672[0m
172.16.1.170 [0m
172.16.1.170   * service[qpidd] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[qpidd][0m
172.16.1.170 [0m
172.16.1.170   * execute[qpidd: sleep] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute sleep 10s[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-identity::server[0m
172.16.1.170   * package[MySQL-python] action install[0m
172.16.1.170 [32m
172.16.1.170     - install version 1.2.3-0.3.c1.1.el6 of package MySQL-python[0m
172.16.1.170 [0m
172.16.1.170   * package[python-memcached] action install[0m
172.16.1.170 [32m
172.16.1.170     - install version 1.53-1.ibm.el6 of package python-memcached[0m
172.16.1.170 [0m
172.16.1.170   * package[openstack-keystone] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package openstack-keystone from uninstalled to 2014.1-201402251724.ibm.el6.70[0m
172.16.1.170 [0m
172.16.1.170   * execute[Keystone: sleep] action nothing[0m (up to date)[0m
172.16.1.170   * service[keystone] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[keystone][0m
172.16.1.170 [0m
172.16.1.170   * execute[Keystone: sleep] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute sleep 10s[0m
172.16.1.170 [0m
172.16.1.170   * directory[/etc/keystone] action create[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '02755' to '0700'[0m[32m
172.16.1.170     - change owner from 'root' to 'keystone'[0m[32m
172.16.1.170     - change group from 'root' to 'keystone'[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * directory[/etc/keystone/ssl] action create[0m (skipped due to only_if)[0m
172.16.1.170   * file[/var/lib/keystone/keystone.db] action delete[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * execute[keystone-manage pki_setup] action run[0m
172.16.1.170  (skipped due to only_if)[0m
172.16.1.170   * template[/etc/keystone/keystone.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/keystone/keystone.conf] from 1835ca to db7933[0m[37m
172.16.1.170         --- /etc/keystone/keystone.conf	2014-02-26 07:24:25.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1y66wg5	2014-08-08 01:48:25.956999964 +0800[0m[37m
172.16.1.170         @@ -1,1231 +1,134 @@[0m[37m
172.16.1.170         -[DEFAULT][0m[37m
172.16.1.170         -log_file = /var/log/keystone/keystone.log[0m[37m
172.16.1.170         -onready = keystone.common.systemd[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A "shared secret" that can be used to bootstrap Keystone.[0m[37m
172.16.1.170         -# This "token" does not represent a user, and carries no[0m[37m
172.16.1.170         -# explicit authorization. To disable in production (highly[0m[37m
172.16.1.170         -# recommended), remove AdminTokenAuthMiddleware from your[0m[37m
172.16.1.170         -# paste application pipelines (for example, in keystone-[0m[37m
172.16.1.170         -# paste.ini). (string value)[0m[37m
172.16.1.170         -#admin_token=ADMIN[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The IP Address of the network interface to for the public[0m[37m
172.16.1.170         -# service to listen on. (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/bind_host[0m[37m
172.16.1.170         -#public_bind_host=0.0.0.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The IP Address of the network interface to for the admin[0m[37m
172.16.1.170         -# service to listen on. (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/bind_host[0m[37m
172.16.1.170         -#admin_bind_host=0.0.0.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The port which the OpenStack Compute service listens on.[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#compute_port=8774[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The port number which the admin service listens on. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#admin_port=35357[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# The port number which the public service listens on.[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#public_port=5000[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The base public endpoint URL for keystone that are[0m[37m
172.16.1.170         -# advertised to clients (NOTE: this does NOT affect how[0m[37m
172.16.1.170         -# keystone listens for connections) (string value)[0m[37m
172.16.1.170         -#public_endpoint=http://localhost:%(public_port)s/[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The base admin endpoint URL for keystone that are advertised[0m[37m
172.16.1.170         -# to clients (NOTE: this does NOT affect how keystone listens[0m[37m
172.16.1.170         -# for connections) (string value)[0m[37m
172.16.1.170         -#admin_endpoint=http://localhost:%(admin_port)s/[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# onready allows you to send a notification when the process[0m[37m
172.16.1.170         -# is ready to serve For example, to have it notify using[0m[37m
172.16.1.170         -# systemd, one could set shell command: "onready = systemd-[0m[37m
172.16.1.170         -# notify --ready" or a module with notify() method: "onready =[0m[37m
172.16.1.170         -# keystone.common.systemd" (string value)[0m[37m
172.16.1.170         -#onready=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# enforced by optional sizelimit middleware[0m[37m
172.16.1.170         -# (keystone.middleware:RequestBodySizeLimiter) (integer value)[0m[37m
172.16.1.170         -#max_request_body_size=114688[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# limit the sizes of user & tenant ID/names (integer value)[0m[37m
172.16.1.170         -#max_param_size=64[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# similar to max_param_size, but provides an exception for[0m[37m
172.16.1.170         -# token values (integer value)[0m[37m
172.16.1.170         -#max_token_size=8192[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# During a SQL upgrade member_role_id will be used to create a[0m[37m
172.16.1.170         -# new role that will replace records in the[0m[37m
172.16.1.170         -# user_tenant_membership table with explicit role grants.[0m[37m
172.16.1.170         -# After migration, the member_role_id will be used in the API[0m[37m
172.16.1.170         -# add_user_to_project. (string value)[0m[37m
172.16.1.170         -#member_role_id=9fe2ff9ee4384b1894a90878d3e92bab[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# During a SQL upgrade member_role_id will be used to create a[0m[37m
172.16.1.170         -# new role that will replace records in the[0m[37m
172.16.1.170         -# user_tenant_membership table with explicit role grants.[0m[37m
172.16.1.170         -# After migration, member_role_name will be ignored. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#member_role_name=_member_[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The value passed as the keyword "rounds" to passlib encrypt[0m[37m
172.16.1.170         -# method. (integer value)[0m[37m
172.16.1.170         -#crypt_strength=40000[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set this to True if you want to enable TCP_KEEPALIVE on[0m[37m
172.16.1.170         -# server sockets i.e. sockets used by the keystone wsgi server[0m[37m
172.16.1.170         -# for client connections (boolean value)[0m[37m
172.16.1.170         -#tcp_keepalive=false[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Sets the value of TCP_KEEPIDLE in seconds for each server[0m[37m
172.16.1.170         -# socket. Only applies if tcp_keepalive is True. Not supported[0m[37m
172.16.1.170         -# on OS X. (integer value)[0m[37m
172.16.1.170         -#tcp_keepidle=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The maximum number of entities that will be returned in a[0m[37m
172.16.1.170         -# collection can be set with list_limit, with no limit set by[0m[37m
172.16.1.170         -# default. This global limit may be then overridden for a[0m[37m
172.16.1.170         -# specific driver, by specifying a list_limit in the[0m[37m
172.16.1.170         -# appropriate section (e.g. [assignment] (integer value)[0m[37m
172.16.1.170         -#list_limit=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in oslo.messaging[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use durable queues in amqp. (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/rabbit_durable_queues[0m[37m
172.16.1.170         -#amqp_durable_queues=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Auto-delete queues in amqp. (boolean value)[0m[37m
172.16.1.170         -#amqp_auto_delete=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Size of RPC connection pool (integer value)[0m[37m
172.16.1.170         -#rpc_conn_pool_size=30[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Modules of exceptions that are permitted to be recreatedupon[0m[37m
172.16.1.170         -# receiving exception data from an rpc call. (list value)[0m[37m
172.16.1.170         -#allowed_rpc_exception_modules=oslo.messaging.exceptions,nova.exception,cinder.exception,exceptions[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Qpid broker hostname (string value)[0m[37m
172.16.1.170         -#qpid_hostname=localhost[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Qpid broker port (integer value)[0m[37m
172.16.1.170         -#qpid_port=5672[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Qpid HA cluster host:port pairs (list value)[0m[37m
172.16.1.170         -#qpid_hosts=$qpid_hostname:$qpid_port[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Username for Qpid connection (string value)[0m[37m
172.16.1.170         -#qpid_username=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Password for Qpid connection (string value)[0m[37m
172.16.1.170         -#qpid_password=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Space separated list of SASL mechanisms to use for auth[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#qpid_sasl_mechanisms=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Seconds between connection keepalive heartbeats (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#qpid_heartbeat=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Transport to use, either 'tcp' or 'ssl' (string value)[0m[37m
172.16.1.170         -#qpid_protocol=tcp[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Disable Nagle algorithm (boolean value)[0m[37m
172.16.1.170         -#qpid_tcp_nodelay=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The qpid topology version to use.  Version 1 is what was[0m[37m
172.16.1.170         -# originally used by impl_qpid.  Version 2 includes some[0m[37m
172.16.1.170         -# backwards-incompatible changes that allow broker federation[0m[37m
172.16.1.170         -# to work.  Users should update to version 2 when they are[0m[37m
172.16.1.170         -# able to take everything down, as it requires a clean break.[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#qpid_topology_version=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL version to use (valid only if SSL enabled). valid values[0m[37m
172.16.1.170         -# are TLSv1, SSLv23 and SSLv3. SSLv2 may be available on some[0m[37m
172.16.1.170         -# distributions (string value)[0m[37m
172.16.1.170         -#kombu_ssl_version=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL key file (valid only if SSL enabled) (string value)[0m[37m
172.16.1.170         -#kombu_ssl_keyfile=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL cert file (valid only if SSL enabled) (string value)[0m[37m
172.16.1.170         -#kombu_ssl_certfile=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL certification authority file (valid only if SSL enabled)[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#kombu_ssl_ca_certs=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RabbitMQ broker address where a single node is used[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#rabbit_host=localhost[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RabbitMQ broker port where a single node is used[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#rabbit_port=5672[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# RabbitMQ HA cluster host:port pairs (list value)[0m[37m
172.16.1.170         -#rabbit_hosts=$rabbit_host:$rabbit_port[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Connect over SSL for RabbitMQ (boolean value)[0m[37m
172.16.1.170         -#rabbit_use_ssl=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RabbitMQ userid (string value)[0m[37m
172.16.1.170         -#rabbit_userid=guest[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RabbitMQ password (string value)[0m[37m
172.16.1.170         -#rabbit_password=guest[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RabbitMQ virtual host (string value)[0m[37m
172.16.1.170         -#rabbit_virtual_host=/[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# How frequently to retry connecting with RabbitMQ (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#rabbit_retry_interval=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# How long to backoff for between retries when connecting to[0m[37m
172.16.1.170         -# RabbitMQ (integer value)[0m[37m
172.16.1.170         -#rabbit_retry_backoff=2[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of RabbitMQ connection retries. Default is 0[0m[37m
172.16.1.170         -# (infinite retry count) (integer value)[0m[37m
172.16.1.170         -#rabbit_max_retries=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use HA queues in RabbitMQ (x-ha-policy: all). If you change[0m[37m
172.16.1.170         -# this option, you must wipe the RabbitMQ database. (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#rabbit_ha_queues=false[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If passed, use a fake RabbitMQ provider (boolean value)[0m[37m
172.16.1.170         -#fake_rabbit=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ZeroMQ bind address. Should be a wildcard (*), an ethernet[0m[37m
172.16.1.170         -# interface, or IP. The "host" option should point or resolve[0m[37m
172.16.1.170         -# to this address. (string value)[0m[37m
172.16.1.170         -#rpc_zmq_bind_address=*[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# MatchMaker driver (string value)[0m[37m
172.16.1.170         -#rpc_zmq_matchmaker=oslo.messaging._drivers.matchmaker.MatchMakerLocalhost[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ZeroMQ receiver listening port (integer value)[0m[37m
172.16.1.170         -#rpc_zmq_port=9501[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of ZeroMQ contexts, defaults to 1 (integer value)[0m[37m
172.16.1.170         -#rpc_zmq_contexts=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of ingress messages to locally buffer per[0m[37m
172.16.1.170         -# topic. Default is unlimited. (integer value)[0m[37m
172.16.1.170         -#rpc_zmq_topic_backlog=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory for holding IPC sockets (string value)[0m[37m
172.16.1.170         -#rpc_zmq_ipc_dir=/var/run/openstack[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of this node. Must be a valid hostname, FQDN, or IP[0m[37m
172.16.1.170         -# address. Must match "host" option, if running Nova. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#rpc_zmq_host=keystone[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Seconds to wait before a cast expires (TTL). Only supported[0m[37m
172.16.1.170         -# by impl_zmq. (integer value)[0m[37m
172.16.1.170         -#rpc_cast_timeout=30[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Heartbeat frequency (integer value)[0m[37m
172.16.1.170         -#matchmaker_heartbeat_freq=300[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Heartbeat time-to-live. (integer value)[0m[37m
172.16.1.170         -#matchmaker_heartbeat_ttl=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Host to locate redis (string value)[0m[37m
172.16.1.170         -#host=127.0.0.1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use this port to connect to redis host. (integer value)[0m[37m
172.16.1.170         -#port=6379[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Password for Redis server. (optional) (string value)[0m[37m
172.16.1.170         -#password=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Size of RPC greenthread pool (integer value)[0m[37m
172.16.1.170         -#rpc_thread_pool_size=64[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Driver or drivers to handle sending notifications (multi[0m[37m
172.16.1.170         -# valued)[0m[37m
172.16.1.170         -#notification_driver=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# AMQP topic used for OpenStack notifications (list value)[0m[37m
172.16.1.170         -# Deprecated group/name - [rpc_notifier2]/topics[0m[37m
172.16.1.170         -#notification_topics=notifications[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Seconds to wait for a response from a call (integer value)[0m[37m
172.16.1.170         -#rpc_response_timeout=60[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# A URL representing the messaging driver to use and its full[0m[37m
172.16.1.170         -# configuration. If not set, we fall back to the rpc_backend[0m[37m
172.16.1.170         -# option and driver specific configuration. (string value)[0m[37m
172.16.1.170         -#transport_url=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The messaging driver to use, defaults to rabbit. Other[0m[37m
172.16.1.170         -# drivers include qpid and zmq. (string value)[0m[37m
172.16.1.170         -#rpc_backend=rabbit[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The default exchange under which topics are scoped. May be[0m[37m
172.16.1.170         -# overridden by an exchange name specified in the[0m[37m
172.16.1.170         -# transport_url option. (string value)[0m[37m
172.16.1.170         -#control_exchange=openstack[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone.notifications[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default publisher_id for outgoing notifications (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#default_publisher_id=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone.middleware.ec2_token[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# URL to get token from ec2 request. (string value)[0m[37m
172.16.1.170         -#keystone_ec2_url=http://localhost:5000/v2.0/ec2tokens[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone.openstack.common.db.sqlalchemy.session[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The file name to use with SQLite (string value)[0m[37m
172.16.1.170         -#sqlite_db=keystone.sqlite[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If True, SQLite uses synchronous mode (boolean value)[0m[37m
172.16.1.170         -#sqlite_synchronous=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone.openstack.common.eventlet_backdoor[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable eventlet backdoor.  Acceptable values are 0, <port>,[0m[37m
172.16.1.170         -# and <start>:<end>, where 0 results in listening on a random[0m[37m
172.16.1.170         -# tcp port number; <port> results in listening on the[0m[37m
172.16.1.170         -# specified port number (and not enabling backdoor if that[0m[37m
172.16.1.170         -# port is in use); and <start>:<end> results in listening on[0m[37m
172.16.1.170         -# the smallest unused port number within the specified range[0m[37m
172.16.1.170         -# of port numbers.  The chosen port is displayed in the[0m[37m
172.16.1.170         -# service's log file. (string value)[0m[37m
172.16.1.170         -#backdoor_port=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone.openstack.common.lockutils[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to disable inter-process locks (boolean value)[0m[37m
172.16.1.170         -#disable_process_locking=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory to use for lock files. (string value)[0m[37m
172.16.1.170         -#lock_path=<None>[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone.openstack.common.log[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Print debugging output (set logging level to DEBUG instead[0m[37m
172.16.1.170         -# of default WARNING level). (boolean value)[0m[37m
172.16.1.170         -#debug=false[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Print more verbose output (set logging level to INFO instead[0m[37m
172.16.1.170         -# of default WARNING level). (boolean value)[0m[37m
172.16.1.170         -#verbose=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Log output to standard error (boolean value)[0m[37m
172.16.1.170         -#use_stderr=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# format string to use for log messages with context (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#logging_context_format_string=%(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [%(request_id)s %(user_identity)s] %(instance)s%(message)s[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# format string to use for log messages without context[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#logging_default_format_string=%(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [-] %(instance)s%(message)s[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# data to append to log format when level is DEBUG (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#logging_debug_format_suffix=%(funcName)s %(pathname)s:%(lineno)d[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# prefix each line of exception output with this format[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#logging_exception_prefix=%(asctime)s.%(msecs)03d %(process)d TRACE %(name)s %(instance)s[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# list of logger=LEVEL pairs (list value)[0m[37m
172.16.1.170         -#default_log_levels=amqp=WARN,amqplib=WARN,boto=WARN,qpid=WARN,sqlalchemy=WARN,suds=INFO,iso8601=WARN[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# publish error events (boolean value)[0m[37m
172.16.1.170         -#publish_errors=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# make deprecations fatal (boolean value)[0m[37m
172.16.1.170         -#fatal_deprecations=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If an instance is passed with the log message, format it[0m[37m
172.16.1.170         -# like this (string value)[0m[37m
172.16.1.170         -#instance_format="[instance: %(uuid)s] "[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If an instance UUID is passed with the log message, format[0m[37m
172.16.1.170         -# it like this (string value)[0m[37m
172.16.1.170         -#instance_uuid_format="[instance: %(uuid)s] "[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The name of logging configuration file. It does not disable[0m[37m
172.16.1.170         -# existing loggers, but just appends specified logging[0m[37m
172.16.1.170         -# configuration to any other existing logging options. Please[0m[37m
172.16.1.170         -# see the Python logging module documentation for details on[0m[37m
172.16.1.170         -# logging configuration files. (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/log_config[0m[37m
172.16.1.170         -#log_config_append=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# DEPRECATED. A logging.Formatter log message format string[0m[37m
172.16.1.170         -# which may use any of the available logging.LogRecord[0m[37m
172.16.1.170         -# attributes. This option is deprecated.  Please use[0m[37m
172.16.1.170         -# logging_context_format_string and[0m[37m
172.16.1.170         -# logging_default_format_string instead. (string value)[0m[37m
172.16.1.170         -#log_format=<None>[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Format string for %%(asctime)s in log records. Default:[0m[37m
172.16.1.170         -# %(default)s (string value)[0m[37m
172.16.1.170         -#log_date_format=%Y-%m-%d %H:%M:%S[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (Optional) Name of log file to output to. If no default is[0m[37m
172.16.1.170         -# set, logging will go to stdout. (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/logfile[0m[37m
172.16.1.170         -#log_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (Optional) The base directory used for relative --log-file[0m[37m
172.16.1.170         -# paths (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/logdir[0m[37m
172.16.1.170         -#log_dir=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use syslog for logging. (boolean value)[0m[37m
172.16.1.170         -#use_syslog=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# syslog facility to receive log lines (string value)[0m[37m
172.16.1.170         -#syslog_log_facility=LOG_USER[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone.openstack.common.policy[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# JSON file containing policy (string value)[0m[37m
172.16.1.170         -#policy_file=policy.json[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Rule enforced when requested rule is not found (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#policy_default_rule=default[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[assignment][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone Assignment backend driver (string value)[0m[37m
172.16.1.170         -#driver=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Toggle for assignment caching. This has no effect unless[0m[37m
172.16.1.170         -# global caching is enabled. (boolean value)[0m[37m
172.16.1.170         -#caching=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# TTL (in seconds) to cache assignment data. This has no[0m[37m
172.16.1.170         -# effect unless global caching is enabled. (integer value)[0m[37m
172.16.1.170         -#cache_time=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of entities that will be returned in an[0m[37m
172.16.1.170         -# assignment collection (integer value)[0m[37m
172.16.1.170         -#list_limit=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[auth][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default auth methods. (list value)[0m[37m
172.16.1.170         -#methods=external,password,token[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The password auth plugin module (string value)[0m[37m
172.16.1.170         -#password=keystone.auth.plugins.password.Password[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# The token auth plugin module (string value)[0m[37m
172.16.1.170         -#token=keystone.auth.plugins.token.Token[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The external (REMOTE_USER) auth plugin module. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#external=keystone.auth.plugins.external.DefaultDomain[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[cache][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Prefix for building the configuration dictionary for the[0m[37m
172.16.1.170         -# cache region. This should not need to be changed unless[0m[37m
172.16.1.170         -# there is another dogpile.cache region with the same[0m[37m
172.16.1.170         -# configuration name (string value)[0m[37m
172.16.1.170         -#config_prefix=cache.keystone[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default TTL, in seconds, for any cached item in the[0m[37m
172.16.1.170         -# dogpile.cache region. This applies to any cached method that[0m[37m
172.16.1.170         -# doesn't have an explicit cache expiration time defined for[0m[37m
172.16.1.170         -# it. (integer value)[0m[37m
172.16.1.170         -#expiration_time=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Dogpile.cache backend module. It is recommended that[0m[37m
172.16.1.170         -# Memcache (dogpile.cache.memcache) or Redis[0m[37m
172.16.1.170         -# (dogpile.cache.redis) be used in production deployments.[0m[37m
172.16.1.170         -# Small workloads (single process) like devstack can use the[0m[37m
172.16.1.170         -# dogpile.cache.memory backend. (string value)[0m[37m
172.16.1.170         -#backend=keystone.common.cache.noop[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use a key-mangling function (sha1) to ensure fixed length[0m[37m
172.16.1.170         -# cache-keys. This is toggle-able for debugging purposes, it[0m[37m
172.16.1.170         -# is highly recommended to always leave this set to True.[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#use_key_mangler=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Arguments supplied to the backend module. Specify this[0m[37m
172.16.1.170         -# option once per argument to be passed to the dogpile.cache[0m[37m
172.16.1.170         -# backend. Example format: <argname>:<value> (multi valued)[0m[37m
172.16.1.170         -#backend_argument=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Proxy Classes to import that will affect the way the[0m[37m
172.16.1.170         -# dogpile.cache backend functions. See the dogpile.cache[0m[37m
172.16.1.170         -# documentation on changing-backend-behavior. Comma delimited[0m[37m
172.16.1.170         -# list e.g. my.dogpile.proxy.Class, my.dogpile.proxyClass2[0m[37m
172.16.1.170         -# (list value)[0m[37m
172.16.1.170         -#proxies=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Global toggle for all caching using the should_cache_fn[0m[37m
172.16.1.170         -# mechanism (boolean value)[0m[37m
172.16.1.170         -#enabled=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Extra debugging from the cache backend (cache keys,[0m[37m
172.16.1.170         -# get/set/delete/etc calls) This is only really useful if you[0m[37m
172.16.1.170         -# need to see the specific cache-backend get/set/delete calls[0m[37m
172.16.1.170         -# with the keys/values.  Typically this should be left set to[0m[37m
172.16.1.170         -# False. (boolean value)[0m[37m
172.16.1.170         -#debug_cache_backend=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[catalog][0m[37m
172.16.1.170         -template_file = /etc/keystone/default_catalog.templates[0m[37m
172.16.1.170         -driver = keystone.catalog.backends.sql.Catalog[0m[37m
172.16.1.170 
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Catalog template file name for use with the template catalog[0m[37m
172.16.1.170         -# backend. (string value)[0m[37m
172.16.1.170         -#template_file=default_catalog.templates[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone catalog backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.catalog.backends.sql.Catalog[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of entities that will be returned in a[0m[37m
172.16.1.170         -# catalog collection (integer value)[0m[37m
172.16.1.170         -#list_limit=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[credential][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone Credential backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.credential.backends.sql.Credential[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[database][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone.openstack.common.db.api[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The backend to use for db (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/db_backend[0m[37m
172.16.1.170         -#backend=sqlalchemy[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone.openstack.common.db.sqlalchemy.session[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The SQLAlchemy connection string used to connect to the[0m[37m
172.16.1.170         -# database (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_connection[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sql_connection[0m[37m
172.16.1.170         -# Deprecated group/name - [sql]/connection[0m[37m
172.16.1.170         -#connection=sqlite:////keystone/openstack/common/db/$sqlite_db[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The SQLAlchemy connection string used to connect to the[0m[37m
172.16.1.170         -# slave database (string value)[0m[37m
172.16.1.170         -#slave_connection=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Timeout before idle sql connections are reaped (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_idle_timeout[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sql_idle_timeout[0m[37m
172.16.1.170         -# Deprecated group/name - [sql]/idle_timeout[0m[37m
172.16.1.170         -#idle_timeout=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Minimum number of SQL connections to keep open in a pool[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_min_pool_size[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sql_min_pool_size[0m
172.16.1.170 [37m
172.16.1.170         -#min_pool_size=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of SQL connections to keep open in a pool[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_max_pool_size[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sql_max_pool_size[0m[37m
172.16.1.170         -#max_pool_size=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum db connection retries during startup. (setting -1[0m[37m
172.16.1.170         -# implies an infinite retry count) (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_max_retries[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sql_max_retries[0m[37m
172.16.1.170         -#max_retries=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval between retries of opening a sql connection[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_retry_interval[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/reconnect_interval[0m[37m
172.16.1.170         -#retry_interval=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set, use this value for max_overflow with sqlalchemy[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_max_overflow[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sqlalchemy_max_overflow[0m[37m
172.16.1.170         -#max_overflow=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Verbosity of SQL debugging information. 0=None,[0m[37m
172.16.1.170         -# 100=Everything (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_connection_debug[0m[37m
172.16.1.170         -#connection_debug=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Add python stack traces to SQL as comment strings (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_connection_trace[0m[37m
172.16.1.170         -#connection_trace=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set, use this value for pool_timeout with sqlalchemy[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sqlalchemy_pool_timeout[0m[37m
172.16.1.170         -#pool_timeout=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[ec2][0m[37m
172.16.1.170         -driver = keystone.contrib.ec2.backends.sql.Ec2[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone EC2Credential backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.contrib.ec2.backends.kvs.Ec2[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[endpoint_filter][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone Endpoint Filter backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.contrib.endpoint_filter.backends.sql.EndpointFilter[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Toggle to return all active endpoints if no filter exists.[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#return_all_endpoints_if_no_filter=true[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +[DEFAULT][0m[37m
172.16.1.170         +public_port = 5000[0m[37m
172.16.1.170         +admin_port = 35357[0m[37m
172.16.1.170         +admin_token = openstack_identity_bootstrap_token[0m[37m
172.16.1.170         +bind_host = 0.0.0.0[0m
172.16.1.170 [37m
172.16.1.170         +compute_port = 8774[0m[37m
172.16.1.170         +verbose = False[0m[37m
172.16.1.170         +debug = False[0m[37m
172.16.1.170         +log_file = /var/log/keystone/keystone.log[0m[37m
172.16.1.170         +public_endpoint = http://172.16.1.170:5000/[0m[37m
172.16.1.170         +admin_endpoint = http://172.16.1.170:35357/[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[federation][0m[37m
172.16.1.170         +[memcache][0m[37m
172.16.1.170         +servers = [0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +[sql][0m[37m
172.16.1.170         +connection = mysql://keyston1:keystone@172.16.1.170:3306/keystone?charset=utf8[0m[37m
172.16.1.170         +idle_timeout = 200[0m[37m
172.16.1.170         +min_pool_size = 5[0m[37m
172.16.1.170         +max_pool_size = 10[0m[37m
172.16.1.170         +pool_timeout = 200[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Keystone Federation backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.contrib.federation.backends.sql.Federation[0m[37m
172.16.1.170         +[ldap][0m[37m
172.16.1.170         +url = ldap://localhost[0m[37m
172.16.1.170         +user = dc=Manager,dc=example,dc=com[0m[37m
172.16.1.170         +# password = None[0m[37m
172.16.1.170         +suffix = cn=example,cn=com[0m[37m
172.16.1.170         +use_dumb_member = false[0m[37m
172.16.1.170         +allow_subtree_delete = false[0m[37m
172.16.1.170         +dumb_member = cn=dumb,dc=example,dc=com[0m[37m
172.16.1.170         +page_size = 0[0m[37m
172.16.1.170         +alias_dereferencing = default[0m[37m
172.16.1.170         +query_scope = one[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# user_tree_dn =[0m[37m
172.16.1.170         +# user_filter =[0m[37m
172.16.1.170         +user_objectclass = inetOrgPerson[0m[37m
172.16.1.170         +user_id_attribute = cn[0m[37m
172.16.1.170         +user_name_attribute = sn[0m[37m
172.16.1.170         +user_mail_attribute = email[0m[37m
172.16.1.170         +user_pass_attribute = userPassword[0m[37m
172.16.1.170         +user_enabled_attribute = enabled[0m[37m
172.16.1.170         +user_domain_id_attribute = businessCategory[0m[37m
172.16.1.170         +user_enabled_mask = 0[0m[37m
172.16.1.170         +user_enabled_default = true[0m[37m
172.16.1.170         +user_attribute_ignore = tenant_id,tenants[0m[37m
172.16.1.170         +user_allow_create = true[0m[37m
172.16.1.170         +user_allow_update = true[0m[37m
172.16.1.170         +user_allow_delete = true[0m[37m
172.16.1.170         +user_enabled_emulation = false[0m[37m
172.16.1.170         +# user_enabled_emulation_dn =[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# tenant_tree_dn =[0m[37m
172.16.1.170         +# tenant_filter =[0m[37m
172.16.1.170         +tenant_objectclass = groupOfNames[0m[37m
172.16.1.170         +tenant_id_attribute = cn[0m[37m
172.16.1.170         +tenant_member_attribute = member[0m[37m
172.16.1.170         +tenant_name_attribute = ou[0m[37m
172.16.1.170         +tenant_desc_attribute = description[0m[37m
172.16.1.170         +tenant_enabled_attribute = enabled[0m[37m
172.16.1.170         +tenant_domain_id_attribute = businessCategory[0m
172.16.1.170 [37m
172.16.1.170         +# tenant_attribute_ignore =[0m[37m
172.16.1.170         +tenant_allow_create = true[0m[37m
172.16.1.170         +tenant_allow_update = true[0m[37m
172.16.1.170         +tenant_allow_delete = true[0m[37m
172.16.1.170         +tenant_enabled_emulation = false[0m[37m
172.16.1.170         +# tenant_enabled_emulation_dn =[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# role_tree_dn =[0m[37m
172.16.1.170         +# role_filter =[0m[37m
172.16.1.170         +role_objectclass = organizationalRole[0m[37m
172.16.1.170         +role_id_attribute = cn[0m[37m
172.16.1.170         +role_name_attribute = ou[0m[37m
172.16.1.170         +role_member_attribute = roleOccupant[0m[37m
172.16.1.170         +# role_attribute_ignore =[0m[37m
172.16.1.170         +role_allow_create = true[0m[37m
172.16.1.170         +role_allow_update = true[0m[37m
172.16.1.170         +role_allow_delete = true[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# group_tree_dn =[0m[37m
172.16.1.170         +# group_filter =[0m[37m
172.16.1.170         +group_objectclass = groupOfNames[0m[37m
172.16.1.170         +group_id_attribute = cn[0m[37m
172.16.1.170         +group_name_attribute = ou[0m[37m
172.16.1.170         +group_member_attribute = member[0m[37m
172.16.1.170         +group_desc_attribute = description[0m[37m
172.16.1.170         +group_domain_id_attribute = businessCategory[0m[37m
172.16.1.170         +# group_attribute_ignore =[0m[37m
172.16.1.170         +group_allow_create = true[0m[37m
172.16.1.170         +group_allow_update = true[0m[37m
172.16.1.170         +group_allow_delete = true[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [identity][0m[37m
172.16.1.170          driver = keystone.identity.backends.sql.Identity[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# This references the domain to use for all Identity API v2[0m[37m
172.16.1.170         -# requests (which are not aware of domains). A domain with[0m[37m
172.16.1.170         -# this ID will be created for you by keystone-manage db_sync[0m[37m
172.16.1.170         -# in migration 008.  The domain referenced by this ID cannot[0m[37m
172.16.1.170         -# be deleted on the v3 API, to prevent accidentally breaking[0m[37m
172.16.1.170         -# the v2 API. There is nothing special about this domain,[0m[37m
172.16.1.170         -# other than the fact that it must exist to order to maintain[0m[37m
172.16.1.170         -# support for your v2 clients. (string value)[0m[37m
172.16.1.170         -#default_domain_id=default[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A subset (or all) of domains can have their own identity[0m[37m
172.16.1.170         -# driver, each with their own partial configuration file in a[0m[37m
172.16.1.170         -# domain configuration directory. Only values specific to the[0m[37m
172.16.1.170         -# domain need to be placed in the domain specific[0m[37m
172.16.1.170         -# configuration file. This feature is disabled by default; set[0m[37m
172.16.1.170         -# to True to enable. (boolean value)[0m[37m
172.16.1.170         -#domain_specific_drivers_enabled=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path for Keystone to locate the domain specificidentity[0m[37m
172.16.1.170         -# configuration files if domain_specific_drivers_enabled is[0m[37m
172.16.1.170         -# set to true. (string value)[0m[37m
172.16.1.170         -#domain_config_dir=/etc/keystone/domains[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone Identity backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.identity.backends.sql.Identity[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum supported length for user passwords; decrease to[0m[37m
172.16.1.170         -# improve performance. (integer value)[0m[37m
172.16.1.170         -#max_password_length=4096[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of entities that will be returned in an[0m
172.16.1.170 [37m
172.16.1.170         -# identity collection (integer value)[0m[37m
172.16.1.170         -#list_limit=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[kvs][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Extra dogpile.cache backend modules to register with the[0m[37m
172.16.1.170         -# dogpile.cache library (list value)[0m[37m
172.16.1.170         -#backends=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Prefix for building the configuration dictionary for the KVS[0m[37m
172.16.1.170         -# region. This should not need to be changed unless there is[0m[37m
172.16.1.170         -# another dogpile.cache region with the same configuration[0m[37m
172.16.1.170         -# name (string value)[0m[37m
172.16.1.170         -#config_prefix=keystone.kvs[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Toggle to disable using a key-mangling function to ensure[0m[37m
172.16.1.170         -# fixed length keys. This is toggle-able for debugging[0m[37m
172.16.1.170         -# purposes, it is highly recommended to always leave this set[0m[37m
172.16.1.170         -# to True. (boolean value)[0m[37m
172.16.1.170         -#enable_key_mangler=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default lock timeout for distributed locking. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#default_lock_timeout=5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[ldap][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# URL for connecting to the LDAP server (string value)[0m[37m
172.16.1.170         -#url=ldap://localhost[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# User BindDN to query the LDAP server (string value)[0m[37m
172.16.1.170         -#user=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Password for the BindDN to query the LDAP server (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#password=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# LDAP server suffix (string value)[0m[37m
172.16.1.170         -#suffix=cn=example,cn=com[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#use_dumb_member=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#dumb_member=cn=dumb,dc=nonexistent[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# allow deleting subtrees (boolean value)[0m[37m
172.16.1.170         -#allow_subtree_delete=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The LDAP scope for queries, this can be either "one"[0m[37m
172.16.1.170         -# (onelevel/singleLevel) or "sub" (subtree/wholeSubtree)[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#query_scope=one[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum results per page; a value of zero ("0") disables[0m[37m
172.16.1.170         -# paging (integer value)[0m[37m
172.16.1.170         -#page_size=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The LDAP dereferencing option for queries. This can be[0m[37m
172.16.1.170         -# either "never", "searching", "always", "finding" or[0m[37m
172.16.1.170         -# "default". The "default" option falls back to using default[0m[37m
172.16.1.170         -# dereferencing configured by your ldap.conf. (string value)[0m[37m
172.16.1.170         -#alias_dereferencing=default[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_tree_dn=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_filter=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_objectclass=inetOrgPerson[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_id_attribute=cn[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_name_attribute=sn[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_mail_attribute=email[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_pass_attribute=userPassword[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_enabled_attribute=enabled[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (integer value)[0m[37m
172.16.1.170         -#user_enabled_mask=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_enabled_default=True[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (list value)[0m[37m
172.16.1.170         -#user_attribute_ignore=default_project_id,tenants[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_default_project_id_attribute=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#user_allow_create=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#user_allow_update=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#user_allow_delete=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#user_enabled_emulation=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#user_enabled_emulation_dn=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (list value)[0m[37m
172.16.1.170         -#user_additional_attribute_mapping=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tenant_tree_dn=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tenant_filter=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tenant_objectclass=groupOfNames[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tenant_id_attribute=cn[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tenant_member_attribute=member[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tenant_name_attribute=ou[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tenant_desc_attribute=description[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tenant_enabled_attribute=enabled[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tenant_domain_id_attribute=businessCategory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (list value)[0m[37m
172.16.1.170         -#tenant_attribute_ignore=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#tenant_allow_create=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#tenant_allow_update=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#tenant_allow_delete=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#tenant_enabled_emulation=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tenant_enabled_emulation_dn=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (list value)[0m[37m
172.16.1.170         -#tenant_additional_attribute_mapping=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#role_tree_dn=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#role_filter=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#role_objectclass=organizationalRole[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#role_id_attribute=cn[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#role_name_attribute=ou[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#role_member_attribute=roleOccupant[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (list value)[0m[37m
172.16.1.170         -#role_attribute_ignore=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#role_allow_create=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#role_allow_update=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#role_allow_delete=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (list value)[0m[37m
172.16.1.170         -#role_additional_attribute_mapping=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#group_tree_dn=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#group_filter=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#group_objectclass=groupOfNames[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#group_id_attribute=cn[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#group_name_attribute=ou[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#group_member_attribute=member[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#group_desc_attribute=description[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (list value)[0m[37m
172.16.1.170         -#group_attribute_ignore=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#group_allow_create=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#group_allow_update=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#group_allow_delete=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (list value)[0m[37m
172.16.1.170         -#group_additional_attribute_mapping=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tls_cacertfile=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#tls_cacertdir=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#use_tls=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# valid options for tls_req_cert are demand, never, and allow[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#tls_req_cert=demand[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[matchmaker_ring][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in oslo.messaging[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Matchmaker ring file (JSON) (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/matchmaker_ringfile[0m[37m
172.16.1.170         -#ringfile=/etc/oslo/matchmaker_ring.json[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[memcache][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Memcache servers in the format of "host:port" (list value)[0m[37m
172.16.1.170         -#servers=localhost:11211[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of compare-and-set attempts to make when using[0m[37m
172.16.1.170         -# compare-and-set in the token memcache back end (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#max_compare_and_set_retry=16[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[oauth1][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone Credential backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.contrib.oauth1.backends.sql.OAuth1[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Duration (in seconds) for the OAuth Request Token (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#request_token_duration=28800[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Duration (in seconds) for the OAuth Access Token (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#access_token_duration=86400[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[os_inherit][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# role-assignment inheritance to projects from owning domain[0m[37m
172.16.1.170         -# can be optionally enabled (boolean value)[0m[37m
172.16.1.170         -#enabled=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[pam][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#userid=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (string value)[0m[37m
172.16.1.170         -#password=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[paste_deploy][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of the paste configuration file that defines the[0m[37m
172.16.1.170         -# available pipelines (string value)[0m[37m
172.16.1.170         -#config_file=keystone-paste.ini[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[policy][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone Policy backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.policy.backends.sql.Policy[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of entities that will be returned in a policy[0m[37m
172.16.1.170         -# collection (integer value)[0m[37m
172.16.1.170         -#list_limit=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[signing][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Deprecated in favor of provider in the [token] section[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#token_format=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path of the certfile for token signing. (string value)[0m[37m
172.16.1.170         -#certfile=/etc/keystone/ssl/certs/signing_cert.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path of the keyfile for token signing. (string value)[0m[37m
172.16.1.170         -#keyfile=/etc/keystone/ssl/private/signing_key.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path of the CA for token signing. (string value)[0m
172.16.1.170 [37m
172.16.1.170         -#ca_certs=/etc/keystone/ssl/certs/ca.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path of the CA Key for token signing (string value)[0m[37m
172.16.1.170         -#ca_key=/etc/keystone/ssl/private/cakey.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Key Size (in bits) for token signing cert (auto generated[0m[37m
172.16.1.170         -# certificate) (integer value)[0m[37m
172.16.1.170         -#key_size=2048[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Day the token signing cert is valid for (auto generated[0m[37m
172.16.1.170         -# certificate) (integer value)[0m[37m
172.16.1.170         -#valid_days=3650[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Certificate Subject (auto generated certificate) for token[0m[37m
172.16.1.170         -# signing. (string value)[0m[37m
172.16.1.170         -#cert_subject=/C=US/ST=Unset/L=Unset/O=Unset/CN=www.example.com[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[ssl][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Toggle for SSL support on the keystone eventlet servers.[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#enable=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path of the certfile for SSL. (string value)[0m[37m
172.16.1.170         -#certfile=/etc/keystone/ssl/certs/keystone.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path of the keyfile for SSL. (string value)[0m[37m
172.16.1.170         -#keyfile=/etc/keystone/ssl/private/keystonekey.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path of the ca cert file for SSL. (string value)[0m[37m
172.16.1.170         -#ca_certs=/etc/keystone/ssl/certs/ca.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path of the CA key file for SSL (string value)[0m[37m
172.16.1.170         -#ca_key=/etc/keystone/ssl/private/cakey.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#  (boolean value)[0m[37m
172.16.1.170         -#cert_required=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL Key Length (in bits) (auto generated certificate)[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#key_size=1024[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Days the certificate is valid for once signed (auto[0m[37m
172.16.1.170         -# generated certificate) (integer value)[0m[37m
172.16.1.170         -#valid_days=3650[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL Certificate Subject (auto generated certificate) (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#cert_subject=/C=US/ST=Unset/L=Unset/O=Unset/CN=localhost[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone.openstack.common.sslutils[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# CA certificate file to use to verify connecting clients[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#ca_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Certificate file to use when starting the server securely[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#cert_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Private key file to use when starting the server securely[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#key_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[stats][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m
172.16.1.170 [37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone stats backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.contrib.stats.backends.kvs.Stats[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         +[catalog][0m[37m
172.16.1.170         +driver = keystone.catalog.backends.sql.Catalog[0m[37m
172.16.1.170         +template_file = /etc/keystone/default_catalog.templates[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [token][0m[37m
172.16.1.170          driver = keystone.token.backends.sql.Token[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# External auth mechanisms that should add bind information to[0m[37m
172.16.1.170         -# token e.g. kerberos, x509 (list value)[0m[37m
172.16.1.170         -#bind=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enforcement policy on tokens presented to keystone with bind[0m[37m
172.16.1.170         -# information. One of disabled, permissive, strict, required[0m[37m
172.16.1.170         -# or a specifically required bind mode e.g. kerberos or x509[0m[37m
172.16.1.170         -# to require binding to that authentication. (string value)[0m[37m
172.16.1.170         -#enforce_token_bind=permissive[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         +provider = keystone.token.providers.uuid.Provider[0m[37m
172.16.1.170          # Amount of time a token should remain valid (in seconds)[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#expiration=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Controls the token construction, validation, and revocation[0m[37m
172.16.1.170         -# operations. Core providers are[0m[37m
172.16.1.170         -# keystone.token.providers.[pki|uuid].Provider (string value)[0m[37m
172.16.1.170         -#provider=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone Token persistence backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.token.backends.sql.Token[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Toggle for token system cacheing. This has no effect unless[0m[37m
172.16.1.170         -# global caching is enabled. (boolean value)[0m[37m
172.16.1.170         -#caching=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Time to cache the revocation list (in seconds). This has no[0m[37m
172.16.1.170         -# effect unless global and token caching are enabled. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#revocation_cache_time=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Time to cache tokens (in seconds). This has no effect unless[0m[37m
172.16.1.170         -# global and token caching are enabled. (integer value)[0m[37m
172.16.1.170         -#cache_time=<None>[0m[37m
172.16.1.170         +expiration = 86400[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +[policy][0m[37m
172.16.1.170         +driver = keystone.policy.backends.sql.Policy[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[trust][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystone[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# delegation and impersonation features can be optionally[0m[37m
172.16.1.170         -# disabled (boolean value)[0m[37m
172.16.1.170         -#enabled=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone Trust backend driver (string value)[0m[37m
172.16.1.170         -#driver=keystone.trust.backends.sql.Trust[0m[37m
172.16.1.170         +[ec2][0m[37m
172.16.1.170         +driver = keystone.contrib.ec2.backends.sql.Ec2[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +[ssl][0m[37m
172.16.1.170         +#enable = True[0m
172.16.1.170 [37m
172.16.1.170         +#certfile = /etc/keystone/ssl/certs/keystone.pem[0m[37m
172.16.1.170         +#keyfile = /etc/keystone/ssl/private/keystonekey.pem[0m[37m
172.16.1.170         +#ca_certs = /etc/keystone/ssl/certs/ca.pem[0m[37m
172.16.1.170         +#cert_required = True[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +[signing][0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +[auth][0m[37m
172.16.1.170         +methods = password,token[0m[37m
172.16.1.170         +password = keystone.auth.plugins.password.Password[0m[37m
172.16.1.170         +token = keystone.auth.plugins.token.Token[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[sql][0m[37m
172.16.1.170         -connection = mysql://keystone:keystone@localhost/keystone[0m[37m
172.16.1.170         +[paste_deploy][0m[37m
172.16.1.170         +# Name of the paste configuration file that defines the available pipelines[0m[37m
172.16.1.170         +config_file = keystone-paste.ini[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/keystone/keystone-paste.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/keystone/keystone-paste.ini] from 4f971d to ef07d8[0m[37m
172.16.1.170         --- /etc/keystone/keystone-paste.ini	2014-02-26 07:05:02.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1pvmza6	2014-08-08 01:48:26.247999965 +0800[0m[37m
172.16.1.170         @@ -1,11 +1,13 @@[0m[37m
172.16.1.170         -# Keystone PasteDeploy configuration file.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# keystone PasteDeploy configuration file.[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [filter:debug][0m[37m
172.16.1.170          paste.filter_factory = keystone.common.wsgi:Debug.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[filter:build_auth_context][0m[37m
172.16.1.170         -paste.filter_factory = keystone.middleware:AuthContextMiddleware.factory[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170          [filter:token_auth][0m[37m
172.16.1.170          paste.filter_factory = keystone.middleware:TokenAuthMiddleware.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         @@ -27,10 +29,7 @@[0m[37m
172.16.1.170          [filter:ec2_extension][0m[37m
172.16.1.170          paste.filter_factory = keystone.contrib.ec2:Ec2Extension.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[filter:federation_extension][0m[37m
172.16.1.170         -paste.filter_factory = keystone.contrib.federation.routers:FederationExtension.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[filter:oauth1_extension][0m[37m
172.16.1.170         +[filter:oauth_extension][0m[37m
172.16.1.170          paste.filter_factory = keystone.contrib.oauth1.routers:OAuth1Extension.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [filter:s3_extension][0m[37m
172.16.1.170         @@ -39,9 +38,6 @@[0m[37m
172.16.1.170          [filter:endpoint_filter_extension][0m[37m
172.16.1.170          paste.filter_factory = keystone.contrib.endpoint_filter.routers:EndpointFilterExtension.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[filter:simple_cert_extension][0m[37m
172.16.1.170         -paste.filter_factory = keystone.contrib.simple_cert:SimpleCertExtension.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          [filter:url_normalize][0m[37m
172.16.1.170          paste.filter_factory = keystone.middleware:NormalizingFilter.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         @@ -67,13 +63,13 @@[0m[37m
172.16.1.170          paste.app_factory = keystone.service:admin_app_factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [pipeline:public_api][0m[37m
172.16.1.170         -pipeline = sizelimit url_normalize build_auth_context token_auth admin_token_auth xml_body json_body ec2_extension user_crud_extension public_service[0m[37m
172.16.1.170         +pipeline = access_log sizelimit url_normalize token_auth admin_token_auth xml_body json_body ec2_extension user_crud_extension public_service[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [pipeline:admin_api][0m[37m
172.16.1.170         -pipeline = sizelimit url_normalize build_auth_context token_auth admin_token_auth xml_body json_body ec2_extension s3_extension crud_extension admin_service[0m[37m
172.16.1.170         +pipeline = access_log sizelimit url_normalize token_auth admin_token_auth xml_body json_body ec2_extension s3_extension crud_extension admin_service[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [pipeline:api_v3][0m[37m
172.16.1.170         -pipeline = sizelimit url_normalize build_auth_context token_auth admin_token_auth xml_body json_body ec2_extension s3_extension simple_cert_extension service_v3[0m[37m
172.16.1.170         +pipeline = access_log sizelimit url_normalize token_auth admin_token_auth xml_body json_body ec2_extension s3_extension service_v3[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [app:public_version_service][0m[37m
172.16.1.170          paste.app_factory = keystone.service:public_version_app_factory[0m[37m
172.16.1.170         @@ -82,10 +78,10 @@[0m[37m
172.16.1.170          paste.app_factory = keystone.service:admin_version_app_factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [pipeline:public_version_api][0m[37m
172.16.1.170         -pipeline = sizelimit url_normalize xml_body public_version_service[0m[37m
172.16.1.170         +pipeline = access_log sizelimit url_normalize xml_body public_version_service[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [pipeline:admin_version_api][0m[37m
172.16.1.170         -pipeline = sizelimit url_normalize xml_body admin_version_service[0m[37m
172.16.1.170         +pipeline = access_log sizelimit url_normalize xml_body admin_version_service[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          [composite:main][0m[37m
172.16.1.170          use = egg:Paste#urlmap[0m
172.16.1.170 [0m
172.16.1.170   * service[keystone] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[keystone][0m
172.16.1.170 [0m
172.16.1.170   * execute[Keystone: sleep] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute sleep 10s[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/keystone/default_catalog.templates] action create[0m (skipped due to only_if)[0m
172.16.1.170   * execute[keystone-manage db_sync] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute keystone-manage db_sync[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-identity::registration[0m
172.16.1.170   * openstack-identity_register[Register 'admin' Tenant] action create_tenant[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register 'admin' Role] action create_role[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register 'KeystoneAdmin' Role] action create_role[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register 'KeystoneServiceAdmin' Role] action create_role[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register 'admin' User] action create_user[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Grant 'admin' Role to 'admin' User in 'admin' Tenant] action grant_role[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Grant 'KeystoneAdmin' Role to 'admin' User in 'admin' Tenant] action grant_role[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Grant 'KeystoneServiceAdmin' Role to 'admin' User in 'admin' Tenant] action grant_role[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register Identity Service] action create_service[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register Identity Endpoint] action create_endpoint[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Create EC2 credentials for 'admin' user] action create_ec2_credentials[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-image::api[0m
172.16.1.170   * package[python-keystone] action install[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[curl] action install[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[openstack-glance] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package openstack-glance from uninstalled to 2014.1-201402251723.ibm.el6.51[0m
172.16.1.170 [0m
172.16.1.170   * package[cronie] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package cronie from 1.4.4-7.el6 to 1.4.4-12.el6[0m
172.16.1.170 [0m
172.16.1.170   * package[python-glanceclient] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package python-glanceclient from uninstalled to 0.12.0-1.ibm.el6[0m
172.16.1.170 [0m
172.16.1.170   * package[python-anyjson] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[glance-api] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[glance-api][0m
172.16.1.170 [0m
172.16.1.170   * directory[/etc/glance] action create[0m[32m
172.16.1.170     - change mode from '02755' to '0700'[0m[32m
172.16.1.170     - change owner from 'root' to 'glance'[0m[32m
172.16.1.170     - change group from 'root' to 'glance'[0m
172.16.1.170 [0m
172.16.1.170   * directory[/var/cache/glance] action create[0m
172.16.1.170 [32m
172.16.1.170     - create new directory /var/cache/glance[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '' to '0700'[0m[32m
172.16.1.170     - change owner from '' to 'glance'[0m[32m
172.16.1.170     - change group from '' to 'glance'[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/glance/policy.json] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/glance/policy.json] from a15d7e to 8b1621[0m[37m
172.16.1.170         --- /etc/glance/policy.json	2014-02-26 07:05:20.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1kl65un	2014-08-08 01:50:22.308999967 +0800[0m[37m
172.16.1.170         @@ -1,32 +1,4 @@[0m[37m
172.16.1.170          {[0m[37m
172.16.1.170         -    "context_is_admin":  "role:admin",[0m[37m
172.16.1.170         -    "default": "",[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -    "add_image": "",[0m[37m
172.16.1.170         -    "delete_image": "",[0m
172.16.1.170 [37m
172.16.1.170         -    "get_image": "",[0m[37m
172.16.1.170         -    "get_images": "",[0m[37m
172.16.1.170         -    "modify_image": "",[0m
172.16.1.170 [37m
172.16.1.170         -    "publicize_image": "",[0m
172.16.1.170 [37m
172.16.1.170         -    "copy_from": "",[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -    "download_image": "",[0m[37m
172.16.1.170         -    "upload_image": "",[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -    "delete_image_location": "",[0m[37m
172.16.1.170         -    "get_image_location": "",[0m[37m
172.16.1.170         -    "set_image_location": "",[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -    "add_member": "",[0m[37m
172.16.1.170         -    "delete_member": "",[0m[37m
172.16.1.170         -    "get_member": "",[0m[37m
172.16.1.170         -    "get_members": "",[0m[37m
172.16.1.170         -    "modify_member": "",[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -    "manage_image_cache": "role:admin",[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -    "get_task": "",[0m[37m
172.16.1.170         -    "get_tasks": "",[0m[37m
172.16.1.170         -    "add_task": "",[0m[37m
172.16.1.170         -    "modify_task": ""[0m[37m
172.16.1.170         +    "default": [],[0m[37m
172.16.1.170         +    "manage_image_cache": [["role:admin"]][0m[37m
172.16.1.170          }[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * service[glance-api] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[glance-api][0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/glance/glance-api.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/glance/glance-api.conf] from 72f962 to 2221a9[0m[37m
172.16.1.170         --- /etc/glance/glance-api.conf	2014-02-26 07:23:38.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-x115qc	2014-08-08 01:50:22.607999964 +0800[0m[37m
172.16.1.170         @@ -1,187 +1,78 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          [DEFAULT][0m[37m
172.16.1.170          # Show more verbose log output (sets INFO log level output)[0m[37m
172.16.1.170         -#verbose = False[0m[37m
172.16.1.170         +verbose = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Show debugging output in logs (sets DEBUG log level output)[0m[37m
172.16.1.170         -#debug = False[0m[37m
172.16.1.170         +debug = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# (Optional) In addition to the system's default language log,[0m[37m
172.16.1.170         -# creates an additional log in the given language if such language is present[0m[37m
172.16.1.170         -# in the operating system. This option is only enabled if the 'log-file' option[0m[37m
172.16.1.170         -# is used, and the additional log will be created in the same directory as the[0m[37m
172.16.1.170         -# main log, inside a directory named after the locale.[0m[37m
172.16.1.170         -# This option is not available in community OpenStack Havana but it is in[0m[37m
172.16.1.170         -# IBM OpenStack Enterprise Edition.[0m[37m
172.16.1.170         -#log_additional_locale=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Which backend scheme should Glance use by default is not specified[0m[37m
172.16.1.170         -# in a request to add a new image to Glance? Known schemes are determined[0m[37m
172.16.1.170         -# by the known_stores option below.[0m[37m
172.16.1.170         -# Default: 'file'[0m[37m
172.16.1.170         +# Which backend store should Glance use by default is not specified[0m[37m
172.16.1.170         +# in a request to add a new image to Glance? Default: 'file'[0m[37m
172.16.1.170         +# Available choices are 'file', 'swift', 's3', 'cinder', 'gridfs',[0m[37m
172.16.1.170         +# 'http', 'sheepdog' and 'vsphere'[0m[37m
172.16.1.170          default_store = file[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# List of which store classes and store class locations are[0m[37m
172.16.1.170         -# currently known to glance at startup.[0m[37m
172.16.1.170         -#known_stores = glance.store.filesystem.Store,[0m[37m
172.16.1.170         -#               glance.store.http.Store,[0m[37m
172.16.1.170         -#               glance.store.rbd.Store,[0m[37m
172.16.1.170         -#               glance.store.s3.Store,[0m[37m
172.16.1.170         -#               glance.store.swift.Store,[0m[37m
172.16.1.170         -#               glance.store.sheepdog.Store,[0m[37m
172.16.1.170         -#               glance.store.cinder.Store,[0m[37m
172.16.1.170         -#               glance.store.vmware_datastore.Store,[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum image size (in bytes) that may be uploaded through the[0m[37m
172.16.1.170         -# Glance API server. Defaults to 1 TB.[0m[37m
172.16.1.170         -# WARNING: this value should only be increased after careful consideration[0m[37m
172.16.1.170         -# and must be set to a value under 8 EB (9223372036854775808).[0m[37m
172.16.1.170         -#image_size_cap = 1099511627776[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          # Address to bind the API server[0m[37m
172.16.1.170          bind_host = 0.0.0.0[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Port the bind the API server to[0m[37m
172.16.1.170          bind_port = 9292[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Log to this file. Make sure you do not set the same log file for both the API[0m[37m
172.16.1.170         -# and registry servers![0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# If `log_file` is omitted and `use_syslog` is false, then log messages are[0m[37m
172.16.1.170         -# sent to stdout as a fallback.[0m[37m
172.16.1.170         -log_file = /var/log/glance/api.log[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          # Backlog requests when creating socket[0m[37m
172.16.1.170          backlog = 4096[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# TCP_KEEPIDLE value in seconds when creating socket.[0m[37m
172.16.1.170         -# Not supported on OS X.[0m[37m
172.16.1.170         -#tcp_keepidle = 
172.16.1.170 600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# API to use for accessing data. Default value points to sqlalchemy[0m[37m
172.16.1.170         -# package, it is also possible to use: glance.db.registry.api[0m[37m
172.16.1.170         -# data_api = glance.db.sqlalchemy.api[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SQLAlchemy connection string for the reference implementation[0m[37m
172.16.1.170         -# registry server. Any valid SQLAlchemy connection string is fine.[0m[37m
172.16.1.170         -# See: http://www.sqlalchemy.org/docs/05/reference/sqlalchemy/connections.html#sqlalchemy.create_engine[0m[37m
172.16.1.170         -sql_connection = mysql://glance:glance@localhost/glance[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Period in seconds after which SQLAlchemy should reestablish its connection[0m[37m
172.16.1.170         -# to the database.[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# MySQL uses a default `wait_timeout` of 8 hours, after which it will drop[0m[37m
172.16.1.170         -# idle connections. This can result in 'MySQL Gone Away' exceptions. If you[0m[37m
172.16.1.170         -# notice this, you can lower this value to ensure that SQLAlchemy reconnects[0m[37m
172.16.1.170         -# before MySQL can drop the connection.[0m[37m
172.16.1.170         -sql_idle_timeout = 3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          # Number of Glance API worker processes to start.[0m[37m
172.16.1.170          # On machines with more than one CPU increasing this value[0m[37m
172.16.1.170          # may improve performance (especially if using SSL with[0m[37m
172.16.1.170          # compression turned on). It is typically recommended to set[0m
172.16.1.170 [37m
172.16.1.170          # this value to the number of CPUs present on your machine.[0m[37m
172.16.1.170         -workers = 1[0m[37m
172.16.1.170         +workers = 2[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170         -# Maximum line size of message headers to be accepted.[0m[37m
172.16.1.170         -# max_header_line may need to be increased when using large tokens[0m
172.16.1.170 [37m
172.16.1.170         -# (typically those generated by the Keystone v3 API with big service[0m
172.16.1.170 [37m
172.16.1.170         -# catalogs)[0m
172.16.1.170 [37m
172.16.1.170         -# max_header_line = 16384[0m[37m
172.16.1.170         +# SQLAlchemy connection string for the reference implementation[0m[37m
172.16.1.170         +# registry server. Any valid SQLAlchemy connection string is fine.[0m
172.16.1.170 [37m
172.16.1.170         +# See: http://www.sqlalchemy.org/docs/05/reference/sqlalchemy/connections.html#sqlalchemy.create_engine[0m
172.16.1.170 [37m
172.16.1.170         +sql_connection = mysql://glance1:glance@172.16.1.170:3306/glance?charset=utf8[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Role used to identify an authenticated user as administrator[0m
172.16.1.170 [37m
172.16.1.170          #admin_role = admin[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allow unauthenticated users to access the API with read-only[0m[37m
172.16.1.170         -# privileges. This only applies when using ContextMiddleware.[0m[37m
172.16.1.170         -#allow_anonymous_access = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allow access to version 1 of glance api[0m[37m
172.16.1.170         -#enable_v1_api = True[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allow access to version 2 of glance api[0m[37m
172.16.1.170         -#enable_v2_api = True[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170          # Return the URL that references where the data is stored on[0m[37m
172.16.1.170          # the backend storage system.  For example, if using the[0m[37m
172.16.1.170          # file system store a URL of 'file:///path/to/image' will[0m[37m
172.16.1.170          # be returned to the user in the 'direct_url' meta-data field.[0m[37m
172.16.1.170          # The default value is false.[0m[37m
172.16.1.170         -#show_image_direct_url = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Send headers containing user and tenant information when making requests to[0m[37m
172.16.1.170         -# the v1 glance registry. This allows the registry to function as if a user is[0m[37m
172.16.1.170         -# authenticated without the need to authenticate a user itself using the[0m[37m
172.16.1.170         -# auth_token middleware.[0m[37m
172.16.1.170         -# The default value is false.[0m[37m
172.16.1.170         -#send_identity_headers = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Supported values for the 'container_format' image attribute[0m[37m
172.16.1.170         -#container_formats=ami,ari,aki,bare,ovf[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Supported values for the 'disk_format' image attribute[0m[37m
172.16.1.170         -#disk_formats=ami,ari,aki,vhd,vmdk,raw,qcow2,vdi,iso[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory to use for lock files. Default to a temp directory[0m[37m
172.16.1.170         -# (string value). This setting needs to be the same for both[0m[37m
172.16.1.170         -# glance-scrubber and glance-api.[0m[37m
172.16.1.170         -#lock_path=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Property Protections config file[0m[37m
172.16.1.170         -# This file contains the rules for property protections and the roles/policies[0m[37m
172.16.1.170         -# associated with it.[0m[37m
172.16.1.170         -# If this config value is not specified, by default, property protections[0m[37m
172.16.1.170         -# won't be enforced.[0m[37m
172.16.1.170         -# If a value is specified and the file is not found, then the glance-api[0m[37m
172.16.1.170         -# service will not start.[0m[37m
172.16.1.170         -#property_protection_file =[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Specify whether 'roles' or 'policies' are used in the[0m[37m
172.16.1.170         -# property_protection_file.[0m[37m
172.16.1.170         -# The default value for property_protection_rule_format is 'roles'.[0m[37m
172.16.1.170         -#property_protection_rule_format = roles[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Specifies how long (in hours) a task is supposed to live in the tasks DB[0m[37m
172.16.1.170         -# after succeeding or failing before getting soft-deleted.[0m[37m
172.16.1.170         -# The default value for task_time_to_live is 48 hours.[0m[37m
172.16.1.170         -# task_time_to_live = 48[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# This value sets what strategy will be used to determine the image location[0m[37m
172.16.1.170         -# order. Currently two strategies are packaged with Glance 'location_order'[0m[37m
172.16.1.170         -# and 'store_type'.[0m[37m
172.16.1.170         -#location_strategy = location_order[0m[37m
172.16.1.170         +show_image_direct_url = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ================= Syslog Options ============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Send logs to syslog (/dev/log) instead of to file specified[0m[37m
172.16.1.170         -# by `log_file`[0m[37m
172.16.1.170         -#use_syslog = False[0m[37m
172.16.1.170         +# Log to this file. Make sure you do not set the same log[0m[37m
172.16.1.170         +# file for both the API and registry servers![0m[37m
172.16.1.170         +log_file = /var/log/glance/api.log[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Facility to use. If unset defaults to LOG_USER.[0m[37m
172.16.1.170         -#syslog_log_facility = LOG_LOCAL0[0m[37m
172.16.1.170       
172.16.1.170    [0m[37m
172.16.1.170          # ================= SSL Options ===============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Certificate file to use when starting API server securely[0m[37m
172.16.1.170         -#cert_file = /path/to/certfile[0m[37m
172.16.1.170         +# cert_file = /path/to/certfile[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Private key file to use when starting API server securely[0m[37m
172.16.1.170         -#key_file = /path/to/keyfile[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# CA certificate file to use to verify connecting clients[0m[37m
172.16.1.170         -#ca_file = /path/to/cafile[0m[37m
172.16.1.170         +# key_file = /path/to/keyfile[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ================= Security Options ==========================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # AES key for encrypting store 'location' metadata, including[0m[37m
172.16.1.170          # -- if used -- Swift or S3 credentials[0m[37m
172.16.1.170          # Should be set to a random string of length 16, 24 or 32 bytes[0m[37m
172.16.1.170         -#metadata_encryption_key = <16, 24 or 32 char registry metadata key>[0m[37m
172.16.1.170         +# metadata_encryption_key = <16, 24 or 32 char registry metadata key>[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ============ Registry Options ===============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Address to find the registry server[0m[37m
172.16.1.170         -registry_host = 0.0.0.0[0m[37m
172.16.1.170         +registry_host = 172.16.1.170[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Port the registry server is listening on[0m[37m
172.16.1.170          registry_port = 9191[0m[37m
172.16.1.170         @@ -193,57 +84,17 @@[0m[37m
172.16.1.170          # The path to the key file to use in SSL connections to the[0m[37m
172.16.1.170          # registry server, if any. Alternately, you may set the[0m[37m
172.16.1.170          # GLANCE_CLIENT_KEY_FILE environ variable to a filepath of the key file[0m[37m
172.16.1.170         -#registry_client_key_file = /path/to/key/file[0m[37m
172.16.1.170         +# registry_client_key_file = /path/to/key/file[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # The path to the cert file to use in SSL connections to the[0m[37m
172.16.1.170          # registry server, if any. Alternately, you may set the[0m[37m
172.16.1.170          # GLANCE_CLIENT_CERT_FILE environ variable to a filepath of the cert file[0m[37m
172.16.1.170         -#registry_client_cert_file = /path/to/cert/file[0m[37m
172.16.1.170         +# registry_client_cert_file = /path/to/cert/file[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # The path to the certifying authority cert file to use in SSL connections[0m[37m
172.16.1.170          # to the registry server, if any. Alternately, you may set the[0m[37m
172.16.1.170          # GLANCE_CLIENT_CA_FILE environ variable to a filepath of the CA cert file[0m[37m
172.16.1.170         -#registry_client_ca_file = /path/to/ca/file[0m
172.16.1.170 [37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# When using SSL in connections to the registry server, do not require[0m
172.16.1.170 [37m
172.16.1.170         -# validation via a certifying authority. This is the registry's equivalent of[0m
172.16.1.170 [37m
172.16.1.170         -# specifying --insecure on the command line using glanceclient for the API[0m
172.16.1.170 [37m
172.16.1.170         -# Default: False[0m[37m
172.16.1.170         -#registry_client_insecure = False[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The period of time, in seconds, that the API server will wait for a registry[0m
172.16.1.170 [37m
172.16.1.170         -# request to complete. A value of '0' implies no timeout.[0m[37m
172.16.1.170         -# Default: 600[0m
172.16.1.170 [37m
172.16.1.170         -#registry_client_timeout = 600[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Whether to automatically create the database tables.[0m
172.16.1.170 [37m
172.16.1.170         -# Default: False[0m
172.16.1.170 [37m
172.16.1.170         -#db_auto_create = False[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable DEBUG log messages from sqlalchemy which prints every database[0m[37m
172.16.1.170         -# query and response.[0m[37m
172.16.1.170         -# Default: False[0m[37m
172.16.1.170         -#sqlalchemy_debug = True[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Pass the user's token through for API requests to the registry.[0m[37m
172.16.1.170         -# Default: True[0m[37m
172.16.1.170         -#use_user_token = True[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If 'use_user_token' is not in effect then admin credentials[0m[37m
172.16.1.170         -# can be specified. Requests to the registry on behalf of[0m[37m
172.16.1.170         -# the API will use these credentials.[0m[37m
172.16.1.170         -# Admin user name[0m[37m
172.16.1.170         -#admin_user = None[0m[37m
172.16.1.170         -# Admin password[0m[37m
172.16.1.170         -#admin_password = None[0m[37m
172.16.1.170         -# Admin tenant name[0m[37m
172.16.1.170         -#admin_tenant_name = None[0m[37m
172.16.1.170         -# Keystone endpoint[0m[37m
172.16.1.170         -#auth_url = None[0m[37m
172.16.1.170         -# Keystone region[0m[37m
172.16.1.170         -#auth_region = None[0m[37m
172.16.1.170         -# Auth strategy[0m[37m
172.16.1.170         -#auth_strategy = keystone[0m[37m
172.16.1.170         +# registry_client_ca_file = /path/to/ca/file[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ============ Notification System Options =====================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         @@ -251,105 +102,49 @@[0m[37m
172.16.1.170          # There are three methods of sending notifications, logging (via the[0m[37m
172.16.1.170          # log_file directive), rabbit (via a rabbitmq queue), qpid (via a Qpid[0m[37m
172.16.1.170          # message queue), or noop (no notifications sent, the default)[0m[37m
172.16.1.170         -# NOTE: THIS CONFIGURATION OPTION HAS BEEN DEPRECATED IN FAVOR OF `notification_driver`[0m[37m
172.16.1.170         -# notifier_strategy = default[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Driver or drivers to handle sending notifications[0m[37m
172.16.1.170         -# notification_driver = noop[0m[37m
172.16.1.170         +notifier_strategy = default[0m[37m
172.16.1.170         +notification_driver = noop[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Default publisher_id for outgoing notifications.[0m[37m
172.16.1.170         -# default_publisher_id = image.localhost[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Configuration options if sending notifications via rabbitmq (these are[0m[37m
172.16.1.170         -# the defaults)[0m[37m
172.16.1.170         -rabbit_host = localhost[0m[37m
172.16.1.170         -rabbit_port = 5672[0m[37m
172.16.1.170         -rabbit_use_ssl = false[0m[37m
172.16.1.170         -rabbit_userid = guest[0m[37m
172.16.1.170         -rabbit_password = guest[0m[37m
172.16.1.170         -rabbit_virtual_host = /[0m[37m
172.16.1.170         -rabbit_notification_exchange = glance[0m[37m
172.16.1.170         -rabbit_notification_topic = notifications[0m[37m
172.16.1.170         -rabbit_durable_queues = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Configuration options if sending notifications via Qpid (these are[0m[37m
172.16.1.170         -# the defaults)[0m[37m
172.16.1.170         -qpid_notification_exchange = glance[0m[37m
172.16.1.170         -qpid_notification_topic = notifications[0m[37m
172.16.1.170         -qpid_hostname = localhost[0m[37m
172.16.1.170         -qpid_port = 5672[0m[37m
172.16.1.170         -qpid_username =[0m[37m
172.16.1.170         -qpid_password =[0m[37m
172.16.1.170         -qpid_sasl_mechanisms =[0m[37m
172.16.1.170         -qpid_reconnect_timeout = 0[0m[37m
172.16.1.170         -qpid_reconnect_limit = 0[0m[37m
172.16.1.170         -qpid_reconnect_interval_min = 0[0m[37m
172.16.1.170         -qpid_reconnect_interval_max = 0[0m[37m
172.16.1.170         -qpid_reconnect_interval = 0[0m[37m
172.16.1.170         -qpid_heartbeat = 5[0m[37m
172.16.1.170         -# Set to 'ssl' to enable SSL[0m[37m
172.16.1.170         -qpid_protocol = tcp[0m[37m
172.16.1.170         -qpid_tcp_nodelay = True[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ============ Filesystem Store Options ========================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Directory that the Filesystem backend store[0m[37m
172.16.1.170          # writes image data to[0m[37m
172.16.1.170         -filesystem_store_datadir = /var/lib/glance/images/[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A list of directories where image data can be stored.[0m[37m
172.16.1.170         -# This option may be specified multiple times for specifying multiple store[0m[37m
172.16.1.170         -# directories. Either o
172.16.1.170 ne of filesystem_store_datadirs or[0m[37m
172.16.1.170         -# filesystem_store_datadir option is required. A priority number may be given[0m[37m
172.16.1.170         -# after each directory entry, separated by a ":".[0m[37m
172.16.1.170         -# When adding an image, the highest priority directory will be selected, unless[0m[37m
172.16.1.170         -# there is not enough space available in cases where the image size is already[0m[37m
172.16.1.170         -# known. If no priority is given, it is assumed to be zero and the directory[0m[37m
172.16.1.170         -# will be considered for selection last. If multiple directories have the same[0m[37m
172.16.1.170         -# priority, then the one with the most free space available is selected.[0m[37m
172.16.1.170         -# If same store is specified multiple times then BadStoreConfiguration[0m[37m
172.16.1.170         -# exception will be raised.[0m[37m
172.16.1.170         -#filesystem_store_datadirs = /var/lib/glance/images/:1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A path to a JSON file that contains metadata describing the storage[0m[37m
172.16.1.170         -# system.  When show_multiple_locations is True the information in this[0m[37m
172.16.1.170         -# file will be returned with any location that is contained in this[0m[37m
172.16.1.170         -# store.[0m[37m
172.16.1.170         -#filesystem_store_metadata_file = None[0m[37m
172.16.1.170         +filesystem_store_datadir = /var/lib/glance/images[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ============ Swift Store Options =============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Version of the authentication service to use[0m[37m
172.16.1.170         -# Valid versions are '2' for keystone and '1' for swauth and rackspace[0m[37m
172.16.1.170         -swift_store_auth_version = 2[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Address where the Swift authentication service lives[0m[37m
172.16.1.170          # Valid schemes are 'http://' and 'https://'[0m[37m
172.16.1.170          # If no scheme specified,  default to 'https://'[0m[37m
172.16.1.170         -# For swauth, use something like '127.0.0.1:8080/v1.0/'[0m[37m
172.16.1.170         -swift_store_auth_address = 127.0.0.1:5000/v2.0/[0m[37m
172.16.1.170         +swift_store_auth_address = http://172.16.1.170:5000/v2.0[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Authentication version to use.  Current Rackspace CloudFiles supports[0m[37m
172.16.1.170         +# Version 1 while swift backed with keystone supports Version 2.[0m[37m
172.16.1.170         +swift_store_auth_version = 2[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # User to authenticate against the Swift authentication service[0m[37m
172.16.1.170          # If you use Swift authentication service, set it to 'account':'user'[0m[37m
172.16.1.170          # where 'account' is a Swift storage account and 'user'[0m[37m
172.16.1.170          # is a user in that account[0m[37m
172.16.1.170         -swift_store_user = jdoe:jdoe[0m
172.16.1.170 [37m
172.16.1.170         +swift_store_user = :service:glance[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Auth key for the user authenticating against the[0m
172.16.1.170 [37m
172.16.1.170          # Swift authentication service[0m
172.16.1.170 [37m
172.16.1.170         -swift_store_key = a86850deb2742ec3cb41518e26aa2d89[0m
172.16.1.170 [37m
172.16.1.170         +swift_store_key = openstack-image[0m
172.16.1.170 [37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Container within the account that the account should use[0m
172.16.1.170 [37m
172.16.1.170          # for storing images in Swift[0m
172.16.1.170 [37m
172.16.1.170          swift_store_container = glance[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Do we create the container if it does not exist?[0m[37m
172.16.1.170         -swift_store_create_container_on_put = False[0m
172.16.1.170 [37m
172.16.1.170         +swift_store_create_container_on_put = True[0m
172.16.1.170 [37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # What size, in MB, should Glance start chunking image files[0m
172.16.1.170 [37m
172.16.1.170          # and do a large object manifest in Swift? By default, this is[0m
172.16.1.170 [37m
172.16.1.170          # the maximum object size in Swift, which is 5GB[0m[37m
172.16.1.170         -swift_store_large_object_size = 5120[0m[37m
172.16.1.170         +swift_store_large_object_size = 200[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # When doing a large object manifest, what size, in MB, should[0m[37m
172.16.1.170          # Glance write chunks to Swift? This amount of data is written[0m[37m
172.16.1.170         @@ -365,36 +160,6 @@[0m[37m
172.16.1.170          # Ex. https://example.com/v1.0/ -> https://snet-example.com/v1.0/[0m[37m
172.16.1.170          swift_enable_snet = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# If set to True enables multi-tenant storage mode which causes Glance images[0m[37m
172.16.1.170         -# to be stored in tenant specific Swift accounts.[0m[37m
172.16.1.170         -#swift_store_multi_tenant = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A list of swift ACL strings that will be applied as both read and[0m[37m
172.16.1.170         -# write ACLs to the containers created by Glance in multi-tenant[0m[37m
172.16.1.170         -# mode. This grants the specified tenants/users read and write access[0m[37m
172.16.1.170         -# to all newly created image objects. The standard swift ACL string[0m[37m
172.16.1.170         -# formats are allowed, including:[0m[37m
172.16.1.170         -# <tenant_id>:<username>[0m[37m
172.16.1.170         -# <tenant_name>:<username>[0m[37m
172.16.1.170         -# *:<username>[0m[37m
172.16.1.170         -# Multiple ACLs can be combined using a comma separated list, for[0m[37m
172.16.1.170         -# example: swift_store_admin_tenants = service:glance,*:admin[0m[37m
172.16.1.170         -#swift_store_admin_tenants =[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The region of the swift endpoint to be used for single tenant. This setting[0m[37m
172.16.1.170         -# is only necessary if the tenant has multiple swift endpoints.[0m[37m
172.16.1.170         -#swift_store_region =[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set to False, disables SSL layer compression of https swift requests.[0m[37m
172.16.1.170         -# Setting to 'False' may improve performance for images which are already[0m[37m
172.16.1.170         -# in a compressed format, eg qcow2. If set to True, enables SSL layer[0m[37m
172.16.1.170         -# compression (provided it is supported by the target swift proxy).[0m[37m
172.16.1.170         -#swift_store_ssl_compression = True[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The number of times a Swift download will be retried before the[0m[37m
172.16.1.170         -# request fails[0m[37m
172.16.1.170         -#swift_store_retry_get_count = 0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          # ============ S3 Store Options =============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Address where the S3 authentication service lives[0m[37m
172.16.1.170         @@ -423,13 +188,7 @@[0m[37m
172.16.1.170          # When sending images to S3, the data will first be written to a[0m[37m
172.16.1.170          # temporary buffer on disk. By default the platform's temporary directory[0m[37m
172.16.1.170          # will be used. If required, an alternative directory can be specified here.[0m[37m
172.16.1.170         -#s3_store_object_buffer_dir = /path/to/dir[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# When forming a bucket url, boto will either set the bucket name as the[0m[37m
172.16.1.170         -# subdomain or as the first token of the path. Amazon's S3 service will[0m[37m
172.16.1.170         -# accept it as the subdomain, but Swift's S3 middleware requires it be[0m[37m
172.16.1.170         -# in the path. Set this to 'path' or 'subdomain' - defaults to 'subdomain'.[0m[37m
172.16.1.170         -#s3_store_bucket_url_format = subdomain[0m[37m
172.16.1.170         +# s3_store_object_buffer_dir = /path/to/dir[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ============ RBD Store Options =============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         @@ -437,89 +196,53 @@[0m[37m
172.16.1.170          # If using cephx authentication, this file should[0m[37m
172.16.1.170          # include a reference to the right keyring[0m[37m
172.16.1.170          # in a client.<USER> section[0m[37m
172.16.1.170         -#rbd_store_ceph_conf = /etc/ceph/ceph.conf[0m[37m
172.16.1.170         +rbd_store_ceph_conf = /etc/ceph/ceph.conf[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # RADOS user to authenticate as (only applicable if using cephx)[0m[37m
172.16.1.170         -# If <None>, a default will be chos
172.16.1.170 en based on the client. section[0m[37m
172.16.1.170         -# in rbd_store_ceph_conf[0m[37m
172.16.1.170         -#rbd_store_user = <None>[0m[37m
172.16.1.170         +rbd_store_user = glance[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # RADOS pool in which images are stored[0m[37m
172.16.1.170         -#rbd_store_pool = images[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# RADOS images will be chunked into objects of this size (in megabytes).[0m[37m
172.16.1.170         -# For best performance, this should be a power of two[0m[37m
172.16.1.170         -#rbd_store_chunk_size = 8[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ============ Sheepdog Store Options =============================[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -sheepdog_store_address = localhost[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -sheepdog_store_port = 7000[0m[37m
172.16.1.170         +rbd_store_pool = images[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Images will be chunked into objects of this size (in megabytes).[0m[37m
172.16.1.170          # For best performance, this should be a power of two[0m[37m
172.16.1.170         -sheepdog_store_chunk_size = 64[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ============ Cinder Store Options ===============================[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Info to match when looking for cinder in the service catalog[0m[37m
172.16.1.170         -# Format is : separated values of the form:[0m[37m
172.16.1.170         -# <service_type>:<service_name>:<endpoint_type> (string value)[0m[37m
172.16.1.170         -#cinder_catalog_info = volume:cinder:publicURL[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Override service catalog lookup with template for cinder endpoint[0m[37m
172.16.1.170         -# e.g. http://localhost:8776/v1/%(project_id)s (string value)[0m[37m
172.16.1.170         -#cinder_endpoint_template = <None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Region name of this node (string value)[0m[37m
172.16.1.170         -#os_region_name = <None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of ca certicates file to use for cinder client requests[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#cinder_ca_certificates_file = <None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of cinderclient retries on failed http calls (integer value)[0m[37m
172.16.1.170         -#cinder_http_retries = 3[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allow to perform insecure SSL requests to cinder (boolean value)[0m[37m
172.16.1.170         -#cinder_api_insecure = False[0m[37m
172.16.1.170         +rbd_store_chunk_size = 8[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ============ VMware Datastore Store Options =====================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ESX/ESXi or vCenter Server target system.[0m[37m
172.16.1.170          # The server value can be an IP address or a DNS name[0m[37m
172.16.1.170          # e.g. 127.0.0.1, 127.0.0.1:443, www.vmware-infra.com[0m[37m
172.16.1.170         -#vmware_server_host = <None>[0m[37m
172.16.1.170         +vmware_server_host = [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Server username (string value)[0m[37m
172.16.1.170         -#vmware_server_username = <None>[0m
172.16.1.170 [37m
172.16.1.170         +vmware_server_username = [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Server password (string value)[0m[37m
172.16.1.170         -#vmware_server_password = <None>[0m
172.16.1.170 [37m
172.16.1.170         +vmware_server_password = [0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Inventory path to a datacenter (string value)[0m
172.16.1.170 [37m
172.16.1.170          # Value optional when vmware_server_ip is an ESX/ESXi host: if specified[0m[37m
172.16.1.170          # should be `ha-datacenter`.[0m
172.16.1.170 [37m
172.16.1.170         -#vmware_datacenter_path = <None>[0m
172.16.1.170 [37m
172.16.1.170         +vmware_datacenter_path = [0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Datastore associated with the datacenter (string value)[0m[37m
172.16.1.170         -#vmware_datastore_name = <None>[0m[37m
172.16.1.170         +vmware_datastore_name = [0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # The number of times we retry on failures[0m
172.16.1.170 [37m
172.16.1.170          # e.g., socket error, etc (integer value)[0m
172.16.1.170 [37m
172.16.1.170         -#vmware_api_retry_count = 10[0m
172.16.1.170 [37m
172.16.1.170         +vmware_api_retry_count = 10[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # The interval used for polling remote tasks[0m[37m
172.16.1.170          # invoked on VMware ESX/VC server in seconds (integer value)[0m
172.16.1.170 [37m
172.16.1.170         -#vmware_task_poll_interval = 5[0m
172.16.1.170 [37m
172.16.1.170         +vmware_task_poll_interval = 5[0m
172.16.1.170 [37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Absolute path of the folder containing the images in the datastore[0m
172.16.1.170 [37m
172.16.1.170          # (string value)[0m[37m
172.16.1.170         -#vmware_store_image_dir = /openstack_glance[0m[37m
172.16.1.170         +vmware_store_image_dir = /openstack_glance[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Allow to perform insecure SSL requests to the target system (boolean value)[0m[37m
172.16.1.170         -#vmware_api_insecure = False[0m[37m
172.16.1.170         +vmware_api_insecure = false[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ============ Delayed Delete Options =============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         @@ -533,53 +256,24 @@[0m[37m
172.16.1.170          # Make sure this is also set in glance-scrubber.conf[0m[37m
172.16.1.170          scrubber_datadir = /var/lib/glance/scrubber[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# =============== Quota Options ==================================[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The maximum number of image members allowed per image[0m[37m
172.16.1.170         -#image_member_quota = 128[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The maximum number of image properties allowed per image[0m[37m
172.16.1.170         -#image_property_quota = 128[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The maximum number of tags allowed per image[0m[37m
172.16.1.170         -#image_tag_quota = 128[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The maximum number of locations allowed per image[0m[37m
172.16.1.170         -#image_location_quota = 10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set a system wide quota for every user.  This value is the total number[0m[37m
172.16.1.170         -# of bytes that a user can use across all storage systems.  A value of[0m[37m
172.16.1.170         -# 0 means unlimited.[0m[37m
172.16.1.170         -#user_storage_quota = 0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          # =============== Image Cache Options =============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Base directory that the Image Cache uses[0m[37m
172.16.1.170          image_cache_dir = /var/lib/glance/image-cache/[0m[37m
172.16.1.170         -db_auto_create = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [keystone_authtoken][0m[37m
172.16.1.170         -auth_host = 127.0.0.1[0m[37m
172.16.1.170         +auth_uri = http://172.16.1.170:5000/v2.0[0m[37m
172.16.1.170         +auth_host = 172.16.1.170[0m[37m
172.16.1.170          auth_port = 35357[0m[37m
172.16.1.170          auth_protocol = http[0m[37m
172.16.1.170         -admin_tenant_name = %SERVICE_TENANT_NAME%[0m[37m
172.16.1.170         -admin_user = %SERVICE_USER%[0m[37m
172.16.1.170         -admin_password = %SERVICE_PASSWORD%[0m[37m
172.16.1.170         +admin_tenant_name = service[0m[37m
172.16.1.170         +admin_user = glance[0m[37m
172.16.1.170         +admin_password = openstack-image[0m[37m
172.16.1.170         +signing_dir = /var/cache/glance/api[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [paste_deploy][0m[37m
172.16.1.170         -flavor = keystone[0m[37m
172.16.1.170         -# Name of the paste configuration file that defines the available pipelines[0m[37m
172.16.1.170         -#config_file = glance-api-paste.ini[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          # Partial name of a pipeline in your paste configuration file with the[0m[37m
172.16.1.170          # service name removed. For example, if your paste section name is[0m[37m
172.16.1.170          # [pipeline:glance-api-keystone], you would configure the flavor below[0m[37m
172.16.1.170          # as 'keystone'.[0m[37m
172.16.1.170         -#flavor=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[store_type_location_strategy][0m[37m
172.16.1.170         -# The scheme list to use to get store preference order. The scheme must be[0m[37m
172.16.1.170         -# registered by one of the stores defined by the 'known_stores' config option.[0m[37m
172.16.1.170         -# This option will be applied when you using 'store_type' option as image[0m[37m
172.16.1.170         -# location strategy defined by the 'location_strategy' config option.[0m[37m
172.16.1.170         -#store_type_preference =[0m[37m
172.16.1.170         +flavor = keystone[0m
172.16.1.170 [0m
172.16.1.170   * service[glance-api] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[glance-api][0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/glance/glance-api-paste.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/glance/glance-api-paste.ini] from 2cd899 to 5b89ca[0m[37m
172.16.1.170         --- /etc/glance/glance-api-paste.ini	2014-02-26 07:23:38.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1v1b7cd	2014-08-08 01:50:23.067999966 +0800[0m[37m
172.16.1.170         @@ -1,3 +1,8 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          # Use this pipeline for no auth or image caching - DEFAULT[0m[37m
172.16.1.170          [pipeline:glance-api][0m[37m
172.16.1.170          pipeline = versionnegotiation unauthenticated-context rootapp[0m[37m
172.16.1.170         @@ -22,18 +27,6 @@[0m[37m
172.16.1.170          [pipeline:glance-api-keystone+cachemanagement][0m[37m
172.16.1.170          pipeline = versionnegotiation authtoken context cache cachemanage rootapp[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Use this pipeline for authZ only. This means that the registry will treat a[0m[37m
172.16.1.170         -# user as authenticated without making requests to keystone to reauthenticate[0m[37m
172.16.1.170         -# the user.[0m[37m
172.16.1.170         -[pipeline:glance-api-trusted-auth][0m[37m
172.16.1.170         -pipeline = versionnegotiation context rootapp[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use this pipeline for authZ only. This means that the registry will treat a[0m[37m
172.16.1.170         -# user as authenticated without making requests to keystone to reauthenticate[0m[37m
172.16.1.170         -# the user and uses cache management[0m[37m
172.16.1.170         -[pipeline:glance-api-trusted-auth+cachemanagement][0m[37m
172.16.1.170         -pipeline = versionnegotiation context cache cachemanage rootapp[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          [composite:rootapp][0m[37m
172.16.1.170          paste.composite_factory = glance.api:root_app_factory[0m[37m
172.16.1.170          /: apiversions[0m[37m
172.16.1.170         @@ -67,6 +60,3 @@[0m[37m
172.16.1.170          [filter:authtoken][0m[37m
172.16.1.170          paste.filter_factory = keystoneclient.middleware.auth_token:filter_factory[0m[37m
172.16.1.170          delay_auth_decision = true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[filter:gzip][0m[37m
172.16.1.170         -paste.filter_factory = glance.api.middleware.gzip:GzipMiddleware.factory[0m
172.16.1.170 [0m
172.16.1.170   * service[glance-api] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[glance-api][0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/glance/glance-cache.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/glance/glance-cache.conf] from d904d0 to 1187b8[0m[37m
172.16.1.170         --- /etc/glance/glance-cache.conf	2014-02-26 07:05:20.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-6gcix8	2014-08-08 01:50:24.437999964 +0800[0m[37m
172.16.1.170         @@ -1,28 +1,16 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          [DEFAULT][0m[37m
172.16.1.170          # Show more verbose log output (sets INFO log level output)[0m[37m
172.16.1.170         -#verbose = False[0m[37m
172.16.1.170         +verbose = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Show debugging output in logs (sets DEBUG log level output)[0m[37m
172.16.1.170         -#debug = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Log to this file. Make sure you do not set the same log file for both the API[0m[37m
172.16.1.170         -# and registry servers![0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# If `log_file` is omitted and `use_syslog` is false, then log messages are[0m[37m
172.16.1.170         -# sent to stdout as a fallback.[0m[37m
172.16.1.170         -log_file = /var/log/glance/image-cache.log[0m[37m
172.16.1.170         +debug = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# (Optional) In addition to the system's default language log,[0m[37m
172.16.1.170         -# creates an additional log in the given language if such language is present[0m[37m
172.16.1.170         -# in the operating system. This option is only enabled if the 'log-file' option[0m[37m
172.16.1.170         -# is used, and the additional log will be created in the same directory as the[0m[37m
172.16.1.170         -# main log, inside a directory named after the locale.[0m[37m
172.16.1.170         -# This option is not available in community OpenStack Havana but it is in[0m[37m
172.16.1.170         -# IBM OpenStack Enterprise Edition.[0m[37m
172.16.1.170         -#log_additional_locale=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Send logs to syslog (/dev/log) instead of to file specified by `log_file`[0m[37m
172.16.1.170         -#use_syslog = False[0m[37m
172.16.1.170         +# =============== Image Cache Options =============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Directory that the Image Cache writes data to[0m[37m
172.16.1.170          image_cache_dir = /var/lib/glance/image-cache/[0m
172.16.1.170 [37m
172.16.1.170         @@ -31,11 +19,27 @@[0m[37m
172.16.1.170          # stalled and eligible for reaping[0m[37m
172.16.1.170          image_cache_stall_time = 86400[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170         +# image_cache_invalid_entry_grace_period - seconds[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# If an exception is raised as we're writing to the cache, the cache-entry is[0m
172.16.1.170 [37m
172.16.1.170         +# deemed invalid and moved to <image_cache_datadir>/invalid so that it can be[0m
172.16.1.170 [37m
172.16.1.170         +# inspected for debugging purposes.[0m
172.16.1.170 [37m
172.16.1.170         +#[0m
172.16.1.170 [37m
172.16.1.170         +# This is number of seconds to leave these invalid images around before they[0m
172.16.1.170 [37m
172.16.1.170         +# are elibible to be reaped.[0m
172.16.1.170 [37m
172.16.1.170         +image_cache_invalid_entry_grace_period = 3600[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170          # Max cache size in bytes[0m
172.16.1.170 [37m
172.16.1.170          image_cache_max_size = 10737418240[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +# ================= Syslog Options ============================[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +log_file = /var/log/glance/image-cache.log[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# ============ Registry Options ===============================[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          # Address to find the registry server[0m[37m
172.16.1.170         -registry_host = 0.0.0.0[0m[37m
172.16.1.170         +registry_host = 172.16.1.170[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Port the registry server is listening on[0m[37m
172.16.1.170          registry_port = 9191[0m[37m
172.16.1.170         @@ -46,160 +50,41 @@[0m[37m
172.16.1.170          # admin_user = %SERVICE_USER%[0m[37m
172.16.1.170          # admin_password = %SERVICE_PASSWORD%[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# List of which store classes and store class locations are[0m[37m
172.16.1.170         -# currently known to glance at startup.[0m[37m
172.16.1.170         -# known_stores = glance.store.filesystem.Store,[0m[37m
172.16.1.170         -#                glance.store.http.Store,[0m[37m
172.16.1.170         -#                glance.store.rbd.Store,[0m[37m
172.16.1.170         -#                glance.store.s3.Store,[0m[37m
172.16.1.170         -#                glance.store.swift.Store,[0m[37m
172.16.1.170         -#                glance.store.sheepdog.Store,[0m[37m
172.16.1.170         -#                glance.store.cinder.Store,[0m[37m
172.16.1.170         -#                glance.store.vmware_datastore.Store,[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ============ Filesystem Store Options ========================[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory that the Filesystem backend store[0m[37m
172.16.1.170         -# writes image data to[0m[37m
172.16.1.170         -filesystem_store_datadir = /var/lib/glance/images/[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ============ Swift Store Options =============================[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Version of the authentication service to use[0m[37m
172.16.1.170         -# Valid versions are '2' for keystone and '1' for swauth and rackspace[0m[37m
172.16.1.170         -swift_store_auth_version = 2[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Address where the Swift authentication service lives[0m[37m
172.16.1.170         -# Valid schemes are 'http://' and 'https://'[0m[37m
172.16.1.170         -# If no scheme specified,  default to 'https://'[0m
172.16.1.170 [37m
172.16.1.170         -# For swauth, use something like '127.0.0.1:8080/v1.0/'[0m[37m
172.16.1.170         -swift_store_auth_address = 127.0.0.1:5000/v2.0/[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# User to authenticate against the Swift authentication service[0m
172.16.1.170 [37m
172.16.1.170         -# If you use Swift authentication service, set it to 'account':'user'[0m[37m
172.16.1.170         -# where 'account' is a Swift storage account and 'user'[0m[37m
172.16.1.170         -# is a user in that account[0m
172.16.1.170 [37m
172.16.1.170         -swift_store_user = jdoe:jdoe[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Auth key for the user authenticating against the[0m
172.16.1.170 [37m
172.16.1.170         -# Swift authentication service[0m[37m
172.16.1.170         -swift_store_key = a86850deb2742ec3cb41518e26aa2d89[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Container within the account that the account should use[0m[37m
172.16.1.170         -# for storing images in Swift[0m
172.16.1.170 [37m
172.16.1.170         -swift_store_container = glance[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Do we create the container if it does not exist?[0m
172.16.1.170 [37m
172.16.1.170         -swift_store_create_container_on_put = False[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# What size, in MB, should Glance start chunking image files[0m[37m
172.16.1.170         -# and do a large object manifest in Swift? By default, this is[0m[37m
172.16.1.170         -# the maximum object size in Swift, which is 5GB[0m[37m
172.16.1.170         -swift_store_large_object_size = 5120[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# When doing a large object manifest, what size, in MB, should[0m[37m
172.16.1.170         -# Glance write chunks to Swift? This amount of data is written[0m
172.16.1.170 [37m
172.16.1.170         -# to a temporary disk buffer during the process of chunking[0m[37m
172.16.1.170         -# the image file, and the default is 200MB[0m[37m
172.16.1.170         -swift_store_large_object_chunk_size = 200[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to use ServiceNET to communicate with the Swift storage servers.[0m[37m
172.16.1.170         -# (If you aren't RACKSPACE, leave this False!)[0m
172.16.1.170 [37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# To use ServiceNET for authentication, prefix hostname of[0m[37m
172.16.1.170         -# `swift_store_auth_address` with 'snet-'.[0m
172.16.1.170 [37m
172.16.1.170         -# Ex. https://example.com/v1.0/ -> https://snet-example.com/v1.0/[0m[37m
172.16.1.170         -swift_enable_snet = False[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# ============ S3 Store Options =============================[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Address where the S3 authentication service lives[0m
172.16.1.170 [37m
172.16.1.170         -# Valid schemes are 'http://' and 'https://'[0m[37m
172.16.1.170         -# If no scheme specified,  default to 'http://'[0m[37m
172.16.1.170         -s3_store_host = 127.0.0.1:8080/v1.0/[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# User to authenticate against the S3 authentication service[0m
172.16.1.170 [37m
172.16.1.170         -s3_store_access_key = <20-char AWS access key>[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Auth key for the user authenticating against the[0m[37m
172.16.1.170         -# S3 authentication service[0m
172.16.1.170 [37m
172.16.1.170         -s3_store_secret_key = <40-char AWS secret key>[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Container within the account that the account should use[0m
172.16.1.170 [37m
172.16.1.170         -# for storing images in S3. Note that S3 has a flat namespace,[0m
172.16.1.170 [37m
172.16.1.170         -# so you need a unique bucket name for your glance images. An[0m[37m
172.16.1.170         -# easy way to do this is append your AWS access key to "glance".[0m
172.16.1.170 [37m
172.16.1.170         -# S3 buckets in AWS *must* be lowercased, so remember to lowercase[0m[37m
172.16.1.170         -# your AWS access key if you use it in your bucket name below![0m
172.16.1.170 [37m
172.16.1.170         -s3_store_bucket = <lowercased 20-char aws access key>glance[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Do we create the bucket if it does not exist?[0m
172.16.1.170 [37m
172.16.1.170         -s3_store_create_bucket_on_put = False[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# When sending images to S3, the data will first be written to a[0m[37m
172.16.1.170         -# temporary buffer on disk. By default the platform's temporary directory[0m
172.16.1.170 [37m
172.16.1.170         -# will be used. If required, an alternative directory can be specified here.[0m[37m
172.16.1.170         -# s3_store_object_buffer_dir = /path/to/dir[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ============ Cinder Store Options ===========================[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Info to match when looking for cinder in the service catalog[0m
172.16.1.170 [37m
172.16.1.170         -# Format is : separated values of the form:[0m[37m
172.16.1.170         -# <service_type>:<service_name>:<endpoint_type> (string value)[0m
172.16.1.170 [37m
172.16.1.170         -#cinder_catalog_info = volume:cinder:publicURL[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Override service catalog lookup with template for cinder endpoint[0m[37m
172.16.1.170         -# e.g. http://localhost:8776/v1/%(project_id)s (string value)[0m
172.16.1.170 [37m
172.16.1.170         -#cinder_endpoint_template = <None>[0m
172.16.1.170 [37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Region name of this node (string value)[0m
172.16.1.170 [37m
172.16.1.170         -#os_region_name = <None>[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Location of ca certicates file to use for cinder client requests[0m
172.16.1.170 [37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#cinder_ca_certificates_file = <None>[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Number of cinderclient retries on failed http calls (integer value)[0m[37m
172.16.1.170         -#cinder_http_retries = 3[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allow to perform insecure SSL requests to cinder (boolean value)[0m
172.16.1.170 [37m
172.16.1.170         -#cinder_api_insecure = False[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170          # ============ VMware Datastore Store Options =====================[0m
172.16.1.170 [37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # ESX/ESXi or vCenter Server target system.[0m[37m
172.16.1.170          # The server value can be an IP address or a DNS name[0m
172.16.1.170 [37m
172.16.1.170          # e.g. 127.0.0.1, 127.0.0.1:443, www.vmware-infra.com[0m
172.16.1.170 [37m
172.16.1.170         -#vmware_server_host = <None>[0m[37m
172.16.1.170         +vmware_server_host = [0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Server username (string value)[0m
172.16.1.170 [37m
172.16.1.170         -#vmware_server_username = <None>[0m
172.16.1.170 [37m
172.16.1.170         +vmware_server_username = [0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Server password (string value)[0m[37m
172.16.1.170         -#vmware_server_password = <None>[0m
172.16.1.170 [37m
172.16.1.170         +vmware_server_password = [0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Inventory path to a datacenter (string value)[0m
172.16.1.170 [37m
172.16.1.170          # Value optional when vmware_server_ip is an ESX/ESXi host: if specified[0m
172.16.1.170 [37m
172.16.1.170          # should be `ha-datacenter`.[0m[37m
172.16.1.170         -#vmware_datacenter_path = <None>[0m
172.16.1.170 [37m
172.16.1.170         +vmware_datacenter_path = [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Datastore associated with the datacenter (string value)[0m[37m
172.16.1.170         -#vmware_datastore_name = <None>[0m[37m
172.16.1.170         +vmware_datastore_name = [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # The number of times we retry on failures[0m[37m
172.16.1.170          # e.g., socket error, etc (integer value)[0m[37m
172.16.1.170         -#vmware_api_retry_count = 10[0m[37m
172.16.1.170         +vmware_api_retry_count = 10[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # The interval used for polling remote tasks[0m[37m
172.16.1.170          # invoked on VMware ESX/VC server in seconds (integer value)[0m[37m
172.16.1.170         -#vmware_task_poll_interval = 5[0m[37m
172.16.1.170         +vmware_task_poll_interval = 5[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Absolute path of the folder containing the images in the datastore[0m[37m
172.16.1.170          # (string value)[0m[37m
172.16.1.170         -#vmware_store_image_dir = /openstack_glance[0m[37m
172.16.1.170         +vmware_store_image_dir = /openstack_glance[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Allow to perform insecure SSL requests to the target system (boolean value)[0m[37m
172.16.1.170         -#vmware_api_insecure = False[0m[37m
172.16.1.170         +vmware_api_insecure = false[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ================= Security Options ==========================[0m[37m
172.16.1.170          [0m
172.16.1.170 [0m
172.16.1.170   * service[glance-api] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[glance-api][0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/glance/glance-cache-paste.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/glance/glance-cache-paste.ini][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-ahlws0	2014-08-08 01:50:24.894999964 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1w6quhx	2014-08-08 01:50:24.893999964 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,20 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[app:glance-pruner][0m[37m
172.16.1.170         +paste.app_factory = glance.common.wsgi:app_factory[0m[37m
172.16.1.170         +glance.app_factory = glance.image_cache.pruner:Pruner[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[app:glance-prefetcher][0m[37m
172.16.1.170         +paste.app_factory = glance.common.wsgi:app_factory[0m[37m
172.16.1.170         +glance.app_factory = glance.image_cache.prefetcher:Prefetcher[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[app:glance-cleaner][0m[37m
172.16.1.170         +paste.app_factory = glance.common.wsgi:app_factory[0m[37m
172.16.1.170         +glance.app_factory = glance.image_cache.cleaner:Cleaner[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[app:glance-queue-image][0m[37m
172.16.1.170         +paste.app_factory = glance.common.wsgi:app_factory[0m[37m
172.16.1.170         +glance.app_factory = glance.image_cache.queue_image:Queuer[0m
172.16.1.170 [0m
172.16.1.170   * service[glance-api] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[glance-api][0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/glance/glance-scrubber.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/glance/glance-scrubber.conf] from e03a7b to e213be[0m[37m
172.16.1.170         --- /etc/glance/glance-scrubber.conf	2014-02-26 07:05:20.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-6uri4h	2014-08-08 01:50:25.317999963 +0800[0m[37m
172.16.1.170         @@ -1,33 +1,23 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          [DEFAULT][0m[37m
172.16.1.170          # Show more verbose log output (sets INFO log level output)[0m[37m
172.16.1.170         -#verbose = False[0m[37m
172.16.1.170         +verbose = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Show debugging output in logs (sets DEBUG log level output)[0m[37m
172.16.1.170         -#debug = False[0m[37m
172.16.1.170         +debug = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Log to this file. Make sure you do not set the same log file for both the API[0m[37m
172.16.1.170         -# and registry servers![0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# If `log_file` is omitted and `use_syslog` is false, then log messages are[0m[37m
172.16.1.170         -# sent to stdout as a fallback.[0m[37m
172.16.1.170         +# Log to this file. Make sure you do not set the same log[0m[37m
172.16.1.170         +# file for both the API and registry servers![0m[37m
172.16.1.170          log_file = /var/log/glance/scrubber.log[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# (Optional) In addition to the system's default language log,[0m
172.16.1.170 [37m
172.16.1.170         -# creates an additional log in the given language if such language is present[0m[37m
172.16.1.170         -# in the operating system. This option is only enabled if the 'log-file' option[0m[37m
172.16.1.170         -# is used, and the additional log will be created in the same directory as the[0m
172.16.1.170 [37m
172.16.1.170         -# main log, inside a directory named after the locale.[0m[37m
172.16.1.170         -# This option is not available in community OpenStack Havana but it is in[0m[37m
172.16.1.170         -# IBM OpenStack Enterprise Edition.[0m[37m
172.16.1.170         -#log_additional_locale=<None>[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Send logs to syslog (/dev/log) instead of to file specified by `log_file`[0m
172.16.1.170 [37m
172.16.1.170         -#use_syslog = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          # Should we run our own loop or rely on cron/scheduler to run us[0m
172.16.1.170 [37m
172.16.1.170          daemon = False[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170         -# Loop time between checking for new items to schedule for delete[0m[37m
172.16.1.170         +# Loop time between checking the db for new items to schedule for delete[0m
172.16.1.170 [37m
172.16.1.170          wakeup_time = 300[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Directory that the scrubber will use to remind itself of what to delete[0m
172.16.1.170 [37m
172.16.1.170         @@ -41,25 +31,7 @@[0m
172.16.1.170 [37m
172.16.1.170          cleanup_scrubber_time = 86400[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Address to find the registry server for cleanups[0m
172.16.1.170 [37m
172.16.1.170         -registry_host = 0.0.0.0[0m[37m
172.16.1.170         +registry_host = 172.16.1.170[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Port the registry server is listening on[0m[37m
172.16.1.170          registry_port = 9191[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Auth settings if using Keystone[0m[37m
172.16.1.170         -# auth_url = http://127.0.0.1:5000/v2.0/[0m[37m
172.16.1.170         -# admin_tenant_name = %SERVICE_TENANT_NAME%[0m[37m
172.16.1.170         -# admin_user = %SERVICE_USER%[0m[37m
172.16.1.170         -# admin_password = %SERVICE_PASSWORD%[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory to use for lock files. Default to a temp directory[0m[37m
172.16.1.170         -# (string value). This setting needs to be the same for both[0m[37m
172.16.1.170         -# glance-scrubber and glance-api.[0m[37m
172.16.1.170         -#lock_path=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ================= Security Options ==========================[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# AES key for encrypting store 'location' metadata, including[0m[37m
172.16.1.170         -# -- if used -- Swift or S3 credentials[0m[37m
172.16.1.170         -# Should be set to a random string of length 16, 24 or 32 bytes[0m[37m
172.16.1.170         -#metadata_encryption_key = <16, 24 or 32 char registry metadata key>[0m
172.16.1.170 [0m
172.16.1.170   * cron[glance-cache-pruner] action create[0m
172.16.1.170 [32m
172.16.1.170     - add crontab entry for cron[glance-cache-pruner][0m
172.16.1.170 [0m
172.16.1.170   * cron[glance-cache-cleaner] action create[0m
172.16.1.170 [32m
172.16.1.170     - add crontab entry for cron[glance-cache-cleaner][0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/glance/glance-scrubber-paste.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/glance/glance-scrubber-paste.ini][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-jnzzb9	2014-08-08 01:50:25.584999966 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-5fxazh	2014-08-08 01:50:25.584999966 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,8 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[app:glance-scrubber][0m[37m
172.16.1.170         +paste.app_factory = glance.common.wsgi:app_factory[0m
172.16.1.170 [37m
172.16.1.170         +glance.app_factory = glance.store.scrubber:Scrubber[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * directory[/var/lib/glance/images] action create[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '0755' to '0750'[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-image::registry[0m
172.16.1.170   * package[python-keystone] action install[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[curl] action install[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[MySQL-python] action install[0m (up to date)[0m
172.16.1.170   * package[openstack-glance] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[cronie] action upgrade[0m (up to date)[0m
172.16.1.170   * package[python-glanceclient] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[python-anyjson] action upgrade[0m (up to date)[0m
172.16.1.170   * directory[/var/cache/glance] action create[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[glance-registry] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[glance-registry][0m
172.16.1.170 [0m
172.16.1.170   * file[/var/lib/glance/glance.sqlite] action delete[0m (up to date)[0m
172.16.1.170   * directory[/etc/glance] action create[0m (up to date)[0m
172.16.1.170   * template[/etc/glance/glance-registry.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/glance/glance-registry.conf] from 1865be to 72ccbe[0m[37m
172.16.1.170         --- /etc/glance/glance-registry.conf	2014-02-26 07:23:39.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-dhne0c	2014-08-08 01:50:25.927999964 +0800[0m[37m
172.16.1.170         @@ -1,18 +1,14 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          [DEFAULT][0m[37m
172.16.1.170          # Show more verbose log output (sets INFO log level output)[0m[37m
172.16.1.170         -#verbose = False[0m[37m
172.16.1.170         +verbose = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Show debugging output in logs (sets DEBUG log level output)[0m[37m
172.16.1.170         -#debug = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (Optional) In addition to the system's default language log,[0m[37m
172.16.1.170         -# creates an additional log in the given language if such language is present[0m[37m
172.16.1.170         -# in the operating system. This option is only enabled if the 'log-file' option[0m[37m
172.16.1.170         -# is used, and the additional log will be created in the same directory as the[0m[37m
172.16.1.170         -# main log, inside a directory named after the locale.[0m[37m
172.16.1.170         -# This option is not available in community OpenStack Havana but it is in[0m[37m
172.16.1.170         -# IBM OpenStack Enterprise Edition.[0m[37m
172.16.1.170         -#log_additional_locale=<None>[0m[37m
172.16.1.170         +debug = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Address to bind the registry server[0m[37m
172.16.1.170          bind_host = 0.0.0.0[0m[37m
172.16.1.170         @@ -20,28 +16,17 @@[0m[37m
172.16.1.170          # Port the bind the registry server to[0m[37m
172.16.1.170          bind_port = 9191[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Log to this file. Make sure you do not set the same log file for both the API[0m[37m
172.16.1.170         -# and registry servers![0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# If `log_file` is omitted and `use_syslog` is false, then log messages are[0m[37m
172.16.1.170         -# sent to stdout as a fallback.[0m[37m
172.16.1.170         -log_file = /var/log/glance/registry.log[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          # Backlog requests when creating socket[0m[37m
172.16.1.170          backlog = 4096[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# TCP_KEEPIDLE value in seconds when creating socket.[0m[37m
172.16.1.170         -# Not supported on OS X.[0m[37m
172.16.1.170         -#tcp_keepidle = 600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          # API to use for accessing data. Default value points to sqlalchemy[0m[37m
172.16.1.170          # package.[0m[37m
172.16.1.170         -# data_api = glance.db.sqlalchemy.api[0m[37m
172.16.1.170         +data_api = glance.db.sqlalchemy.api[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # SQLAlchemy connection string for the reference implementation[0m[37m
172.16.1.170          # registry server. Any valid SQLAlchemy connection string is fine.[0m[37m
172.16.1.170          # See: http://www.sqlalchemy.org/docs/05/reference/sqlalchemy/connections.html#sqlalchemy.create_engine[0m[37m
172.16.1.170         -sql_connection = mysql://glance:glance@localhost/glance[0m[37m
172.16.1.170         +sql_connection = mysql://glance1:glance@172.16.1.170:3306/glance?charset=utf8[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Period in seconds after which SQLAlchemy should reestablish its connection[0m[37m
172.16.1.170          # to the database.[0m[37m
172.16.1.170         @@ -59,55 +44,31 @@[0m[37m
172.16.1.170          # If a `limit` query param is not provided in an api request, it will[0m[37m
172.16.1.170          # default to `limit_param_default`[0m[37m
172.16.1.170          limit_param_default = 25[0m[37m
172.16.1.170         -db_auto_create = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Role used to identify an authenticated user as administrator[0m[37m
172.16.1.170         -#admin_role = admin[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to automatically create the database tables.[0m[37m
172.16.1.170         -# Default: False[0m[37m
172.16.1.170         -#db_auto_create = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable DEBUG log messages from sqlalchemy which prints every database[0m[37m
172.16.1.170         -# query and response.[0m[37m
172.16.1.170         -# Default: False[0m[37m
172.16.1.170         -#sqlalchemy_debug = True[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ================= Syslog Options ============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Send logs to syslog (/dev/log) instead of to file specified[0m[37m
172.16.1.170         -# by `log_file`[0m[37m
172.16.1.170         -#use_syslog = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Facility to use. If unset defaults to LOG_USER.[0m[37m
172.16.1.170         -#syslog_log_facility = LOG_LOCAL1[0m[37m
172.16.1.170         +# Log to this file. Make sure you do not set the same log[0m[37m
172.16.1.170         +# file for both the API and registry servers![0m[37m
172.16.1.170         +log_file = /var/log/glance/registry.log[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # ================= SSL Options ===============================[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Certificate file to use when starting registry server securely[0m[37m
172.16.1.170         -#cert_file = /path/to/certfile[0m[37m
172.16.1.170         +# cert_file = /path/to/certfile[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Private key file to use when starting registry server securely[0m[37m
172.16.1.170         -#key_file = /path/to/keyfile[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# CA certificate file to use to verify connecting clients[0m[37m
172.16.1.170         -#ca_file = /path/to/cafile[0m[37m
172.16.1.170         +# key_file = /path/to/keyfile[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +# ================= Keystone authtoken ===============================[0m[37m
172.16.1.170          [keystone_authtoken][0m[37m
172.16.1.170         -auth_host = 127.0.0.1[0m[37m
172.16.1.170         +auth_uri = http://172.16.1.170:5000/v2.0[0m
172.16.1.170 [37m
172.16.1.170         +auth_host = 172.16.1.170[0m[37m
172.16.1.170          auth_port = 35357[0m[37m
172.16.1.170          auth_protocol = http[0m[37m
172.16.1.170         -admin_tenant_name = %SERVICE_TENANT_NAME%[0m[37m
172.16.1.170         -admin_user = %SERVICE_USER%[0m[37m
172.16.1.170         -admin_password = %SERVICE_PASSWORD%[0m[37m
172.16.1.170         +admin_tenant_name = service[0m[37m
172.16.1.170         +admin_user = glance[0m[37m
172.16.1.170         +admin_password = openstack-image[0m[37m
172.16.1.170         +signing_dir = /var/cache/glance/registry[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [paste_deploy][0m[37m
172.16.1.170          flavor = keystone[0m[37m
172.16.1.170         -# Name of the paste configuration file that defines the available pipelines[0m[37m
172.16.1.170         -#config_file = glance-registry-paste.ini[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Partial name of a pipeline in your paste configuration file with the[0m[37m
172.16.1.170         -# service name removed. For example, if your paste section name is[0m[37m
172.16.1.170         -# [pipeline:glance-registry-keystone], you would configure the flavor below[0m[37m
172.16.1.170         -# as 'keystone'.[0m[37m
172.16.1.170         -#flavor=[0m
172.16.1.170 [0m
172.16.1.170   * service[glance-registry] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[glance-registry][0m
172.16.1.170 [0m
172.16.1.170   * execute[glance-manage version_control 0] action run[0m (skipped due to only_if)[0m
172.16.1.170   * execute[glance-manage db_sync] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute glance-manage db_sync[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/glance/glance-registry-paste.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/glance/glance-registry-paste.ini] from 5646db to 3aa253[0m[37m
172.16.1.170         --- /etc/glance/glance-registry-paste.ini	2014-02-26 07:23:39.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1qxd6o4	2014-08-08 01:51:03.886999982 +0800[0m[37m
172.16.1.170         @@ -1,3 +1,9 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Default minimal pipeline[0m[37m
172.16.1.170          # Use this pipeline for no auth - DEFAULT[0m[37m
172.16.1.170          [pipeline:glance-registry][0m[37m
172.16.1.170          pipeline = unauthenticated-context registryapp[0m[37m
172.16.1.170         @@ -6,12 +12,6 @@[0m[37m
172.16.1.170          [pipeline:glance-registry-keystone][0m[37m
172.16.1.170          pipeline = authtoken context registryapp[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Use this pipeline for authZ only. This means that the registry will treat a[0m[37m
172.16.1.170         -# user as authenticated without making requests to keystone to reauthenticate[0m[37m
172.16.1.170         -# the user.[0m[37m
172.16.1.170         -[pipeline:glance-registry-trusted-auth][0m[37m
172.16.1.170         -pipeline = context registryapp[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          [app:registryapp][0m[37m
172.16.1.170          paste.app_factory = glance.registry.api.v1:API.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         @@ -23,3 +23,4 @@[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [filter:authtoken][0m[37m
172.16.1.170          paste.filter_factory = keystoneclient.middleware.auth_token:filter_factory[0m[37m
172.16.1.170         +delay_auth_decision = true[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * service[glance-registry] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[glance-registry][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-image::identity_registration[0m
172.16.1.170   * openstack-identity_register[Register Image Service] action create_service[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register Image Endpoint] action create_endpoint[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register Service Tenant] action create_tenant[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register glance User] action create_user[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Grant 'admin' Role to glance User for service Tenant] action grant_role[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-image::image_upload[0m
172.16.1.170   * package[python-glanceclient] action upgrade[0m (up to date)[0m
172.16.1.170   * openstack-image_image[Image setup for cirros] action upload[0m
172.16.1.170 [0m
172.16.1.170 Recipe: <Dynamically Defined Resource>[0m
172.16.1.170   * bash[Uploading AMI image cirros] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute "bash"  "/tmp/chef-script20140808-1737-19n6sfz"[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-image::image_upload[0m
172.16.1.170   * openstack-image_image[Image setup for precise] action upload[0m
172.16.1.170 [0m
172.16.1.170 Recipe: <Dynamically Defined Resource>[0m
172.16.1.170   * execute[Uploading QCOW2 image precise] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute glance --insecure --os-username glance --os-password openstack-image --os-tenant-name service --os-image-url http://172.16.1.170:9292 --os-auth-url http://172.16.1.170:5000/v2.0 image-create --name precise --is-public true --container-format bare --disk-format qcow2 --location http://172.16.0.1:8800/static/images/precise-server-cloudimg-amd64-disk1.img[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::nova-common[0m
172.16.1.170   * package[openstack-nova-common] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package openstack-nova-common from uninstalled to 2014.1-201402251728.ibm.el6.85[0m
172.16.1.170 [0m
172.16.1.170   * package[MySQL-python] action install[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[python-memcached] action install[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * directory[/etc/nova] action create[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '02755' to '0750'[0m[32m
172.16.1.170     - change owner from 'root' to 'nova'[0m[32m
172.16.1.170     - change group from 'root' to 'nova'[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/nova/nova.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/nova/nova.conf] from 02891a to 714b9e[0m[37m
172.16.1.170         --- /etc/nova/nova.conf	2014-02-26 07:28:16.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-ryvo2p	2014-08-08 01:51:45.476999964 +0800[0m[37m
172.16.1.170         @@ -1,3739 +1,340 @@[0m[37m
172.16.1.170         -[DEFAULT][0m[37m
172.16.1.170         -log_dir = /var/log/nova[0m[37m
172.16.1.170         -state_path = /var/lib/nova[0m[37m
172.16.1.170         -lock_path = /var/lib/nova/tmp[0m[37m
172.16.1.170         -dhcpbridge = /usr/bin/nova-dhcpbridge[0m[37m
172.16.1.170         -dhcpbridge_flagfile = /etc/nova/nova.conf[0m[37m
172.16.1.170         -injected_network_template = /usr/share/nova/interfaces.template[0m[37m
172.16.1.170         -network_manager = nova.network.manager.FlatDHCPManager[0m[37m
172.16.1.170         -sql_connection = mysql://nova:nova@localhost/nova[0m[37m
172.16.1.170         -compute_driver = libvirt.LibvirtDriver[0m[37m
172.16.1.170         -rpc_backend = nova.openstack.common.rpc.impl_qpid[0m[37m
172.16.1.170         -enabled_apis = osapi_compute,metadata[0m[37m
172.16.1.170         -verbose = true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in oslo.messaging[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use durable queues in amqp. (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/rabbit_durable_queues[0m[37m
172.16.1.170         -#amqp_durable_queues=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Auto-delete queues in amqp. (boolean value)[0m[37m
172.16.1.170         -#amqp_auto_delete=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Size of RPC connection pool (integer value)[0m[37m
172.16.1.170         -#rpc_conn_pool_size=30[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Modules of exceptions that are permitted to be recreatedupon[0m[37m
172.16.1.170         -# receiving exception data from an rpc call. (list value)[0m[37m
172.16.1.170         -#allowed_rpc_exception_modules=oslo.messaging.exceptions,nova.exception,cinder.exception,exceptions[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Qpid broker hostname (string value)[0m[37m
172.16.1.170         -#qpid_hostname=localhost[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Qpid broker port (integer value)[0m[37m
172.16.1.170         -#qpid_port=5672[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Qpid HA cluster host:port pairs (list value)[0m[37m
172.16.1.170         -#qpid_hosts=$qpid_hostname:$qpid_port[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Username for Qpid connection (string value)[0m[37m
172.16.1.170         -#qpid_username=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Password for Qpid connection (string value)[0m[37m
172.16.1.170         -#qpid_password=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Space separated list of SASL mechanisms to use for auth[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#qpid_sasl_mechanisms=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Seconds between connection keepalive heartbeats (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#qpid_heartbeat=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Transport to use, either 'tcp' or 'ssl' (string value)[0m[37m
172.16.1.170         -#qpid_protocol=tcp[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Disable Nagle algorithm (boolean value)[0m[37m
172.16.1.170         -#qpid_tcp_nodelay=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The qpid topology version to use.  Version 1 is what was[0m[37m
172.16.1.170         -# originally used by impl_qpid.  Version 2 includes some[0m[37m
172.16.1.170         -# backwards-incompatible changes that allow broker federation[0m[37m
172.16.1.170         -# to work.  Users should update to version 2 when they are[0m[37m
172.16.1.170         -# able to take everything down, as it requires a clean break.[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#qpid_topology_version=1[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# SSL version to use (valid only if SSL enabled). valid values[0m[37m
172.16.1.170         -# are TLSv1, SSLv23 and SSLv3. SSLv2 may be available on some[0m[37m
172.16.1.170         -# distributions (string value)[0m[37m
172.16.1.170         -#kombu_ssl_version=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL key file (valid only if SSL enabled) (string value)[0m[37m
172.16.1.170         -#kombu_ssl_keyfile=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL cert file (valid only if SSL enabled) (string value)[0m[37m
172.16.1.170         -#kombu_ssl_certfile=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL certification authority file (valid only if SSL enabled)[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#kombu_ssl_ca_certs=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RabbitMQ broker address where a single node is used[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#rabbit_host=localhost[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RabbitMQ broker port where a single node is used[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#rabbit_port=5672[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# RabbitMQ HA cluster host:port pairs (list value)[0m[37m
172.16.1.170         -#rabbit_hosts=$rabbit_host:$rabbit_port[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Connect over SSL for RabbitMQ (boolean value)[0m[37m
172.16.1.170         -#rabbit_use_ssl=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RabbitMQ userid (string value)[0m[37m
172.16.1.170         -#rabbit_userid=guest[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RabbitMQ password (string value)[0m[37m
172.16.1.170         -#rabbit_password=guest[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RabbitMQ virtual host (string value)[0m[37m
172.16.1.170         -#rabbit_virtual_host=/[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# How frequently to retry connecting with RabbitMQ (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#rabbit_retry_interval=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# How long to backoff for between retries when connecting to[0m[37m
172.16.1.170         -# RabbitMQ (integer value)[0m[37m
172.16.1.170         -#rabbit_retry_backoff=2[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of RabbitMQ connection retries. Default is 0[0m[37m
172.16.1.170         -# (infinite retry count) (integer value)[0m[37m
172.16.1.170         -#rabbit_max_retries=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use HA queues in RabbitMQ (x-ha-policy: all). If you change[0m[37m
172.16.1.170         -# this option, you must wipe the RabbitMQ database. (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#rabbit_ha_queues=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If passed, use a fake RabbitMQ provider (boolean value)[0m[37m
172.16.1.170         -#fake_rabbit=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ZeroMQ bind address. Should be a wildcard (*), an ethernet[0m[37m
172.16.1.170         -# interface, or IP. The "host" option should point or resolve[0m[37m
172.16.1.170         -# to this address. (string value)[0m[37m
172.16.1.170         -#rpc_zmq_bind_address=*[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# MatchMaker driver (string value)[0m[37m
172.16.1.170         -#rpc_zmq_matchmaker=oslo.messaging._drivers.matchmaker.MatchMakerLocalhost[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ZeroMQ receiver listening port (integer value)[0m[37m
172.16.1.170         -#rpc_zmq_port=9501[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of ZeroMQ contexts, defaults to 1 (integer value)[0m[37m
172.16.1.170         -#rpc_zmq_contexts=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of ingress messages to locally buffer per[0m[37m
172.16.1.170         -# topic. Default is unlimited. (integer value)[0m[37m
172.16.1.170         -#rpc_zmq_topic_backlog=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory for holding IPC sockets (string value)[0m[37m
172.16.1.170         -#rpc_zmq_ipc_dir=/var/run/openstack[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of this node. Must be a valid hostname, FQDN, or IP[0m[37m
172.16.1.170         -# address. Must match "host" option, if running Nova. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#rpc_zmq_host=nova[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Seconds to wait before a cast expires (TTL). Only supported[0m[37m
172.16.1.170         -# by impl_zmq. (integer value)[0m[37m
172.16.1.170         -#rpc_cast_timeout=30[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Heartbeat frequency (integer value)[0m[37m
172.16.1.170         -#matchmaker_heartbeat_freq=300[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Heartbeat time-to-live. (integer value)[0m[37m
172.16.1.170         -#matchmaker_heartbeat_ttl=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Host to locate redis (string value)[0m[37m
172.16.1.170         -#host=127.0.0.1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use this port to connect to redis host. (integer value)[0m[37m
172.16.1.170         -#port=6379[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Password for Redis server. (optional) (string value)[0m[37m
172.16.1.170         -#password=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Size of RPC greenthread pool (integer value)[0m[37m
172.16.1.170         -#rpc_thread_pool_size=64[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Driver or drivers to handle sending notifications (multi[0m[37m
172.16.1.170         -# valued)[0m[37m
172.16.1.170         -#notification_driver=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# AMQP topic used for OpenStack notifications (list value)[0m[37m
172.16.1.170         -# Deprecated group/name - [rpc_notifier2]/topics[0m[37m
172.16.1.170         -#notification_topics=notifications[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Seconds to wait for a response from a call (integer value)[0m[37m
172.16.1.170         -#rpc_response_timeout=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A URL representing the messaging driver to use and its full[0m[37m
172.16.1.170         -# configuration. If not set, we fall back to the rpc_backend[0m[37m
172.16.1.170         -# option and driver specific configuration. (string value)[0m[37m
172.16.1.170         -#transport_url=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The messaging driver to use, defaults to rabbit. Other[0m[37m
172.16.1.170         -# drivers include qpid and zmq. (string value)[0m[37m
172.16.1.170         -#rpc_backend=rabbit[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The default exchange under which topics are scoped. May be[0m[37m
172.16.1.170         -# overridden by an exchange name specified in the[0m[37m
172.16.1.170         -# transport_url option. (string value)[0m[37m
172.16.1.170         -#control_exchange=openstack[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.availability_zones[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The availability_zone to show internal services under[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#internal_service_availability_zone=internal[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Default compute node availability_zone (string value)[0m[37m
172.16.1.170         -#default_availability_zone=nova[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.crypto[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Filename of root CA (string value)[0m[37m
172.16.1.170         -#ca_file=cacert.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Filename of private key (string value)[0m[37m
172.16.1.170         -#key_file=private/cakey.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Filename of root Certificate Revocation List (string value)[0m[37m
172.16.1.170         -#crl_file=crl.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Where we keep our keys (string value)[0m[37m
172.16.1.170         -#keys_path=$state_path/keys[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Where we keep our root CA (string value)[0m[37m
172.16.1.170         -#ca_path=$state_path/CA[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Should we use a CA for each project? (boolean value)[0m[37m
172.16.1.170         -#use_project_ca=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Subject for certificate for users, %s for project, user,[0m[37m
172.16.1.170         -# timestamp (string value)[0m[37m
172.16.1.170         -#user_cert_subject=/C=US/ST=California/O=OpenStack/OU=NovaDev/CN=%.16s-%.16s-%s[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Subject for certificate for projects, %s for project,[0m[37m
172.16.1.170         -# timestamp (string value)[0m[37m
172.16.1.170         -#project_cert_subject=/C=US/ST=California/O=OpenStack/OU=NovaDev/CN=project-ca-%.16s-%s[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.exception[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Make exception message format errors fatal (boolean value)[0m[37m
172.16.1.170         -#fatal_exception_format_errors=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.netconf[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# IP address of this host (string value)[0m[37m
172.16.1.170         -#my_ip=10.0.0.1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of this node.  This can be an opaque identifier.  It is[0m[37m
172.16.1.170         -# not necessarily a hostname, FQDN, or IP address. However,[0m[37m
172.16.1.170         -# the node name must be valid within an AMQP key, and if using[0m[37m
172.16.1.170         -# ZeroMQ, a valid hostname, FQDN, or IP address (string value)[0m[37m
172.16.1.170         -#host=nova[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use IPv6 (boolean value)[0m[37m
172.16.1.170         -#use_ipv6=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.notifications[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set, send compute.instance.update notifications on[0m[37m
172.16.1.170         -# instance state changes.  Valid values are None for no[0m[37m
172.16.1.170         -# notifications, "vm_state" for notifications on VM state[0m[37m
172.16.1.170         -# changes, or "vm_and_task_state" for notifications on VM and[0m[37m
172.16.1.170         -# task state changes. (string value)[0m[37m
172.16.1.170         -#notify_on_state_change=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set, send api.fault notifications on caught exceptions in[0m[37m
172.16.1.170         -# the API service. (boolean value)[0m[37m
172.16.1.170         -#notify_api_faults=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default notification level for outgoing notifications[0m[37m
172.16.1.170         -# (string value)[0m
172.16.1.170 [37m
172.16.1.170         -#default_notification_level=INFO[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default publisher_id for outgoing notifications (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#default_publisher_id=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.paths[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory where the nova python module is installed (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#pybasedir=/usr/lib/python/site-packages[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory where nova binaries are installed (string value)[0m[37m
172.16.1.170         -#bindir=/usr/local/bin[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Top-level directory for maintaining nova's state (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#state_path=/var/lib/nova[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.policy[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# JSON file representing policy (string value)[0m[37m
172.16.1.170         -#policy_file=policy.json[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Rule checked when requested rule is not found (string value)[0m[37m
172.16.1.170         -#policy_default_rule=default[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.quota[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of instances allowed per project (integer value)[0m[37m
172.16.1.170         -#quota_instances=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of instance cores allowed per project (integer value)[0m[37m
172.16.1.170         -#quota_cores=20[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Megabytes of instance RAM allowed per project (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#quota_ram=51200[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of floating IPs allowed per project (integer value)[0m[37m
172.16.1.170         -#quota_floating_ips=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of fixed IPs allowed per project (this should be at[0m[37m
172.16.1.170         -# least the number of instances allowed) (integer value)[0m[37m
172.16.1.170         -#quota_fixed_ips=-1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of metadata items allowed per instance (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#quota_metadata_items=128[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of injected files allowed (integer value)[0m[37m
172.16.1.170         -#quota_injected_files=5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of bytes allowed per injected file (integer value)[0m[37m
172.16.1.170         -#quota_injected_file_content_bytes=10240[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of bytes allowed per injected file path (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#quota_injected_file_path_bytes=255[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of security groups per project (integer value)[0m[37m
172.16.1.170         -#quota_security_groups=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of security rules per security group (integer value)[0m[37m
172.16.1.170         -#quota_security_group_rules=20[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of key pairs per user (integer value)[0m[37m
172.16.1.170         -#quota_key_pairs=100[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds until a reservation expires (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#reservation_expire=86400[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Count of reservations until usage is refreshed (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#until_refresh=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds between subsequent usage refreshes[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#max_age=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default driver to use for quota checks (string value)[0m[37m
172.16.1.170         -#quota_driver=nova.quota.DbQuotaDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.service[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Seconds between nodes reporting state to datastore (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#report_interval=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable periodic tasks (boolean value)[0m[37m
172.16.1.170         -#periodic_enable=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Range of seconds to randomly delay when starting the[0m[37m
172.16.1.170         -# periodic task scheduler to reduce stampeding. (Disable by[0m[37m
172.16.1.170         -# setting to 0) (integer value)[0m[37m
172.16.1.170         -#periodic_fuzzy_delay=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A list of APIs to enable by default (list value)[0m[37m
172.16.1.170         -#enabled_apis=ec2,osapi_compute,metadata[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A list of APIs with enabled SSL (list value)[0m[37m
172.16.1.170         -#enabled_ssl_apis=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The IP address on which the EC2 API will listen. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#ec2_listen=0.0.0.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The port on which the EC2 API will listen. (integer value)[0m[37m
172.16.1.170         -#ec2_listen_port=8773[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of workers for EC2 API service. The default will be[0m[37m
172.16.1.170         -# equal to the number of CPUs available. (integer value)[0m[37m
172.16.1.170         -#ec2_workers=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The IP address on which the OpenStack API will listen.[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#osapi_compute_listen=0.0.0.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The port on which the OpenStack API will listen. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#osapi_compute_listen_port=8774[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of workers for OpenStack API service. The default[0m[37m
172.16.1.170         -# will be the number of CPUs available. (integer value)[0m[37m
172.16.1.170         -#osapi_compute_workers=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# OpenStack metadata service manager (string value)[0m[37m
172.16.1.170         -#metadata_manager=nova.api.manager.MetadataManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The IP address on which the metadata API will listen.[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#metadata_listen=0.0.0.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The port on which the metadata API will listen. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#metadata_listen_port=8775[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of workers for metadata service. The default will be[0m[37m
172.16.1.170         -# the number of CPUs available. (integer value)[0m[37m
172.16.1.170         -#metadata_workers=<None>[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Full class name for the Manager for compute (string value)[0m[37m
172.16.1.170         -#compute_manager=nova.compute.manager.ComputeManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Full class name for the Manager for console proxy (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#console_manager=nova.console.manager.ConsoleProxyManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Manager for console auth (string value)[0m[37m
172.16.1.170         -#consoleauth_manager=nova.consoleauth.manager.ConsoleAuthManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Full class name for the Manager for cert (string value)[0m[37m
172.16.1.170         -#cert_manager=nova.cert.manager.CertManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Full class name for the Manager for network (string value)[0m[37m
172.16.1.170         -#network_manager=nova.network.manager.VlanManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Full class name for the Manager for scheduler (string value)[0m[37m
172.16.1.170         -#scheduler_manager=nova.scheduler.manager.SchedulerManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum time since last check-in for up service (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#service_down_time=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.test[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# File name of clean sqlite db (string value)[0m[37m
172.16.1.170         -#sqlite_clean_db=clean.sqlite[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.utils[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to log monkey patching (boolean value)[0m[37m
172.16.1.170         -#monkey_patch=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# List of modules/decorators to monkey patch (list value)[0m[37m
172.16.1.170         -#monkey_patch_modules=nova.api.ec2.cloud:nova.notifications.notify_decorator,nova.compute.api:nova.notifications.notify_decorator[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Length of generated instance admin passwords (integer value)[0m[37m
172.16.1.170         -#password_length=12[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Time period to generate instance usages for.  Time period[0m[37m
172.16.1.170         -# must be hour, day, month or year (string value)[0m[37m
172.16.1.170         -#instance_usage_audit_period=month[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path to the rootwrap configuration file to use for running[0m[37m
172.16.1.170         -# commands as root (string value)[0m[37m
172.16.1.170         -#rootwrap_config=/etc/nova/rootwrap.conf[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Explicitly specify the temporary working directory (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#tempdir=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.wsgi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# File name for the paste.deploy config for nova-api (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#api_paste_config=api-paste.ini[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A python format string that is used as the template to[0m[37m
172.16.1.170         -# generate log lines. The following values can be formatted[0m[37m
172.16.1.170         -# into it: client_ip, date_time, request_line, status_code,[0m[37m
172.16.1.170         -# body_length, wall_seconds. (string value)[0m[37m
172.16.1.170         -#wsgi_log_format=%(client_ip)s "%(request_line)s" status: %(status_code)s len: %(body_length)s time: %(wall_seconds).7f[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# CA certificate file to use to verify connecting clients[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#ssl_ca_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL certificate of API server (string value)[0m[37m
172.16.1.170         -#ssl_cert_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL private key of API server (string value)[0m
172.16.1.170 [37m
172.16.1.170         -#ssl_key_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Sets the value of TCP_KEEPIDLE in seconds for each server[0m[37m
172.16.1.170         -# socket. Not supported on OS X. (integer value)[0m[37m
172.16.1.170         -#tcp_keepidle=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Size of the pool of greenthreads used by wsgi (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#wsgi_default_pool_size=1000[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum line size of message headers to be accepted.[0m[37m
172.16.1.170         -# max_header_line may need to be increased when using large[0m[37m
172.16.1.170         -# tokens (typically those generated by the Keystone v3 API[0m[37m
172.16.1.170         -# with big service catalogs). (integer value)[0m[37m
172.16.1.170         -#max_header_line=16384[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.auth[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to use per-user rate limiting for the api. This[0m[37m
172.16.1.170         -# option is only used by v2 api. Rate limiting is removed from[0m[37m
172.16.1.170         -# v3 api. (boolean value)[0m[37m
172.16.1.170         -#api_rate_limit=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The strategy to use for auth: noauth or keystone. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#auth_strategy=noauth[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Treat X-Forwarded-For as the canonical remote address. Only[0m[37m
172.16.1.170         -# enable this if you have a sanitizing proxy. (boolean value)[0m[37m
172.16.1.170         -#use_forwarded_for=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.ec2[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of failed auths before lockout. (integer value)[0m[37m
172.16.1.170         -#lockout_attempts=5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of minutes to lockout if triggered. (integer value)[0m[37m
172.16.1.170         -#lockout_minutes=15[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of minutes for lockout window. (integer value)[0m[37m
172.16.1.170         -#lockout_window=15[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# URL to get token from ec2 request. (string value)[0m[37m
172.16.1.170         -#keystone_ec2_url=http://localhost:5000/v2.0/ec2tokens[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Return the IP address as private dns hostname in describe[0m[37m
172.16.1.170         -# instances (boolean value)[0m[37m
172.16.1.170         -#ec2_private_dns_show_ip=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Validate security group names according to EC2 specification[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#ec2_strict_validation=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Time in seconds before ec2 timestamp expires (integer value)[0m[37m
172.16.1.170         -#ec2_timestamp_expiry=300[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.ec2.cloud[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The IP address of the EC2 API server (string value)[0m[37m
172.16.1.170         -#ec2_host=$my_ip[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The internal IP address of the EC2 API server (string value)[0m[37m
172.16.1.170         -#ec2_dmz_host=$my_ip[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The port of the EC2 API server (integer value)[0m[37m
172.16.1.170         -#ec2_port=8773[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# The protocol to use when connecting to the EC2 API server[0m[37m
172.16.1.170         -# (http, https) (string value)[0m[37m
172.16.1.170         -#ec2_scheme=http[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The path prefix used to call the ec2 API server (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#ec2_path=/services/Cloud[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# List of region=fqdn pairs separated by commas (list value)[0m[37m
172.16.1.170         -#region_list=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.metadata.base[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# List of metadata versions to skip placing into the config[0m[37m
172.16.1.170         -# drive (string value)[0m[37m
172.16.1.170         -#config_drive_skip_versions=1.0 2007-01-19 2007-03-01 2007-08-29 2007-10-10 2007-12-15 2008-02-01 2008-09-01[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Driver to use for vendor data (string value)[0m[37m
172.16.1.170         -#vendordata_driver=nova.api.metadata.vendordata_json.JsonFileVendorData[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.metadata.handler[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set flag to indicate Neutron will proxy metadata requests[0m[37m
172.16.1.170         -# and resolve instance ids. (boolean value)[0m[37m
172.16.1.170         -#service_neutron_metadata_proxy=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Shared secret to validate proxies Neutron metadata requests[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#neutron_metadata_proxy_shared_secret=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.metadata.vendordata_json[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# File to load json formatted vendor data from (string value)[0m[37m
172.16.1.170         -#vendordata_jsonfile_path=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.openstack.common[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The maximum number of items returned in a single response[0m[37m
172.16.1.170         -# from a collection resource (integer value)[0m[37m
172.16.1.170         -#osapi_max_limit=1000[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Base URL that will be presented to users in links to the[0m[37m
172.16.1.170         -# OpenStack Compute API (string value)[0m[37m
172.16.1.170         -#osapi_compute_link_prefix=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Base URL that will be presented to users in links to glance[0m[37m
172.16.1.170         -# resources (string value)[0m[37m
172.16.1.170         -#osapi_glance_link_prefix=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.openstack.compute[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Permit instance snapshot operations. (boolean value)[0m[37m
172.16.1.170         -#allow_instance_snapshots=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.openstack.compute.contrib[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Specify list of extensions to load when using[0m[37m
172.16.1.170         -# osapi_compute_extension option with[0m[37m
172.16.1.170         -# nova.api.openstack.compute.contrib.select_extensions (list[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#osapi_compute_ext_list=[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.openstack.compute.contrib.fping[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Full path to fping. (string value)[0m[37m
172.16.1.170         -#fping_path=/usr/sbin/fping[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.openstack.compute.contrib.os_tenant_networks[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enables or disables quota checking for tenant networks[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#enable_network_quota=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Control for checking for default networks (string value)[0m[37m
172.16.1.170         -#use_neutron_default_nets=False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default tenant id when creating neutron networks (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#neutron_default_tenant_id=default[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.openstack.compute.extensions[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# osapi compute extension to load (multi valued)[0m[37m
172.16.1.170         -#osapi_compute_extension=nova.api.openstack.compute.contrib.standard_extensions[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.openstack.compute.plugins.v3.hide_server_addresses[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# List of instance states that should hide network info (list[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#osapi_hide_server_address_states=building[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.openstack.compute.servers[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enables returning of the instance password by the relevant[0m[37m
172.16.1.170         -# server API calls such as create, rebuild or rescue, If the[0m[37m
172.16.1.170         -# hypervisor does not support password injection then the[0m[37m
172.16.1.170         -# password returned will not be correct (boolean value)[0m[37m
172.16.1.170         -#enable_instance_password=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.sizelimit[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The maximum body size per each osapi request(bytes) (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#osapi_max_request_body_size=114688[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cert.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The topic cert nodes listen on (string value)[0m[37m
172.16.1.170         -#cert_topic=cert[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cloudpipe.pipelib[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Image ID used when starting up a cloudpipe vpn server[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#vpn_image_id=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Flavor for vpn instances (string value)[0m[37m
172.16.1.170         -#vpn_flavor=m1.tiny[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Template for cloudpipe instance boot script (string value)[0m[37m
172.16.1.170         -#boot_script_template=$pybasedir/nova/cloudpipe/bootscript.template[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Network to push into openvpn config (string value)[0m[37m
172.16.1.170         -#dmz_net=10.0.0.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Netmask to push into openvpn config (string value)[0m[37m
172.16.1.170         -#dmz_mask=255.255.255.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Suffix to add to project name for vpn key and secgroups[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#vpn_key_suffix=-vpn[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cmd.novnc[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Record sessions to FILE.[session_number] (boolean value)[0m[37m
172.16.1.170         -#record=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Become a daemon (background process) (boolean value)[0m[37m
172.16.1.170         -#daemon=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Disallow non-encrypted connections (boolean value)[0m[37m
172.16.1.170         -#ssl_only=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Source is ipv6 (boolean value)[0m[37m
172.16.1.170         -#source_is_ipv6=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL certificate file (string value)[0m[37m
172.16.1.170         -#cert=self.pem[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# SSL key file (if separate from cert) (string value)[0m[37m
172.16.1.170         -#key=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Run webserver on same port. Serve files from DIR. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#web=/usr/share/spice-html5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cmd.novncproxy[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Host on which to listen for incoming requests (string value)[0m[37m
172.16.1.170         -#novncproxy_host=0.0.0.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Port on which to listen for incoming requests (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#novncproxy_port=6080[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cmd.spicehtml5proxy[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Host on which to listen for incoming requests (string value)[0m[37m
172.16.1.170         -#spicehtml5proxy_host=0.0.0.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Port on which to listen for incoming requests (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#spicehtml5proxy_port=6082[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.compute.api[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allow destination machine to match source for resize. Useful[0m[37m
172.16.1.170         -# when testing in single-host environments. (boolean value)[0m[37m
172.16.1.170         -#allow_resize_to_same_host=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allow migrate machine to the same host. Useful when testing[0m[37m
172.16.1.170         -# in single-host environments. (boolean value)[0m
172.16.1.170 [37m
172.16.1.170         -#allow_migrate_to_same_host=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Availability zone to use when user doesn't specify one[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#default_schedule_zone=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# These are image properties which a snapshot should not[0m[37m
172.16.1.170         -# inherit from an instance (list value)[0m[37m
172.16.1.170         -#non_inheritable_image_properties=cache_in_nova,bittorrent[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Kernel image that indicates not to use a kernel, but to use[0m[37m
172.16.1.170         -# a raw disk image instead (string value)[0m[37m
172.16.1.170         -#null_kernel=nokernel[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# When creating multiple instances with a single request using[0m[37m
172.16.1.170         -# the os-multiple-create API extension, this template will be[0m[37m
172.16.1.170         -# used to build the display name for each instance. The[0m[37m
172.16.1.170         -# benefit is that the instances end up with different[0m[37m
172.16.1.170         -# hostnames. To restore legacy behavior of every instance[0m[37m
172.16.1.170         -# having the same name, set this option to "%(name)s".  Valid[0m[37m
172.16.1.170         -# keys for the template are: name, uuid, count. (string value)[0m[37m
172.16.1.170         -#multi_instance_display_name_template=%(name)s-%(uuid)s[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Specifies resize behavior and whether to 'allow', 'forbid'[0m[37m
172.16.1.170         -# (default) or 'require' the source host to be considered as[0m[37m
172.16.1.170         -# the target host. Setting to 'allow' is useful when testing[0m[37m
172.16.1.170         -# in single-host environments or for hypervisors that support[0m[37m
172.16.1.170         -# live updates. Note that allow_resize_to_same_host will take[0m[37m
172.16.1.170         -# precedence. (string value)[0m[37m
172.16.1.170         -#resize_to_same_host=forbid[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of devices that will result in a local image[0m[37m
172.16.1.170         -# being created on the hypervisor node. Setting this to 0[0m[37m
172.16.1.170         -# means nova will allow only boot from volume. A negative[0m[37m
172.16.1.170         -# number means unlimited. (integer value)[0m[37m
172.16.1.170         -#max_local_block_devices=3[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.compute.flavors[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default flavor to use for the EC2 API only. The Nova API[0m[37m
172.16.1.170         -# does not support a default flavor. (string value)[0m[37m
172.16.1.170         -#default_flavor=m1.small[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.compute.ibm.configuration_strategy[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# configuration strategies, format is class-ids separated by[0m[37m
172.16.1.170         -# spaces. For example, nova.compute.ibm.configuration_strategy[0m[37m
172.16.1.170         -# _ovf.ConfigurationStrategy (string value)[0m[37m
172.16.1.170         -#configuration_strategies=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.compute.manager[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Console proxy host to use to connect to instances on this[0m[37m
172.16.1.170         -# host. (string value)[0m[37m
172.16.1.170         -#console_host=nova[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of network to use to set access IPs for instances[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#default_access_ip_network_name=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to batch up the application of IPTables rules during[0m[37m
172.16.1.170         -# a host restart and apply all at the end of the init phase[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#defer_iptables_apply=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Where instances are stored on disk (string value)[0m[37m
172.16.1.170         -#instances_path=$state_path/instances[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Generate periodic compute.instance.exists notifications[0m
172.16.1.170 [37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#instance_usage_audit=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of 1 second retries needed in live_migration (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#live_migration_retry_count=30[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to start guests that were running before the host[0m[37m
172.16.1.170         -# rebooted (boolean value)[0m[37m
172.16.1.170         -#resume_guests_state_on_host_boot=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of times to retry network allocation on failures[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#network_allocate_retries=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The number of times to attempt to reap an instance's files.[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#maximum_instance_delete_attempts=5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval to pull network bandwidth usage info. Not supported[0m[37m
172.16.1.170         -# on all hypervisors. Set to 0 to disable. (integer value)[0m[37m
172.16.1.170         -#bandwidth_poll_interval=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval to sync power states between the database and the[0m[37m
172.16.1.170         -# hypervisor (integer value)[0m[37m
172.16.1.170         -#sync_power_state_interval=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds between instance info_cache self healing[0m[37m
172.16.1.170         -# updates (integer value)[0m[37m
172.16.1.170         -#heal_instance_info_cache_interval=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval in seconds for reclaiming deleted instances[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#reclaim_instance_interval=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval in seconds for gathering volume usages (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#volume_usage_poll_interval=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval in seconds for polling shelved instances to offload[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#shelved_poll_interval=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Time in seconds before a shelved instance is eligible for[0m[37m
172.16.1.170         -# removing from a host.  -1 never offload, 0 offload when[0m[37m
172.16.1.170         -# shelved (integer value)[0m[37m
172.16.1.170         -#shelved_offload_time=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval in seconds for retrying failed instance file[0m[37m
172.16.1.170         -# deletes (integer value)[0m[37m
172.16.1.170         -#instance_delete_interval=300[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Action to take if a running deleted instance is[0m[37m
172.16.1.170         -# detected.Valid options are 'noop', 'log', 'shutdown', or[0m[37m
172.16.1.170         -# 'reap'. Set to 'noop' to take no action. (string value)[0m[37m
172.16.1.170         -#running_deleted_instance_action=reap[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds to wait between runs of the cleanup task.[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#running_deleted_instance_poll_interval=1800[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds after being deleted when a running[0m[37m
172.16.1.170         -# instance should be considered eligible for cleanup. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#running_deleted_instance_timeout=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Automatically hard reboot an instance if it has been stuck[0m[37m
172.16.1.170         -# in a rebooting state longer than N seconds. Set to 0 to[0m[37m
172.16.1.170         -# disable. (integer value)[0m[37m
172.16.1.170         -#reboot_timeout=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Amount of time in seconds an instance can be in BUILD before[0m[37m
172.16.1.170         -# going into ERROR status.Set to 0 to disable. (integer value)[0m[37m
172.16.1.170         -#instance_build_timeout=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Automatically unrescue an instance after N seconds. Set to 0[0m
172.16.1.170 [37m
172.16.1.170         -# to disable. (integer value)[0m[37m
172.16.1.170         -#rescue_timeout=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Automatically confirm resizes after N seconds. Set to 0 to[0m[37m
172.16.1.170         -# disable. (integer value)[0m[37m
172.16.1.170         -#resize_confirm_window=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.compute.monitors[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Monitor classes available to the compute which may be[0m[37m
172.16.1.170         -# specified more than once. (multi valued)[0m[37m
172.16.1.170         -#compute_available_monitors=nova.compute.monitors.all_monitors[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A list of monitors that can be used for getting compute[0m[37m
172.16.1.170         -# metrics. (list value)[0m[37m
172.16.1.170         -#compute_monitors=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.compute.resource_tracker[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Amount of disk in MB to reserve for the host (integer value)[0m[37m
172.16.1.170         -#reserved_host_disk_mb=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Amount of memory in MB to reserve for the host (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#reserved_host_memory_mb=512[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Class that will manage stats for the local compute host[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#compute_stats_class=nova.compute.stats.Stats[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.compute.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The topic compute nodes listen on (string value)[0m[37m
172.16.1.170         -#compute_topic=compute[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.conductor.tasks.live_migrate[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of times to retry live-migration before failing. If[0m[37m
172.16.1.170         -# == -1, try until out of hosts. If == 0, only try once, no[0m[37m
172.16.1.170         -# retries. (integer value)[0m[37m
172.16.1.170         -#migrate_max_retries=-1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.console.manager[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Driver to use for the console proxy (string value)[0m[37m
172.16.1.170         -#console_driver=nova.console.xvp.XVPConsoleProxy[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Stub calls to compute worker for tests (boolean value)[0m[37m
172.16.1.170         -#stub_compute=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Publicly visible name for this console host (string value)[0m[37m
172.16.1.170         -#console_public_hostname=nova[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.console.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The topic console proxy nodes listen on (string value)[0m[37m
172.16.1.170         -#console_topic=console[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.console.vmrc[0m
172.16.1.170 [37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Port for VMware VMRC connections (integer value)[0m[37m
172.16.1.170         -#console_vmrc_port=443[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of retries for retrieving VMRC information (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#console_vmrc_error_retries=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.console.xvp[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# XVP conf template (string value)[0m[37m
172.16.1.170         -#console_xvp_conf_template=$pybasedir/nova/console/xvp.conf.template[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Generated XVP conf file (string value)[0m[37m
172.16.1.170         -#console_xvp_conf=/etc/xvp.conf[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# XVP master process pid file (string value)[0m[37m
172.16.1.170         -#console_xvp_pid=/var/run/xvp.pid[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# XVP log file (string value)[0m[37m
172.16.1.170         -#console_xvp_log=/var/log/xvp.log[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Port for XVP to multiplex VNC connections on (integer value)[0m[37m
172.16.1.170         -#console_xvp_multiplex_port=5900[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.consoleauth[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The topic console auth proxy nodes listen on (string value)[0m[37m
172.16.1.170         -#consoleauth_topic=consoleauth[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.consoleauth.manager[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# How many seconds before deleting tokens (integer value)[0m[37m
172.16.1.170         -#console_token_ttl=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.db.api[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Services to be added to the available pool on create[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#enable_new_services=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Template string to be used to generate instance names[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#instance_name_template=instance-%08x[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Template string to be used to generate snapshot names[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#snapshot_name_template=snapshot-%s[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.db.base[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The driver to use for database access (string value)[0m[37m
172.16.1.170         -#db_driver=nova.db[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.db.sqlalchemy.api[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# When set, compute API will consider duplicate hostnames[0m[37m
172.16.1.170         -# invalid within the specified scope, regardless of case.[0m[37m
172.16.1.170         -# Should be empty, "project" or "global". (string value)[0m[37m
172.16.1.170         -#osapi_compute_unique_server_name_scope=[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.image.glance[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default glance hostname or IP address (string value)[0m[37m
172.16.1.170         -#glance_host=$my_ip[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default glance port (integer value)[0m[37m
172.16.1.170         -#glance_port=9292[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default protocol to use when connecting to glance. Set to[0m[37m
172.16.1.170         -# https for SSL. (string value)[0m[37m
172.16.1.170         -#glance_protocol=http[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A list of the glance api servers available to nova. Prefix[0m[37m
172.16.1.170         -# with https:// for ssl-based glance api servers.[0m[37m
172.16.1.170         -# ([hostname|ip]:port) (list value)[0m[37m
172.16.1.170         -#glance_api_servers=$glance_host:$glance_port[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allow to perform insecure SSL (https) requests to glance[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#glance_api_insecure=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of retries when downloading an image from glance[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#glance_num_retries=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A list of url scheme that can be downloaded directly via the[0m[37m
172.16.1.170         -# direct_url.  Currently supported schemes: [file]. (list[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#allowed_direct_url_schemes=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.image.s3[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Parent directory for tempdir used for image decryption[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#image_decryption_dir=/tmp[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Hostname or IP for OpenStack to use when accessing the S3[0m[37m
172.16.1.170         -# api (string value)[0m[37m
172.16.1.170         -#s3_host=$my_ip[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Port used when accessing the S3 api (integer value)[0m[37m
172.16.1.170         -#s3_port=3333[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Access key to use for S3 server for images (string value)[0m[37m
172.16.1.170         -#s3_access_key=notchecked[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Secret key to use for S3 server for images (string value)[0m[37m
172.16.1.170         -#s3_secret_key=notchecked[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to use SSL when talking to S3 (boolean value)[0m[37m
172.16.1.170         -#s3_use_ssl=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to affix the tenant id to the access key when[0m[37m
172.16.1.170         -# downloading from S3 (boolean value)[0m[37m
172.16.1.170         -#s3_affix_tenant=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.ipv6.api[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Backend to use for IPv6 generation (string value)[0m[37m
172.16.1.170         -#ipv6_backend=rfc2462[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.network[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The full class name of the network API class to use (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#network_api_class=nova.network.api.API[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.network.driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Driver to use for network creation (string value)[0m[37m
172.16.1.170         -#network_driver=nova.network.linux_net[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.network.floating_ips[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default pool for floating IPs (string value)[0m[37m
172.16.1.170         -#default_floating_pool=nova[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Autoassigning floating IP to VM (boolean value)[0m[37m
172.16.1.170         -#auto_assign_floating_ip=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Full class name for the DNS Manager for floating IPs (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#floating_ip_dns_manager=nova.network.noop_dns_driver.NoopDNSDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Full class name for the DNS Manager for instance IPs (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#instance_dns_manager=nova.network.noop_dns_driver.NoopDNSDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Full class name for the DNS Zone for instance IPs (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#instance_dns_domain=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.network.ldapdns[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# URL for LDAP server which will store DNS entries (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#ldap_dns_url=ldap://ldap.example.com:389[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# User for LDAP DNS (string value)[0m[37m
172.16.1.170         -#ldap_dns_user=uid=admin,ou=people,dc=example,dc=org[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Password for LDAP DNS (string value)[0m[37m
172.16.1.170         -#ldap_dns_password=password[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Hostmaster for LDAP DNS driver Statement of Authority[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#ldap_dns_soa_hostmaster=hostmaster@example.org[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# DNS Servers for LDAP DNS driver (multi valued)[0m[37m
172.16.1.170         -#ldap_dns_servers=dns.example.org[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Base DN for DNS entries in LDAP (string value)[0m[37m
172.16.1.170         -#ldap_dns_base_dn=ou=hosts,dc=example,dc=org[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Refresh interval (in seconds) for LDAP DNS driver Statement[0m[37m
172.16.1.170         -# of Authority (string value)[0m[37m
172.16.1.170         -#ldap_dns_soa_refresh=1800[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Retry interval (in seconds) for LDAP DNS driver Statement of[0m[37m
172.16.1.170         -# Authority (string value)[0m[37m
172.16.1.170         -#ldap_dns_soa_retry=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Expiry interval (in seconds) for LDAP DNS driver Statement[0m[37m
172.16.1.170         -# of Authority (string value)[0m[37m
172.16.1.170         -#ldap_dns_soa_expiry=86400[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Minimum interval (in seconds) for LDAP DNS driver Statement[0m[37m
172.16.1.170         -# of Authority (string value)[0m[37m
172.16.1.170         -#ldap_dns_soa_minimum=7200[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.network.linux_net[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of flagfiles for dhcpbridge (multi valued)[0m[37m
172.16.1.170         -#dhcpbridge_flagfile=/etc/nova/nova-dhcpbridge.conf[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location to keep network config files (string value)[0m[37m
172.16.1.170         -#networks_path=$state_path/networks[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interface for public IP addresses (string value)[0m[37m
172.16.1.170         -#public_interface=eth0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# MTU setting for network interface (integer value)[0m[37m
172.16.1.170         -#network_device_mtu=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of nova-dhcpbridge (string value)[0m[37m
172.16.1.170         -#dhcpbridge=$bindir/nova-dhcpbridge[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Public IP of network host (string value)[0m[37m
172.16.1.170         -#routing_source_ip=$my_ip[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Lifetime of a DHCP lease in seconds (integer value)[0m[37m
172.16.1.170         -#dhcp_lease_time=120[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set, uses specific DNS server for dnsmasq. Can be[0m[37m
172.16.1.170         -# specified multiple times. (multi valued)[0m[37m
172.16.1.170         -#dns_server=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set, uses the dns1 and dns2 from the network ref. as dns[0m[37m
172.16.1.170         -# servers. (boolean value)[0m[37m
172.16.1.170         -#use_network_dns_servers=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A list of dmz range that should be accepted (list value)[0m[37m
172.16.1.170         -#dmz_cidr=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Traffic to this range will always be snatted to the fallback[0m[37m
172.16.1.170         -# ip, even if it would normally be bridged out of the node.[0m[37m
172.16.1.170         -# Can be specified multiple times. (multi valued)[0m[37m
172.16.1.170         -#force_snat_range=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Override the default dnsmasq settings with this file (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#dnsmasq_config_file=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Driver used to create ethernet devices. (string value)[0m[37m
172.16.1.170         -#linuxnet_interface_driver=nova.network.linux_net.LinuxBridgeInterfaceDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of Open vSwitch bridge used with linuxnet (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#linuxnet_ovs_integration_bridge=br-int[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Send gratuitous ARPs for HA setup (boolean value)[0m[37m
172.16.1.170         -#send_arp_for_ha=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Send this many gratuitous ARPs for HA setup (integer value)[0m[37m
172.16.1.170         -#send_arp_for_ha_count=3[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use single default gateway. Only first nic of vm will get[0m[37m
172.16.1.170         -# default gateway from dhcp server (boolean value)[0m[37m
172.16.1.170         -#use_single_default_gateway=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# An interface that bridges can forward to. If this is set to[0m[37m
172.16.1.170         -# all then all traffic will be forwarded. Can be specified[0m[37m
172.16.1.170         -# multiple times. (multi valued)[0m[37m
172.16.1.170         -#forward_bridge_interface=all[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The IP address for the metadata API server (string value)[0m[37m
172.16.1.170         -#metadata_host=$my_ip[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The port for the metadata API port (integer value)[0m[37m
172.16.1.170         -#metadata_port=8775[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Regular expression to match iptables rule that should always[0m[37m
172.16.1.170         -# be on the top. (string value)[0m[37m
172.16.1.170         -#iptables_top_regex=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Regular expression to match iptables rule that should always[0m[37m
172.16.1.170         -# be on the bottom. (string value)[0m[37m
172.16.1.170         -#iptables_bottom_regex=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The table that iptables to jump to when a packet is to be[0m[37m
172.16.1.170         -# dropped. (string value)[0m[37m
172.16.1.170         -#iptables_drop_action=DROP[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Amount of time, in seconds, that ovs_vsctl should wait for a[0m[37m
172.16.1.170         -# response from the database. 0 is to wait forever. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#ovs_vsctl_timeout=120[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If passed, use fake network devices and addresses (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#fake_network=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.network.manager[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Bridge for simple network instances (string value)[0m[37m
172.16.1.170         -#flat_network_bridge=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# DNS server for simple network (string value)[0m[37m
172.16.1.170         -#flat_network_dns=8.8.4.4[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to attempt to inject network setup into guest[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#flat_injected=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# FlatDhcp will bridge into this interface if set (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#flat_interface=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# First VLAN for private networks (integer value)[0m[37m
172.16.1.170         -#vlan_start=100[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# VLANs will bridge into this interface if set (string value)[0m[37m
172.16.1.170         -#vlan_interface=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of networks to support (integer value)[0m[37m
172.16.1.170         -#num_networks=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Public IP for the cloudpipe VPN servers (string value)[0m[37m
172.16.1.170         -#vpn_ip=$my_ip[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# First Vpn port for private networks (integer value)[0m[37m
172.16.1.170         -#vpn_start=1000[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of addresses in each private subnet (integer value)[0m[37m
172.16.1.170         -#network_size=256[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Fixed IPv6 address block (string value)[0m[37m
172.16.1.170         -#fixed_range_v6=fd00::/48[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default IPv4 gateway (string value)[0m[37m
172.16.1.170         -#gateway=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default IPv6 gateway (string value)[0m[37m
172.16.1.170         -#gateway_v6=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of addresses reserved for vpn clients (integer value)[0m[37m
172.16.1.170         -#cnt_vpn_clients=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Seconds after which a deallocated IP is disassociated[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#fixed_ip_disassociate_timeout=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of attempts to create unique mac address (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#create_unique_mac_address_attempts=5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If True, skip using the queue and make local calls (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#fake_call=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If True, unused gateway devices (VLAN and bridge) are[0m[37m
172.16.1.170         -# deleted in VLAN network mode with multi hosted networks[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#teardown_unused_network_gateway=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If True, send a dhcp release on instance termination[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#force_dhcp_release=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If True in multi_host mode, all compute hosts share the same[0m[37m
172.16.1.170         -# dhcp address. The same IP address used for DHCP will be[0m[37m
172.16.1.170         -# added on each nova-network node which is only visible to the[0m[37m
172.16.1.170         -# vms on the same host. (boolean value)[0m[37m
172.16.1.170         -#share_dhcp_address=false[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If True, when a DNS entry must be updated, it sends a fanout[0m[37m
172.16.1.170         -# cast to all network hosts to update their DNS entries in[0m[37m
172.16.1.170         -# multi host mode (boolean value)[0m[37m
172.16.1.170         -#update_dns_entries=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds to wait between runs of updates to DNS[0m[37m
172.16.1.170         -# entries. (integer value)[0m[37m
172.16.1.170         -#dns_update_periodic_interval=-1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Domain to use for building the hostnames (string value)[0m[37m
172.16.1.170         -#dhcp_domain=novalocal[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Indicates underlying L3 management library (string value)[0m[37m
172.16.1.170         -#l3_lib=nova.network.l3.LinuxNetL3[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.network.neutronv2.api[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# URL for connecting to neutron (string value)[0m[37m
172.16.1.170         -#neutron_url=http://127.0.0.1:9696[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Timeout value for connecting to neutron in seconds (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#neutron_url_timeout=30[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Username for connecting to neutron in admin context (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#neutron_admin_username=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Password for connecting to neutron in admin context (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#neutron_admin_password=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Tenant name for connecting to neutron in admin context[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#neutron_admin_tenant_name=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Region name for connecting to neutron in admin context[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#neutron_region_name=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Authorization URL for connecting to neutron in admin context[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#neutron_admin_auth_url=http://localhost:5000/v2.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set, ignore any SSL validation issues (boolean value)[0m[37m
172.16.1.170         -#neutron_api_insecure=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Authorization strategy for connecting to neutron in admin[0m[37m
172.16.1.170         -# context (string value)[0m[37m
172.16.1.170         -#neutron_auth_strategy=keystone[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of Integration Bridge used by Open vSwitch (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#neutron_ovs_bridge=br-int[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds before querying neutron for extensions[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#neutron_extension_sync_interval=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of CA certificates file to use for neutron client[0m[37m
172.16.1.170         -# requests. (string value)[0m[37m
172.16.1.170         -#neutron_ca_certificates_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.network.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The topic network nodes listen on (string value)[0m[37m
172.16.1.170         -#network_topic=network[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default value for multi_host in networks. Also, if set, some[0m[37m
172.16.1.170         -# rpc network calls will be sent directly to host. (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#multi_host=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.network.security_group.openstack_driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The full class name of the security API class (string value)[0m[37m
172.16.1.170         -#security_group_api=nova[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.objectstore.s3server[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path to S3 buckets (string value)[0m[37m
172.16.1.170         -#buckets_path=$state_path/buckets[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# IP address for S3 API to listen (string value)[0m[37m
172.16.1.170         -#s3_listen=0.0.0.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Port for S3 API to listen (integer value)[0m[37m
172.16.1.170         -#s3_listen_port=3333[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.openstack.common.db.sqlalchemy.session[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The file name to use with SQLite (string value)[0m[37m
172.16.1.170         -#sqlite_db=nova.sqlite[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If True, SQLite uses synchronous mode (boolean value)[0m[37m
172.16.1.170         -#sqlite_synchronous=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.openstack.common.eventlet_backdoor[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable eventlet backdoor. Acceptable values are 0, <port>[0m[37m
172.16.1.170         -# and <start>:<end>, where 0 results in listening on a random[0m[37m
172.16.1.170         -# tcp port number, <port> results in listening on the[0m[37m
172.16.1.170         -# specified port number and not enabling backdoorif it is in[0m[37m
172.16.1.170         -# use and <start>:<end> results in listening on the smallest[0m[37m
172.16.1.170         -# unused port number within the specified range of port[0m[37m
172.16.1.170         -# numbers. The chosen port is displayed in the service's log[0m[37m
172.16.1.170         -# file. (string value)[0m[37m
172.16.1.170         -#backdoor_port=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.openstack.common.lockutils[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to disable inter-process locks (boolean value)[0m[37m
172.16.1.170         -#disable_process_locking=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory to use for lock files. (string value)[0m[37m
172.16.1.170         -#lock_path=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.openstack.common.log[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Print debugging output (set logging level to DEBUG instead[0m[37m
172.16.1.170         -# of default WARNING level). (boolean value)[0m[37m
172.16.1.170         -#debug=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Print more verbose output (set logging level to INFO instead[0m[37m
172.16.1.170         -# of default WARNING level). (boolean value)[0m[37m
172.16.1.170         -#verbose=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Log output to standard error (boolean value)[0m[37m
172.16.1.170         -#use_stderr=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# format string to use for log messages with context (string[0m
172.16.1.170 [37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#logging_context_format_string=%(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [%(request_id)s %(user)s %(tenant)s] %(instance)s%(message)s[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# format string to use for log messages without context[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#logging_default_format_string=%(asctime)s.%(msecs)03d %(process)d %(levelname)s %(name)s [-] %(instance)s%(message)s[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# data to append to log format when level is DEBUG (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#logging_debug_format_suffix=%(funcName)s %(pathname)s:%(lineno)d[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# prefix each line of exception output with this format[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#logging_exception_prefix=%(asctime)s.%(msecs)03d %(process)d TRACE %(name)s %(instance)s[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# list of logger=LEVEL pairs (list value)[0m[37m
172.16.1.170         -#default_log_levels=amqp=WARN,amqplib=WARN,boto=WARN,qpid=WARN,sqlalchemy=WARN,suds=INFO,iso8601=WARN[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# publish error events (boolean value)[0m[37m
172.16.1.170         -#publish_errors=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# make deprecations fatal (boolean value)[0m[37m
172.16.1.170         -#fatal_deprecations=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If an instance is passed with the log message, format it[0m[37m
172.16.1.170         -# like this (string value)[0m[37m
172.16.1.170         -#instance_format="[instance: %(uuid)s] "[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If an instance UUID is passed with the log message, format[0m[37m
172.16.1.170         -# it like this (string value)[0m[37m
172.16.1.170         -#instance_uuid_format="[instance: %(uuid)s] "[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (Optional) In addition to the system's default language log,[0m[37m
172.16.1.170         -# creates an additional log in the given language if such[0m[37m
172.16.1.170         -# language is present in the operating system. This option is[0m[37m
172.16.1.170         -# only enabled if the 'log_file' option is used, and the[0m[37m
172.16.1.170         -# additional log will be created in the same directory as the[0m[37m
172.16.1.170         -# main log, inside a directory named after the locale. This[0m[37m
172.16.1.170         -# option is not available in community OpenStack Havana but it[0m[37m
172.16.1.170         -# is in IBM builds of OpenStack. (string value)[0m[37m
172.16.1.170         -#log_additional_locale=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The name of logging configuration file. It does not disable[0m[37m
172.16.1.170         -# existing loggers, but just appends specified logging[0m[37m
172.16.1.170         -# configuration to any other existing logging options. Please[0m[37m
172.16.1.170         -# see the Python logging module documentation for details on[0m[37m
172.16.1.170         -# logging configuration files. (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/log_config[0m[37m
172.16.1.170         -#log_config_append=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# DEPRECATED. A logging.Formatter log message format string[0m[37m
172.16.1.170         -# which may use any of the available logging.LogRecord[0m[37m
172.16.1.170         -# attributes. This option is deprecated.  Please use[0m[37m
172.16.1.170         -# logging_context_format_string and[0m[37m
172.16.1.170         -# logging_default_format_string instead. (string value)[0m[37m
172.16.1.170         -#log_format=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Format string for %%(asctime)s in log records. Default:[0m[37m
172.16.1.170         -# %(default)s (string value)[0m[37m
172.16.1.170         -#log_date_format=%Y-%m-%d %H:%M:%S[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (Optional) Name of log file to output to. If no default is[0m[37m
172.16.1.170         -# set, logging will go to stdout. (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/logfile[0m[37m
172.16.1.170         -#log_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (Optional) The base directory used for relative --log-file[0m[37m
172.16.1.170         -# paths (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/logdir[0m[37m
172.16.1.170         -#log_dir
172.16.1.170 =<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use syslog for logging. Existing syslog format is DEPRECATED[0m[37m
172.16.1.170         -# during I, and then will be changed in J to honor RFC5424[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#use_syslog=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (Optional) Use syslog rfc5424 format for logging. If[0m[37m
172.16.1.170         -# enabled, will add APP-NAME (RFC5424) before the MSG part of[0m[37m
172.16.1.170         -# the syslog message.  The old format without APP-NAME is[0m[37m
172.16.1.170         -# deprecated in I, and will be removed in J. (boolean value)[0m[37m
172.16.1.170         -#use_syslog_rfc_format=false[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# syslog facility to receive log lines (string value)[0m[37m
172.16.1.170         -#syslog_log_facility=LOG_USER[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.openstack.common.memorycache[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Memcached servers or None for in process cache. (list value)[0m[37m
172.16.1.170         -#memcached_servers=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.openstack.common.periodic_task[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Some periodic tasks can be run in a separate process. Should[0m[37m
172.16.1.170         -# we run them here? (boolean value)[0m[37m
172.16.1.170         -#run_external_periodic_tasks=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.pci.pci_request[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# An alias for a PCI passthrough device requirement. This[0m[37m
172.16.1.170         -# allows users to specify the alias in the extra_spec for a[0m[37m
172.16.1.170         -# flavor, without needing to repeat all the PCI property[0m[37m
172.16.1.170         -# requirements. For example: pci_alias = { "name":[0m[37m
172.16.1.170         -# "QuicAssist",   "product_id": "0443",   "vendor_id": "8086",[0m[37m
172.16.1.170         -# "device_type": "ACCEL" } defines an alias for the Intel[0m[37m
172.16.1.170         -# QuickAssist card. (multi valued) (multi valued)[0m[37m
172.16.1.170         -#pci_alias=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.pci.pci_whitelist[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# White list of PCI devices available to VMs. For example:[0m[37m
172.16.1.170         -# pci_passthrough_whitelist =  [{"vendor_id": "8086",[0m[37m
172.16.1.170         -# "product_id": "0443"}] (multi valued)[0m[37m
172.16.1.170         -#pci_passthrough_whitelist=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The scheduler host manager class to use (string value)[0m[37m
172.16.1.170         -#scheduler_host_manager=nova.scheduler.host_manager.HostManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of attempts to schedule an instance (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#scheduler_max_attempts=3[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.filter_scheduler[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# New instances will be scheduled on a host chosen randomly[0m[37m
172.16.1.170         -# from a subset of the N best hosts. This property defines the[0m[37m
172.16.1.170         -# subset size that a host is chosen from. A value of 1 chooses[0m[37m
172.16.1.170         -# the first host returned by the weighing functions. This[0m[37m
172.16.1.170         -# value must be at least 1. Any value less than 1 will be[0m[37m
172.16.1.170         -# ignored, and 1 will be used instead (integer value)[0m[37m
172.16.1.170         -#scheduler_host_subset_size=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.filters.aggregate_image_properties_isolation[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Force the filter to consider only keys matching the given[0m[37m
172.16.1.170         -# namespace. (string value)[0m
172.16.1.170 [37m
172.16.1.170         -#aggregate_image_properties_isolation_namespace=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The separator used between the namespace and keys (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#aggregate_image_properties_isolation_separator=.[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.filters.core_filter[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Virtual CPU to physical CPU allocation ratio which affects[0m[37m
172.16.1.170         -# all CPU filters. This configuration specifies a global ratio[0m[37m
172.16.1.170         -# for CoreFilter. For AggregateCoreFilter, it will fall back[0m[37m
172.16.1.170         -# to this configuration value if no per-aggregate setting[0m[37m
172.16.1.170         -# found. (floating point value)[0m[37m
172.16.1.170         -#cpu_allocation_ratio=16.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.filters.disk_filter[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Virtual disk to physical disk allocation ratio (floating[0m[37m
172.16.1.170         -# point value)[0m[37m
172.16.1.170         -#disk_allocation_ratio=1.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.filters.io_ops_filter[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Ignore hosts that have too many[0m[37m
172.16.1.170         -# builds/resizes/snaps/migrations (integer value)[0m[37m
172.16.1.170         -#max_io_ops_per_host=8[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.filters.isolated_hosts_filter[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Images to run on isolated host (list value)[0m[37m
172.16.1.170         -#isolated_images=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Host reserved for specific images (list value)[0m[37m
172.16.1.170         -#isolated_hosts=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to force isolated hosts to run only isolated images[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#restrict_isolated_hosts_to_isolated_images=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.filters.num_instances_filter[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Ignore hosts that have too many instances (integer value)[0m[37m
172.16.1.170         -#max_instances_per_host=50[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.filters.ram_filter[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Virtual ram to physical ram allocation ratio which affects[0m[37m
172.16.1.170         -# all ram filters. This configuration specifies a global ratio[0m[37m
172.16.1.170         -# for RamFilter. For AggregateRamFilter, it will fall back to[0m[37m
172.16.1.170         -# this configuration value if no per-aggregate setting found.[0m[37m
172.16.1.170         -# (floating point value)[0m[37m
172.16.1.170         -#ram_allocation_ratio=1.5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.host_manager[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Filter classes available to the scheduler which may be[0m[37m
172.16.1.170         -# specified more than once.  An entry of[0m
172.16.1.170 [37m
172.16.1.170         -# "nova.scheduler.filters.standard_filters" maps to all[0m[37m
172.16.1.170         -# filters included with nova. (multi valued)[0m[37m
172.16.1.170         -#scheduler_available_filters=nova.scheduler.filters.all_filters[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Which filter class names to use for filtering hosts when not[0m[37m
172.16.1.170         -# specified in the request. (list value)[0m[37m
172.16.1.170         -#scheduler_default_filters=RetryFilter,AvailabilityZoneFilter,RamFilter,ComputeFilter,ComputeCapabilitiesFilter,ImagePropertiesFilter[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Which weight class names to use for weighing hosts (list[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#scheduler_weight_classes=nova.scheduler.weights.all_weighers[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.manager[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default driver to use for the scheduler (string value)[0m[37m
172.16.1.170         -#scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The topic scheduler nodes listen on (string value)[0m[37m
172.16.1.170         -#scheduler_topic=scheduler[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.scheduler_options[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Absolute path to scheduler configuration JSON file. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#scheduler_json_config_location=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.weights.ram[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Multiplier used for weighing ram.  Negative numbers mean to[0m[37m
172.16.1.170         -# stack vs spread. (floating point value)[0m[37m
172.16.1.170         -#ram_weight_multiplier=1.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.servicegroup.api[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The driver for servicegroup service (valid options are: db,[0m[37m
172.16.1.170         -# zk, mc) (string value)[0m[37m
172.16.1.170         -#servicegroup_driver=db[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.configdrive[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Config drive format. One of iso9660 (default) or vfat[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#config_drive_format=iso9660[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Where to put temporary files associated with config drive[0m[37m
172.16.1.170         -# creation (string value)[0m[37m
172.16.1.170         -#config_drive_tempdir=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set to force injection to take place on a config drive (if[0m[37m
172.16.1.170         -# set, valid options are: always) (string value)[0m[37m
172.16.1.170         -#force_config_drive=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name and optionally path of the tool used for ISO image[0m[37m
172.16.1.170         -# creation (string value)[0m[37m
172.16.1.170         -#mkisofs_cmd=genisoimage[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.cpu[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Defines which pcpus that instance vcpus can use. For[0m[37m
172.16.1.170         -# example, "4-12,^8,15" (string value)[0m[37m
172.16.1.170         -#vcpu_pin_set=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.disk.api[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Template file for injected network (string value)[0m[37m
172.16.1.170         -#injected_network_template=$pybasedir/nova/virt/interfaces.template[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of the mkfs commands for ephemeral device. The format[0m[37m
172.16.1.170         -# is <os_type>=<mkfs command> (multi valued)[0m[37m
172.16.1.170         -#virt_mkfs=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Attempt to resize the filesystem by accessing the image over[0m[37m
172.16.1.170         -# a block device. This is done by the host and may not be[0m[37m
172.16.1.170         -# necessary if the image contains a recent version of cloud-[0m[37m
172.16.1.170         -# init. Possible mechanisms require the nbd driver (for qcow[0m[37m
172.16.1.170         -# and raw), or loop (for raw). (boolean value)[0m[37m
172.16.1.170         -#resize_fs_using_block_device=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.disk.mount.nbd[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Amount of time, in seconds, to wait for NBD device start up.[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#timeout_nbd=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Driver to use for controlling virtualization. Options[0m[37m
172.16.1.170         -# include: libvirt.LibvirtDriver, xenapi.XenAPIDriver,[0m[37m
172.16.1.170         -# fake.FakeDriver, baremetal.BareMetalDriver,[0m[37m
172.16.1.170         -# vmwareapi.VMwareESXDriver, vmwareapi.VMwareVCDriver (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#compute_driver=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The default format an ephemeral_volume will be formatted[0m[37m
172.16.1.170         -# with on creation. (string value)[0m[37m
172.16.1.170         -#default_ephemeral_format=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# VM image preallocation mode: "none" => no storage[0m[37m
172.16.1.170         -# provisioning is done up front, "space" => storage is fully[0m[37m
172.16.1.170         -# allocated at instance start (string value)[0m[37m
172.16.1.170         -#preallocate_images=none[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to use cow images (boolean value)[0m[37m
172.16.1.170         -#use_cow_images=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.firewall[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Firewall driver (defaults to hypervisor specific iptables[0m[37m
172.16.1.170         -# driver) (string value)[0m[37m
172.16.1.170         -#firewall_driver=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to allow network traffic from same network (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#allow_same_net_traffic=true[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.imagecache[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds to wait between runs of the image cache[0m[37m
172.16.1.170         -# manager (integer value)[0m[37m
172.16.1.170         -#image_cache_manager_interval=2400[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Where cached images are stored under $instances_path. This[0m[37m
172.16.1.170         -# is NOT the full path - just a folder name. For per-compute-[0m[37m
172.16.1.170         -# host cached images, set to _base_$my_ip (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/base_dir_name[0m[37m
172.16.1.170         -#image_cache_subdirectory_name=_base[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Should unused base images be removed? (boolean value)[0m[37m
172.16.1.170         -#remove_unused_base_images=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Unused unresized base images younger than this will not be[0m[37m
172.16.1.170         -# removed (integer value)[0m[37m
172.16.1.170         -#remove_unused_original_minimum_age_seconds=86400[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.images[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Force backing images to raw format (boolean value)[0m[37m
172.16.1.170         -#force_raw_images=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.powervm.driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# PowerVM manager type (ivm, hmc) (string value)[0m[37m
172.16.1.170         -#powervm_mgr_type=ivm[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# PowerVM manager host or ip (string value)[0m[37m
172.16.1.170         -#powervm_mgr=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# PowerVM manager user name (string value)[0m[37m
172.16.1.170         -#powervm_mgr_user=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# PowerVM manager user password (string value)[0m[37m
172.16.1.170         -#powervm_mgr_passwd=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# PowerVM image remote path where images will be moved. Make[0m[37m
172.16.1.170         -# sure this path can fit your biggest image in glance (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#powervm_img_remote_path=/home/padmin[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Local directory to download glance images to. Make sure this[0m[37m
172.16.1.170         -# path can fit your biggest image in glance (string value)[0m[37m
172.16.1.170         -#powervm_img_local_path=/tmp[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Timeout to force the iso detachment during spawn (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#powervm_iso_detach_timeout=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.vnc[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of VNC console proxy, in the form[0m[37m
172.16.1.170         -# "http://127.0.0.1:6080/vnc_auto.html" (string value)[0m[37m
172.16.1.170         -#novncproxy_base_url=http://127.0.0.1:6080/vnc_auto.html[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of nova xvp VNC console proxy, in the form[0m[37m
172.16.1.170         -# "http://127.0.0.1:6081/console" (string value)[0m[37m
172.16.1.170         -#xvpvncproxy_base_url=http://127.0.0.1:6081/console[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# IP address on which instance vncservers should listen[0m[37m
172.16.1.170         -# (string value)[0m
172.16.1.170 [37m
172.16.1.170         -#vncserver_listen=127.0.0.1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The address to which proxy clients (like nova-xvpvncproxy)[0m[37m
172.16.1.170         -# should connect (string value)[0m[37m
172.16.1.170         -#vncserver_proxyclient_address=127.0.0.1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable VNC related features (boolean value)[0m[37m
172.16.1.170         -#vnc_enabled=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keymap for VNC (string value)[0m[37m
172.16.1.170         -#vnc_keymap=en-us[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.vnc.xvp_proxy[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Port that the XCP VNC proxy should bind to (integer value)[0m[37m
172.16.1.170         -#xvpvncproxy_port=6081[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Address that the XCP VNC proxy should bind to (string value)[0m[37m
172.16.1.170         -#xvpvncproxy_host=0.0.0.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.volume[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The full class name of the volume API class to use (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#volume_api_class=nova.volume.cinder.API[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.volume.cinder[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Info to match when looking for cinder in the service[0m[37m
172.16.1.170         -# catalog. Format is: separated values of the form:[0m[37m
172.16.1.170         -# <service_type>:<service_name>:<endpoint_type> (string value)[0m[37m
172.16.1.170         -#cinder_catalog_info=volume:cinder:publicURL[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Override service catalog lookup with template for cinder[0m[37m
172.16.1.170         -# endpoint e.g. http://localhost:8776/v1/%(project_id)s[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#cinder_endpoint_template=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Region name of this node (string value)[0m[37m
172.16.1.170         -#os_region_name=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of ca certificates file to use for cinder client[0m[37m
172.16.1.170         -# requests. (string value)[0m[37m
172.16.1.170         -#cinder_ca_certificates_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of cinderclient retries on failed http calls (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#cinder_http_retries=3[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allow to perform insecure SSL requests to cinder (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#cinder_api_insecure=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allow attach between instance and volume in different[0m[37m
172.16.1.170         -# availability zones. (boolean value)[0m[37m
172.16.1.170         -#cinder_cross_az_attach=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[baremetal][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.baremetal.db.api[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The backend to use for bare-metal database (string value)[0m[37m
172.16.1.170         -#db_backend=sqlalchemy[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.baremetal.db.sqlalchemy.session[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The SQLAlchemy connection string used to connect to the[0m[37m
172.16.1.170         -# bare-metal database (string value)[0m[37m
172.16.1.170         -#sql_connection=sqlite:///$state_path/baremetal_$sqlite_db[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.baremetal.driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Baremetal VIF driver. (string value)[0m[37m
172.16.1.170         -#vif_driver=nova.virt.baremetal.vif_driver.BareMetalVIFDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Baremetal volume driver. (string value)[0m[37m
172.16.1.170         -#volume_driver=nova.virt.baremetal.volume_driver.LibvirtVolumeDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A list of additional capabilities corresponding to[0m[37m
172.16.1.170         -# flavor_extra_specs for this compute host to advertise. Valid[0m[37m
172.16.1.170         -# entries are name=value, pairs For example, "key1:val1,[0m[37m
172.16.1.170         -# key2:val2" (list value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/instance_type_extra_specs[0m[37m
172.16.1.170         -#flavor_extra_specs=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Baremetal driver back-end (pxe or tilera) (string value)[0m[37m
172.16.1.170         -#driver=nova.virt.baremetal.pxe.PXE[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Baremetal power management method (string value)[0m[37m
172.16.1.170         -#power_manager=nova.virt.baremetal.ipmi.IPMI[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Baremetal compute node's tftp root path (string value)[0m[37m
172.16.1.170         -#tftp_root=/tftpboot[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.baremetal.ipmi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path to baremetal terminal program (string value)[0m[37m
172.16.1.170         -#terminal=shellinaboxd[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path to baremetal terminal SSL cert(PEM) (string value)[0m[37m
172.16.1.170         -#terminal_cert_dir=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path to directory stores pidfiles of baremetal_terminal[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#terminal_pid_dir=$state_path/baremetal/console[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximal number of retries for IPMI operations (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#ipmi_power_retry=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.baremetal.pxe[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default kernel image ID used in deployment phase (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#deploy_kernel=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default ramdisk image ID used in deployment phase (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#deploy_ramdisk=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Template file for injected network config (string value)[0m[37m
172.16.1.170         -#net_config_template=$pybasedir/nova/virt/baremetal/net-dhcp.ubuntu.template[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Additional append parameters for baremetal PXE boot (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#pxe_append_params=nofb nomodeset vga=normal[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Template file for PXE configuration (string value)[0m
172.16.1.170 [37m
172.16.1.170         -#pxe_config_template=$pybasedir/nova/virt/baremetal/pxe_config.template[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If True, enable file injection for network info, files and[0m[37m
172.16.1.170         -# admin password (boolean value)[0m[37m
172.16.1.170         -#use_file_injection=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Timeout for PXE deployments. Default: 0 (unlimited) (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#pxe_deploy_timeout=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set, pass the network configuration details to the[0m[37m
172.16.1.170         -# initramfs via cmdline. (boolean value)[0m[37m
172.16.1.170         -#pxe_network_config=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# This gets passed to Neutron as the bootfile dhcp parameter[0m[37m
172.16.1.170         -# when the dhcp_options_enabled is set. (string value)[0m[37m
172.16.1.170         -#pxe_bootfile_name=pxelinux.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.baremetal.tilera_pdu[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# IP address of tilera pdu (string value)[0m[37m
172.16.1.170         -#tile_pdu_ip=10.0.100.1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Management script for tilera pdu (string value)[0m[37m
172.16.1.170         -#tile_pdu_mgr=/tftpboot/pdu_mgr[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Power status of tilera PDU is OFF (integer value)[0m[37m
172.16.1.170         -#tile_pdu_off=2[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Power status of tilera PDU is ON (integer value)[0m[37m
172.16.1.170         -#tile_pdu_on=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Power status of tilera PDU (integer value)[0m[37m
172.16.1.170         -#tile_pdu_status=9[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Wait time in seconds until check the result after tilera[0m[37m
172.16.1.170         -# power operations (integer value)[0m[37m
172.16.1.170         -#tile_power_wait=9[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.baremetal.virtual_power_driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# IP or name to virtual power host (string value)[0m[37m
172.16.1.170         -#virtual_power_ssh_host=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Port to use for ssh to virtual power host (integer value)[0m[37m
172.16.1.170         -#virtual_power_ssh_port=22[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Base command to use for virtual power(vbox, virsh) (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#virtual_power_type=virsh[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# User to execute virtual power commands as (string value)[0m[37m
172.16.1.170         -#virtual_power_host_user=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Password for virtual power host_user (string value)[0m[37m
172.16.1.170         -#virtual_power_host_pass=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The ssh key for virtual power host_user (string value)[0m[37m
172.16.1.170         -#virtual_power_host_key=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.baremetal.volume_driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Do not set this out of dev/test environments. If a node does[0m[37m
172.16.1.170         -# not have a fixed PXE IP address, volumes are exported with[0m[37m
172.16.1.170         -# globally opened ACL (boolean value)[0m[37m
172.16.1.170         -#use_unsafe_iscsi=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The iSCSI IQN prefix used in baremetal volume connections.[0m
172.16.1.170 [37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#iscsi_iqn_prefix=iqn.2010-10.org.openstack.baremetal[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[cells][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.manager[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Cells communication driver to use (string value)[0m[37m
172.16.1.170         -#driver=nova.cells.rpc_driver.CellsRPCDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds after an instance was updated or deleted[0m[37m
172.16.1.170         -# to continue to update cells (integer value)[0m[37m
172.16.1.170         -#instance_updated_at_threshold=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of instances to update per periodic task run (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#instance_update_num_instances=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.messaging[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of hops for cells routing. (integer value)[0m[37m
172.16.1.170         -#max_hop_count=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Cells scheduler to use (string value)[0m[37m
172.16.1.170         -#scheduler=nova.cells.scheduler.CellsScheduler[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.opts[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable cell functionality (boolean value)[0m[37m
172.16.1.170         -#enable=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The topic cells nodes listen on (string value)[0m[37m
172.16.1.170         -#topic=cells[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Manager for cells (string value)[0m[37m
172.16.1.170         -#manager=nova.cells.manager.CellsManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of this cell (string value)[0m[37m
172.16.1.170         -#name=nova[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Key/Multi-value list with the capabilities of the cell (list[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#capabilities=hypervisor=xenserver;kvm,os=linux;windows[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Seconds to wait for response from a call to a cell. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#call_timeout=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Percentage of cell capacity to hold in reserve. Affects both[0m[37m
172.16.1.170         -# memory and disk utilization (floating point value)[0m[37m
172.16.1.170         -#reserve_percent=10.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Type of cell: api or compute (string value)[0m[37m
172.16.1.170         -#cell_type=compute[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds after which a lack of capability and[0m[37m
172.16.1.170         -# capacity updates signals the child cell is to be treated as[0m[37m
172.16.1.170         -# a mute. (integer value)[0m[37m
172.16.1.170         -#mute_child_interval=300[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Seconds between bandwidth updates for cells. (integer value)[0m[37m
172.16.1.170         -#bandwidth_update_interval=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.rpc_driver[0m[37m
172.16.1.170         -#[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Base queue name to use when communicating between cells.[0m[37m
172.16.1.170         -# Various topics by message type will be appended to this.[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#rpc_driver_queue_base=cells.intercell[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.scheduler[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Filter classes the cells scheduler should use.  An entry of[0m[37m
172.16.1.170         -# "nova.cells.filters.all_filters" maps to all cells filters[0m[37m
172.16.1.170         -# included with nova. (list value)[0m[37m
172.16.1.170         -#scheduler_filter_classes=nova.cells.filters.all_filters[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Weigher classes the cells scheduler should use.  An entry of[0m[37m
172.16.1.170         -# "nova.cells.weights.all_weighers" maps to all cell weighers[0m[37m
172.16.1.170         -# included with nova. (list value)[0m[37m
172.16.1.170         -#scheduler_weight_classes=nova.cells.weights.all_weighers[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# How many retries when no cells are available. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#scheduler_retries=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# How often to retry in seconds when no cells are available.[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#scheduler_retry_delay=2[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.state[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval, in seconds, for getting fresh cell information[0m[37m
172.16.1.170         -# from the database. (integer value)[0m[37m
172.16.1.170         -#db_check_interval=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Configuration file from which to read cells configuration.[0m[37m
172.16.1.170         -# If given, overrides reading cells from the database. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#cells_config=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.weights.mute_child[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Multiplier used to weigh mute children. (The value should be[0m[37m
172.16.1.170         -# negative.) (floating point value)[0m[37m
172.16.1.170         -#mute_weight_multiplier=-10.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Weight value assigned to mute children. (The value should be[0m[37m
172.16.1.170         -# positive.) (floating point value)[0m[37m
172.16.1.170         -#mute_weight_value=1000.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.weights.ram_by_instance_type[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Multiplier used for weighing ram.  Negative numbers mean to[0m[37m
172.16.1.170         -# stack vs spread. (floating point value)[0m[37m
172.16.1.170         -#ram_weight_multiplier=10.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.weights.weight_offset[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Multiplier used to weigh offset weigher. (floating point[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#offset_weight_multiplier=1.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[conductor][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.conductor.api[0m[37m
172.16.1.170         -#[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Perform nova-conductor operations locally (boolean value)[0m[37m
172.16.1.170         -#use_local=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The topic on which conductor nodes listen (string value)[0m[37m
172.16.1.170         -#topic=conductor[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Full class name for the Manager for conductor (string value)[0m[37m
172.16.1.170         -#manager=nova.conductor.manager.ConductorManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of workers for OpenStack Conductor service. The[0m[37m
172.16.1.170         -# default will be the number of CPUs available. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#workers=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[database][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.openstack.common.db.api[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The backend to use for db (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/db_backend[0m[37m
172.16.1.170         -#backend=sqlalchemy[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable the experimental use of thread pooling for all DB API[0m[37m
172.16.1.170         -# calls (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/dbapi_use_tpool[0m[37m
172.16.1.170         -#use_tpool=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.openstack.common.db.sqlalchemy.session[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The SQLAlchemy connection string used to connect to the[0m[37m
172.16.1.170         -# database (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_connection[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sql_connection[0m[37m
172.16.1.170         -# Deprecated group/name - [sql]/connection[0m[37m
172.16.1.170         -#connection=sqlite:////nova/openstack/common/db/$sqlite_db[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The SQLAlchemy connection string used to connect to the[0m[37m
172.16.1.170         -# slave database (string value)[0m[37m
172.16.1.170         -#slave_connection=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Timeout before idle sql connections are reaped (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_idle_timeout[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sql_idle_timeout[0m[37m
172.16.1.170         -# Deprecated group/name - [sql]/idle_timeout[0m[37m
172.16.1.170         -#idle_timeout=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Minimum number of SQL connections to keep open in a pool[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_min_pool_size[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sql_min_pool_size[0m[37m
172.16.1.170         -#min_pool_size=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of SQL connections to keep open in a pool[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_max_pool_size[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sql_max_pool_size[0m[37m
172.16.1.170         -#max_pool_size=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum db connection retries during startup. (setting -1[0m[37m
172.16.1.170         -# implies an infinite retry count) (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_max_retries[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sql_max_retries[0m[37m
172.16.1.170         -#max_retries=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval between retries of opening a sql connection[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_retry_interval[0m
172.16.1.170 [37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/reconnect_interval[0m[37m
172.16.1.170         -#retry_interval=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set, use this value for max_overflow with sqlalchemy[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_max_overflow[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sqlalchemy_max_overflow[0m[37m
172.16.1.170         -#max_overflow=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Verbosity of SQL debugging information. 0=None,[0m[37m
172.16.1.170         -# 100=Everything (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_connection_debug[0m[37m
172.16.1.170         -#connection_debug=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Add python stack traces to SQL as comment strings (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sql_connection_trace[0m[37m
172.16.1.170         -#connection_trace=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If set, use this value for pool_timeout with sqlalchemy[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DATABASE]/sqlalchemy_pool_timeout[0m[37m
172.16.1.170         -#pool_timeout=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[docker][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.docker.driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default TCP port to find the docker-registry container[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/docker_registry_default_port[0m[37m
172.16.1.170         -#registry_default_port=5042[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[hyperv][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.hyperv.pathutils[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The name of a Windows share name mapped to the[0m[37m
172.16.1.170         -# "instances_path" dir and used by the resize feature to copy[0m[37m
172.16.1.170         -# files to the target host. If left blank, an administrative[0m[37m
172.16.1.170         -# share will be used, looking for the same "instances_path"[0m[37m
172.16.1.170         -# used locally (string value)[0m[37m
172.16.1.170         -#instances_path_share=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.hyperv.utilsfactory[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Force V1 WMI utility classes (boolean value)[0m[37m
172.16.1.170         -#force_hyperv_utils_v1=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Force V1 volume utility class (boolean value)[0m[37m
172.16.1.170         -#force_volumeutils_v1=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.hyperv.vif[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# External virtual switch Name, if not provided, the first[0m[37m
172.16.1.170         -# external virtual switch is used (string value)[0m[37m
172.16.1.170         -#vswitch_name=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.hyperv.vmops[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Required for live migration among hosts with different CPU[0m[37m
172.16.1.170         -# features (boolean value)[0m[37m
172.16.1.170         -#limit_cpu_features=false[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Sets the admin password in the config drive image (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#config_drive_inject_password=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path of qemu-img command which is used to convert between[0m[37m
172.16.1.170         -# different image types (string value)[0m[37m
172.16.1.170         -#qemu_img_cmd=qemu-img.exe[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Attaches the Config Drive image as a cdrom drive instead of[0m[37m
172.16.1.170         -# a disk drive (boolean value)[0m[37m
172.16.1.170         -#config_drive_cdrom=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enables metrics collections for an instance by using[0m[37m
172.16.1.170         -# Hyper-V's metric APIs. Collected data can by retrieved by[0m[37m
172.16.1.170         -# other apps and services, e.g.: Ceilometer. Requires Hyper-V[0m[37m
172.16.1.170         -# / Windows Server 2012 and above (boolean value)[0m[37m
172.16.1.170         -#enable_instance_metrics_collection=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enables dynamic memory allocation (ballooning) when set to a[0m[37m
172.16.1.170         -# value greater than 1. The value expresses the ratio between[0m[37m
172.16.1.170         -# the total RAM assigned to an instance and its startup RAM[0m[37m
172.16.1.170         -# amount. For example a ratio of 2.0 for an instance with[0m[37m
172.16.1.170         -# 1024MB of RAM implies 512MB of RAM allocated at startup[0m[37m
172.16.1.170         -# (floating point value)[0m[37m
172.16.1.170         -#dynamic_memory_ratio=1.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.hyperv.volumeops[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The number of times to retry to attach a volume (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#volume_attach_retry_count=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval between volume attachment attempts, in seconds[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#volume_attach_retry_interval=5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The number of times to retry checking for a disk mounted via[0m[37m
172.16.1.170         -# iSCSI. (integer value)[0m[37m
172.16.1.170         -#mounted_disk_query_retry_count=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Interval between checks for a mounted iSCSI disk, in[0m[37m
172.16.1.170         -# seconds. (integer value)[0m[37m
172.16.1.170         -#mounted_disk_query_retry_interval=5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[image_file_url][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.image.download.file[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# List of file systems that are configured in this file in the[0m[37m
172.16.1.170         -# image_file_url:<list entry name> sections (list value)[0m[37m
172.16.1.170         -#filesystems=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[keymgr][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.keymgr[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The full class name of the key manager API class (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#api_class=nova.keymgr.conf_key_mgr.ConfKeyManager[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.keymgr.conf_key_mgr[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Fixed key returned by key manager, specified in hex (string[0m[37m
172.16.1.170         -# value)[0m
172.16.1.170 [37m
172.16.1.170         -#fixed_key=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[keystone_authtoken][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in keystoneclient.middleware.auth_token[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Prefix to prepend at the beginning of the path (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#auth_admin_prefix=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Host providing the admin Identity API endpoint (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#auth_host=127.0.0.1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Port of the admin Identity API endpoint (integer value)[0m[37m
172.16.1.170         -#auth_port=35357[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Protocol of the admin Identity API endpoint(http or https)[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#auth_protocol=https[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Complete public Identity API endpoint (string value)[0m[37m
172.16.1.170         -#auth_uri=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# API version of the admin Identity API endpoint (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#auth_version=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Do not handle authorization requests within the middleware,[0m[37m
172.16.1.170         -# but delegate the authorization decision to downstream WSGI[0m[37m
172.16.1.170         -# components (boolean value)[0m[37m
172.16.1.170         -#delay_auth_decision=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Request timeout value for communicating with Identity API[0m[37m
172.16.1.170         -# server. (boolean value)[0m[37m
172.16.1.170         -#http_connect_timeout=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# How many times are we trying to reconnect when communicating[0m[37m
172.16.1.170         -# with Identity API Server. (integer value)[0m[37m
172.16.1.170         -#http_request_max_retries=3[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allows to pass in the name of a fake http_handler callback[0m[37m
172.16.1.170         -# function used instead of httplib.HTTPConnection or[0m[37m
172.16.1.170         -# httplib.HTTPSConnection. Useful for unit testing where[0m[37m
172.16.1.170         -# network is not available. (string value)[0m[37m
172.16.1.170         -#http_handler=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Single shared secret with the Keystone configuration used[0m[37m
172.16.1.170         -# for bootstrapping a Keystone installation, or otherwise[0m[37m
172.16.1.170         -# bypassing the normal authentication process. (string value)[0m[37m
172.16.1.170         -#admin_token=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone account username (string value)[0m[37m
172.16.1.170         -#admin_user=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone account password (string value)[0m[37m
172.16.1.170         -#admin_password=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keystone service account tenant name to validate user tokens[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#admin_tenant_name=admin[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Env key for the swift cache (string value)[0m[37m
172.16.1.170         -#cache=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Required if Keystone server requires client certificate[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#certfile=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Required if Keystone server requires client certificate[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#keyfile=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A PEM encoded Certificate Authority to use when verifying[0m
172.16.1.170 [37m
172.16.1.170         -# HTTPs connections. Defaults to system CAs. (string value)[0m[37m
172.16.1.170         -#cafile=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Verify HTTPS connections. (boolean value)[0m[37m
172.16.1.170         -#insecure=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory used to cache files related to PKI tokens (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#signing_dir=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If defined, the memcache server(s) to use for caching (list[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/memcache_servers[0m[37m
172.16.1.170         -#memcached_servers=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# In order to prevent excessive requests and validations, the[0m[37m
172.16.1.170         -# middleware uses an in-memory cache for the tokens the[0m[37m
172.16.1.170         -# Keystone API returns. This is only valid if memcache_servers[0m[37m
172.16.1.170         -# is defined. Set to -1 to disable caching completely.[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#token_cache_time=300[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Value only used for unit testing (integer value)[0m[37m
172.16.1.170         -#revocation_cache_time=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (optional) if defined, indicate whether token data should be[0m[37m
172.16.1.170         -# authenticated or authenticated and encrypted. Acceptable[0m[37m
172.16.1.170         -# values are MAC or ENCRYPT.  If MAC, token data is[0m[37m
172.16.1.170         -# authenticated (with HMAC) in the cache. If ENCRYPT, token[0m[37m
172.16.1.170         -# data is encrypted and authenticated in the cache. If the[0m[37m
172.16.1.170         -# value is not one of these options or empty, auth_token will[0m[37m
172.16.1.170         -# raise an exception on initialization. (string value)[0m[37m
172.16.1.170         -#memcache_security_strategy=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (optional, mandatory if memcache_security_strategy is[0m[37m
172.16.1.170         -# defined) this string is used for key derivation. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#memcache_secret_key=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (optional) indicate whether to set the X-Service-Catalog[0m[37m
172.16.1.170         -# header. If False, middleware will not ask for service[0m[37m
172.16.1.170         -# catalog on token validation and will not set the X-Service-[0m[37m
172.16.1.170         -# Catalog header. (boolean value)[0m[37m
172.16.1.170         -#include_service_catalog=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Used to control the use and type of token binding. Can be[0m[37m
172.16.1.170         -# set to: "disabled" to not check token binding. "permissive"[0m[37m
172.16.1.170         -# (default) to validate binding information if the bind type[0m[37m
172.16.1.170         -# is of a form known to the server and ignore it if not.[0m[37m
172.16.1.170         -# "strict" like "permissive" but if the bind type is unknown[0m[37m
172.16.1.170         -# the token will be rejected. "required" any form of token[0m[37m
172.16.1.170         -# binding is needed to be allowed. Finally the name of a[0m[37m
172.16.1.170         -# binding method that must be present in tokens. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#enforce_token_bind=permissive[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[libvirt][0m[37m
172.16.1.170         -inject_partition = -1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.libvirt.driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Rescue ami image (string value)[0m[37m
172.16.1.170         -#rescue_image_id=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Rescue aki image (string value)[0m[37m
172.16.1.170         -#rescue_kernel_id=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Rescue ari image (string value)[0m[37m
172.16.1.170         -#rescue_ramdisk_id=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Libvirt domain type (valid options are: kvm, lxc, qemu, uml,[0m[37m
172.16.1.170         -# xen) (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_type[0m[37m
172.16.1.170         -#virt_type=kvm[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Override the default libvirt URI (which is dependent on[0m[37m
172.16.1.170         -# virt_type) (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_uri[0m[37m
172.16.1.170         -#connection_uri=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Inject the admin password at boot time, without an agent.[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_inject_password[0m[37m
172.16.1.170         -#inject_password=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Inject the ssh public key at boot time (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_inject_key[0m[37m
172.16.1.170         -#inject_key=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The partition to inject to : -2 => disable, -1 => inspect[0m[37m
172.16.1.170         -# (libguestfs only), 0 => not partitioned, >0 => partition[0m[37m
172.16.1.170         -# number (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_inject_partition[0m[37m
172.16.1.170         -#inject_partition=-2[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Sync virtual and real mouse cursors in Windows VMs (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#use_usb_tablet=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Migration target URI (any included "%s" is replaced with the[0m[37m
172.16.1.170         -# migration target hostname) (string value)[0m[37m
172.16.1.170         -#live_migration_uri=qemu+tcp://%s/system[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Migration flags to be set for live migration (string value)[0m[37m
172.16.1.170         -#live_migration_flag=VIR_MIGRATE_UNDEFINE_SOURCE, VIR_MIGRATE_PEER2PEER[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Migration flags to be set for block migration (string value)[0m[37m
172.16.1.170         -#block_migration_flag=VIR_MIGRATE_UNDEFINE_SOURCE, VIR_MIGRATE_PEER2PEER, VIR_MIGRATE_NON_SHARED_INC[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum bandwidth to be used during migration, in Mbps[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#live_migration_bandwidth=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Snapshot image format (valid options are : raw, qcow2, vmdk,[0m[37m
172.16.1.170         -# vdi). Defaults to same as source image (string value)[0m[37m
172.16.1.170         -#snapshot_image_format=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The libvirt VIF driver to configure the VIFs. (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_vif_driver[0m[37m
172.16.1.170         -#vif_driver=nova.virt.libvirt.vif.LibvirtGenericVIFDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Libvirt handlers for remote volumes. (list value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_volume_drivers[0m[37m
172.16.1.170         -#volume_drivers=iscsi=nova.virt.libvirt.volume.LibvirtISCSIVolumeDriver,iser=nova.virt.libvirt.volume.LibvirtISERVolumeDriver,local=nova.virt.libvirt.volume.LibvirtVolumeDriver,fake=nova.virt.libvirt.volume.LibvirtFakeVolumeDriver,rbd=nova.virt.libvirt.volume.LibvirtNetVolumeDriver,sheepdog=nova.virt.libvirt.volume.LibvirtNetVolumeDriver,nfs=nova.virt.libvirt.volume.LibvirtNFSVolumeDriver,aoe=nova.virt.libvirt.volume.LibvirtAOEVolumeDriver,glusterfs=nova.virt.libvirt.volume.LibvirtGlusterfsVolumeDriver,fibre_channel=nova.virt.libvirt.volume.LibvirtFibreChannelVolumeDriver,scality=nova.virt.libvirt.volume.LibvirtScalityVolumeDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Override the default disk prefix for the devices attached to[0m[37m
172.16.1.170         -# a server, which is dependent on virt_type. (valid options[0m[37m
172.16.1.170         -# are: sd, xvd, uvd, vd) (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_disk_prefix[0m[37m
172.16.1.170         -#disk_prefix=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds to wait for instance to shut down after[0m[37m
172.16.1.170         -# soft reboot request is made. We fall back to hard reboot if[0m[37m
172.16.1.170         -# instance does not shutdown within this window. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_wait_soft_reboot_seconds[0m[37m
172.16.1.170         -#wait_
172.16.1.170 soft_reboot_seconds=120[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set to "host-model" to clone the host CPU feature flags; to[0m[37m
172.16.1.170         -# "host-passthrough" to use the host CPU model exactly; to[0m[37m
172.16.1.170         -# "custom" to use a named CPU model; to "none" to not set any[0m[37m
172.16.1.170         -# CPU model. If virt_type="kvm|qemu", it will default to[0m[37m
172.16.1.170         -# "host-model", otherwise it will default to "none" (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_cpu_mode[0m[37m
172.16.1.170         -#cpu_mode=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set to a named libvirt CPU model (see names listed in[0m[37m
172.16.1.170         -# /usr/share/libvirt/cpu_map.xml). Only has effect if[0m[37m
172.16.1.170         -# cpu_mode="custom" and virt_type="kvm|qemu" (string value)[0m
172.16.1.170 [37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_cpu_model[0m[37m
172.16.1.170         -#cpu_model=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location where libvirt driver will store snapshots before[0m[37m
172.16.1.170         -# uploading them to image service (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_snapshots_directory[0m[37m
172.16.1.170         -#snapshots_directory=$instances_path/snapshots[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location where the Xen hvmloader is kept (string value)[0m[37m
172.16.1.170         -#xen_hvmloader_path=/usr/lib/xen/boot/hvmloader[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Specific cachemodes to use for different disk types e.g:[0m[37m
172.16.1.170         -# file=directsync,block=none (list value)[0m[37m
172.16.1.170         -#disk_cachemodes=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.libvirt.imagebackend[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# VM Images format. Acceptable values are: raw, qcow2, lvm,[0m[37m
172.16.1.170         -# rbd, default. If default is specified, then use_cow_images[0m[37m
172.16.1.170         -# flag is used instead of this one. (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_images_type[0m[37m
172.16.1.170         -#images_type=default[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# LVM Volume Group that is used for VM images, when you[0m[37m
172.16.1.170         -# specify images_type=lvm. (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_images_volume_group[0m[37m
172.16.1.170         -#images_volume_group=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Create sparse logical volumes (with virtualsize) if this[0m[37m
172.16.1.170         -# flag is set to True. (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_sparse_logical_volumes[0m[37m
172.16.1.170         -#sparse_logical_volumes=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Method used to wipe old volumes (valid options are: none,[0m[37m
172.16.1.170         -# zero, shred) (string value)[0m[37m
172.16.1.170         -#volume_clear=zero[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Size in MiB to wipe at start of old volumes. 0 => all[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#volume_clear_size=0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RADOS pool in which rbd volumes are stored (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_images_rbd_pool[0m[37m
172.16.1.170         -#images_rbd_pool=rbd[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path to the ceph configuration file to use (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_images_rbd_ceph_conf[0m[37m
172.16.1.170         -#images_rbd_ceph_conf=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.libvirt.imagecache[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Allows image information files to be stored in non-standard[0m[37m
172.16.1.170         -# locations (string value)[0m[37m
172.16.1.170         -#image_info_filename_pattern=$instances_path/$image_cache_subdirectory_name/%(image)s.info[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Should unused kernel images be removed? This is only safe to[0m[37m
172.16.1.170         -# enable if all compute nodes have been updated to support[0m[37m
172.16.1.170         -# this option. This will be enabled by default in future.[0m[37m
172.16.1.170         -# (boolean value)[0m[37m
172.16.1.170         -#remove_unused_kernels=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Unused resized base images younger than this will not be[0m[37m
172.16.1.170         -# removed (integer value)[0m[37m
172.16.1.170         -#remove_unused_resized_minimum_age_seconds=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Write a checksum for files in _base to disk (boolean value)[0m[37m
172.16.1.170         -#checksum_base_images=false[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# How frequently to checksum base images (integer value)[0m[37m
172.16.1.170         -#checksum_interval_seconds=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.libvirt.utils[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Compress snapshot images when possible. This currently[0m[37m
172.16.1.170         -# applies exclusively to qcow2 images (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_snashot_compression[0m[37m
172.16.1.170         -#snapshot_compression=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.libvirt.vif[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use virtio for bridge interfaces with KVM/QEMU (boolean[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_use_virtio_for_bridges[0m[37m
172.16.1.170         -#use_virtio_for_bridges=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.libvirt.volume[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of times to rescan iSCSI target to find volume[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#num_iscsi_scan_tries=5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of times to rescan iSER target to find volume[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#num_iser_scan_tries=5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The RADOS client name for accessing rbd volumes (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#rbd_user=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The libvirt UUID of the secret for the rbd_uservolumes[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#rbd_secret_uuid=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory where the NFS volume is mounted on the compute[0m[37m
172.16.1.170         -# node (string value)[0m[37m
172.16.1.170         -#nfs_mount_point_base=$state_path/mnt[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Mount options passedf to the NFS client. See section of the[0m[37m
172.16.1.170         -# nfs man page for details (string value)[0m[37m
172.16.1.170         -#nfs_mount_options=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of times to rediscover AoE target to find volume[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#num_aoe_discover_tries=3[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Directory where the glusterfs volume is mounted on the[0m[37m
172.16.1.170         -# compute node (string value)[0m[37m
172.16.1.170         -#glusterfs_mount_point_base=$state_path/mnt[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use multipath connection of the iSCSI volume (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_iscsi_use_multipath[0m[37m
172.16.1.170         -#iscsi_use_multipath=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use multipath connection of the iSER volume (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/libvirt_iser_use_multipath[0m[37m
172.16.1.170         -#iser_use_multipath=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Path or URL to Scality SOFS configuration file (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#scality_sofs_config=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Base dir where Scality SOFS shall be mounted (string value)[0m[37m
172.16.1.170         -#scality_sofs_mount_point=$state_path/scality[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Protocols listed here will be accessed directly from QEMU.[0m[37m
172.16.1.170         -# Currently supported protocols: [gluster] (list value)[0m[37m
172.16.1.170         -#qemu_allowed_storage_drivers=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[matchmaker_ring][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in oslo.messaging[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Matchmaker ring file (JSON) (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/matchmaker_ringfile[0m[37m
172.16.1.170         -#ringfile=/etc/oslo/matchmaker_ring.json[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[metrics][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.weights.metrics[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Multiplier used for weighing metrics. (floating point value)[0m[37m
172.16.1.170         -#weight_multiplier=1.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# How the metrics are going to be weighed. This should be in[0m[37m
172.16.1.170         -# the form of "<name1>=<ratio1>, <name2>=<ratio2>, ...", where[0m[37m
172.16.1.170         -# <nameX> is one of the metrics to be weighed, and <ratioX> is[0m[37m
172.16.1.170         -# the corresponding ratio. So for "name1=1.0, name2=-1.0" The[0m[37m
172.16.1.170         -# final weight would be name1.value * 1.0 + name2.value *[0m[37m
172.16.1.170         -# -1.0. (list value)[0m[37m
172.16.1.170         -#weight_setting=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# How to treat the unavailable metrics. When a metric is NOT[0m[37m
172.16.1.170         -# available for a host, if it is set to be True, it would[0m[37m
172.16.1.170         -# raise an exception, so it is recommended to use the[0m[37m
172.16.1.170         -# scheduler filter MetricFilter to filter out those hosts. If[0m[37m
172.16.1.170         -# it is set to be False, the unavailable metric would be[0m[37m
172.16.1.170         -# treated as a negative factor in weighing process, the[0m[37m
172.16.1.170         -# returned value would be set by the option[0m[37m
172.16.1.170         -# weight_of_unavailable. (boolean value)[0m[37m
172.16.1.170         -#required=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The final weight value to be returned if required is set to[0m[37m
172.16.1.170         -# False and any one of the metrics set by weight_setting is[0m[37m
172.16.1.170         -# unavailable. (floating point value)[0m[37m
172.16.1.170         -#weight_of_unavailable=-10000.0[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[osapi_v3][0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.api.openstack[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether the V3 API is enabled or not (boolean value)[0m[37m
172.16.1.170         -#enabled=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# A list of v3 API extensions to never load. Specify the[0m[37m
172.16.1.170         -# extension aliases here. (list value)[0m[37m
172.16.1.170         -#extensions_blacklist=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If the list is not empty then a v3 API extension will only[0m[37m
172.16.1.170         -# be loaded if it exists in this list. Specify the extension[0m[37m
172.16.1.170         -# aliases here. (list value)[0m[37m
172.16.1.170         -#extensions_whitelist=[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[rdp][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.rdp[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of RDP html5 console proxy, in the form[0m[37m
172.16.1.170         -# "http://127.0.0.1:6083/" (string value)[0m[37m
172.16.1.170         -#html5_proxy_base_url=http://127.0.0.1:6083/[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable RDP related features (boolean value)[0m[37m
172.16.1.170         -#enabled=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[remote_debug][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.service[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Debug host (IP or name) to connect. Note that using the[0m[37m
172.16.1.170         -# remote debug option changes how Nova uses the eventlet[0m[37m
172.16.1.170         -# library to support async IO. This could result in failures[0m[37m
172.16.1.170         -# that do not occur under normal operation. Use at your own[0m[37m
172.16.1.170         -# risk. (string value)[0m[37m
172.16.1.170         -#host=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Debug port to connect. Note that using the remote debug[0m[37m
172.16.1.170         -# option changes how Nova uses the eventlet library to support[0m[37m
172.16.1.170         -# async IO. This could result in failures that do not occur[0m[37m
172.16.1.170         -# under normal operation. Use at your own risk. (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#port=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[spice][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.spice[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of spice HTML5 console proxy, in the form[0m[37m
172.16.1.170         -# "http://127.0.0.1:6082/spice_auto.html" (string value)[0m[37m
172.16.1.170         -#html5proxy_base_url=http://127.0.0.1:6082/spice_auto.html[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# IP address on which instance spice server should listen[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#server_listen=127.0.0.1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The address to which proxy clients (like nova-[0m[37m
172.16.1.170         -# spicehtml5proxy) should connect (string value)[0m[37m
172.16.1.170         -#server_proxyclient_address=127.0.0.1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable spice related features (boolean value)[0m[37m
172.16.1.170         -#enabled=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable spice guest agent support (boolean value)[0m[37m
172.16.1.170         -#agent_enabled=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Keymap for spice (string value)[0m[37m
172.16.1.170         -#keymap=en-us[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[ssl][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.openstack.common.sslutils[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# CA certificate file to use to verify connecting clients[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#ca_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Certificate file to use when starting the server securely[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#cert_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Private key file to use when starting the server securely[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#key_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[trusted_computing][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.filters.trusted_filter[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Attestation server HTTP (string value)[0m[37m
172.16.1.170         -#attestation_server=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Attestation server Cert file for Identity verification[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#attestation_server_ca_file=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Attestation server port (string value)[0m[37m
172.16.1.170         -#attestation_port=8443[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Attestation web API URL (string value)[0m[37m
172.16.1.170         -#attestation_api_url=/OpenAttestationWebServices/V1.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Attestation authorization blob - must change (string value)[0m[37m
172.16.1.170         -#attestation_auth_blob=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Attestation status cache valid period length (integer value)[0m[37m
172.16.1.170         -#attestation_auth_timeout=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[upgrade_levels][0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.baserpc[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set a version cap for messages sent to the base api in any[0m[37m
172.16.1.170         -# service (string value)[0m[37m
172.16.1.170         -#baseapi=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.rpc_driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set a version cap for messages sent between cells services[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#intercell=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cells.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set a version cap for messages sent to local cells services[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#cells=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.cert.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set a version cap for messages sent to cert services (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#cert=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.compute.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set a version cap for messages sent to compute services. If[0m[37m
172.16.1.170         -# you plan to do a live upgrade from havana to icehouse, you[0m[37m
172.16.1.170         -# should set this option to "icehouse-compat" before beginning[0m[37m
172.16.1.170         -# the live upgrade procedure. (string value)[0m[37m
172.16.1.170         -#compute=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.conductor.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Set a version cap for messages sent to conductor services[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#conductor=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.console.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +[DEFAULT][0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Set a version cap for messages sent to console services[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#console=<None>[0m[37m
172.16.1.170         +# LOGS/STATE[0m[37m
172.16.1.170         +debug=False[0m[37m
172.16.1.170         +verbose=False[0m[37m
172.16.1.170         +auth_strategy=keystone[0m[37m
172.16.1.170         +dhcpbridge_flagfile=/etc/nova/nova.conf[0m[37m
172.16.1.170         +dhcpbridge=/usr/bin/nova-dhcpbridge[0m[37m
172.16.1.170         +log_dir=/var/log/nova[0m[37m
172.16.1.170         +state_path=/var/lib/nova[0m[37m
172.16.1.170         +instances_path=/var/lib/nova/instances[0m[37m
172.16.1.170         +lock_path=/var/lib/nova/lock[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Command prefix to use for running commands as root (default: sudo)[0m[37m
172.16.1.170         +rootwrap_config=/etc/nova/rootwrap.conf[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Should unused base images be removed? (default: false)[0m[37m
172.16.1.170         +remove_unused_base_images=true[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Unused unresized base images younger than this will not be removed (default: 86400)[0m[37m
172.16.1.170         +remove_unused_original_minimum_age_seconds=3600[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Options defined in nova.openstack.common.rpc[0m[37m
172.16.1.170         +rpc_thread_pool_size=64[0m[37m
172.16.1.170         +rpc_conn_pool_size=30[0m[37m
172.16.1.170         +rpc_response_timeout=60[0m[37m
172.16.1.170         +rpc_backend=nova.openstack.common.rpc.impl_qpid[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### QPID #####[0m[37m
172.16.1.170         +qpid_hostname=172.16.1.170[0m[37m
172.16.1.170         +qpid_port=5672[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +qpid_password=guest[0m[37m
172.16.1.170         +qpid_username=guest[0m[37m
172.16.1.170         +qpid_sasl_mechanisms=[0m[37m
172.16.1.170         +qpid_reconnect_timeout=0[0m[37m
172.16.1.170         +qpid_reconnect_limit=0[0m[37m
172.16.1.170         +qpid_reconnect_interval_min=0[0m[37m
172.16.1.170         +qpid_reconnect_interval_max=0[0m[37m
172.16.1.170         +qpid_reconnect_interval=0[0m[37m
172.16.1.170         +qpid_heartbeat=60[0m[37m
172.16.1.170         +# qpid protocol. default 'tcp'. set to 'ssl' to enable SSL[0m[37m
172.16.1.170         +qpid_protocol=tcp[0m[37m
172.16.1.170         +qpid_tcp_nodelay=true[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### SCHEDULER #####[0m[37m
172.16.1.170         +# scheduler_manager=nova.scheduler.manager.SchedulerManager[0m[37m
172.16.1.170         +compute_scheduler_driver=nova.scheduler.filter_scheduler.FilterScheduler[0m[37m
172.16.1.170         +scheduler_available_filters=nova.scheduler.filters.all_filters[0m[37m
172.16.1.170         +# which filter class names to use for filtering hosts when not specified in the request.[0m[37m
172.16.1.170         +scheduler_default_filters=AvailabilityZoneFilter,RamFilter,ComputeFilter,CoreFilter,SameHostFilter,DifferentHostFilter[0m[37m
172.16.1.170         +default_availability_zone=nova[0m[37m
172.16.1.170         +default_schedule_zone=nova[0m[37m
172.16.1.170         +storage_availability_zone=nova[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### NETWORK #####[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# N.B. due to https://bugs.launchpad.net/nova/+bug/1206330[0m[37m
172.16.1.170         +# we override the endpoint scheme below, ignore the port[0m[37m
172.16.1.170         +# and essentially force http[0m[37m
172.16.1.170         +neutron_url=http://172.16.1.170:9696[0m[37m
172.16.1.170         +network_api_class=nova.network.neutronv2.api.API[0m[37m
172.16.1.170         +neutron_auth_strategy=keystone[0m[37m
172.16.1.170         +neutron_admin_tenant_name=service[0m[37m
172.16.1.170         +neutron_admin_username=neutron[0m[37m
172.16.1.170         +neutron_admin_password=openstack-network[0m[37m
172.16.1.170         +neutron_admin_auth_url=http://172.16.1.170:5000/v2.0[0m[37m
172.16.1.170         +linuxnet_interface_driver=nova.network.linux_net.LinuxOVSInterfaceDriver[0m[37m
172.16.1.170         +firewall_driver = nova.virt.firewall.NoopFirewallDriver[0m[37m
172.16.1.170         +security_group_api=neutron[0m[37m
172.16.1.170         +service_neutron_metadata_proxy=true[0m[37m
172.16.1.170         +neutron_metadata_proxy_shared_secret=neutron_metadata_secret[0m[37m
172.16.1.170         +default_floating_pool=public[0m[37m
172.16.1.170         +dns_server=8.8.8.8[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### GLANCE #####[0m[37m
172.16.1.170         +image_service=nova.image.glance.GlanceImageService[0m[37m
172.16.1.170         +glance_api_servers=172.16.1.170:9292[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### COMPUTE #####[0m[37m
172.16.1.170         +compute_driver=nova.virt.libvirt.LibvirtDriver[0m[37m
172.16.1.170         +compute_manager=nova.compute.manager.ComputeManager[0m[37m
172.16.1.170         +sql_connection=mysql://nova1:nova@172.16.1.170:3306/nova?charset=utf8[0m[37m
172.16.1.170         +connection_type=libvirt[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +##### NOTIFICATIONS #####[0m[37m
172.16.1.170         +# Driver or drivers to handle sending notifications (multi valued)[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.consoleauth.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +# Generate periodic compute.instance.exists notifications[0m[37m
172.16.1.170         +instance_usage_audit=False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Set a version cap for messages sent to consoleauth services[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#consoleauth=<None>[0m[37m
172.16.1.170         +# Time period to generate instance usages for.  Time period[0m[37m
172.16.1.170         +# must be hour, day, month or year (string value)[0m[37m
172.16.1.170         +instance_usage_audit_period=month[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.network.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +# The IP address on which the OpenStack API will listen. (string value)[0m[37m
172.16.1.170         +osapi_compute_listen=0.0.0.0[0m[37m
172.16.1.170         +# The port on which the OpenStack API will listen. (integer value)[0m[37m
172.16.1.170         +osapi_compute_listen_port=8774[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### VNCPROXY #####[0m[37m
172.16.1.170         +novncproxy_base_url=http://172.16.1.170:6080/vnc_auto.html[0m[37m
172.16.1.170         +xvpvncproxy_base_url=http://172.16.1.170:6081/console[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This is only required on the server running xvpvncproxy[0m[37m
172.16.1.170         +xvpvncproxy_host=0.0.0.0[0m[37m
172.16.1.170         +xvpvncproxy_port=6081[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This is only required on the server running novncproxy[0m[37m
172.16.1.170         +novncproxy_host=0.0.0.0[0m[37m
172.16.1.170         +novncproxy_port=6080[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +vncserver_listen=0.0.0.0[0m[37m
172.16.1.170         +vncserver_proxyclient_address=172.16.1.170[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# store consoleauth tokens in memcached[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### MISC #####[0m[37m
172.16.1.170         +# force backing images to raw format[0m[37m
172.16.1.170         +force_raw_images=false[0m[37m
172.16.1.170         +allow_same_net_traffic=true[0m[37m
172.16.1.170         +osapi_max_limit=1000[0m[37m
172.16.1.170         +# If you terminate SSL with a load balancer, the HTTP_HOST environ[0m[37m
172.16.1.170         +# variable that generates the request_uri in webob.Request will lack[0m[37m
172.16.1.170         +# the HTTPS scheme. Setting this overrides the default and allows[0m[37m
172.16.1.170         +# URIs returned in the various links collections to contain the proper[0m[37m
172.16.1.170         +# HTTPS endpoint.[0m[37m
172.16.1.170         +osapi_compute_link_prefix = http://172.16.1.170:8774/v2/%(tenant_id)s[0m[37m
172.16.1.170         +start_guests_on_host_boot=false[0m[37m
172.16.1.170         +resume_guests_state_on_host_boot=true[0m[37m
172.16.1.170         +allow_resize_to_same_host=false[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### QUOTAS #####[0m[37m
172.16.1.170         +# (StrOpt) default driver to use for quota checks (default: nova.quota.DbQuotaDriver)[0m[37m
172.16.1.170         +quota_driver=nova.quota.DbQuotaDriver[0m[37m
172.16.1.170         +# number of security groups per project (default: 10)[0m[37m
172.16.1.170         +quota_security_groups=50[0m[37m
172.16.1.170         +# number of security rules per security group (default: 20)[0m[37m
172.16.1.170         +quota_security_group_rules=20[0m[37m
172.16.1.170         +# number of instance cores allowed per project (default: 20)[0m[37m
172.16.1.170         +quota_cores=20[0m[37m
172.16.1.170         +# number of fixed ips allowed per project (this should be at least the number of instances allowed) (default: -1)[0m[37m
172.16.1.170         +quota_fixed_ips=-1[0m[37m
172.16.1.170         +# number of floating ips allowed per project (default: 10)[0m[37m
172.16.1.170         +quota_floating_ips=10[0m[37m
172.16.1.170         +# number of bytes allowed per injected file (default: 10240)[0m[37m
172.16.1.170         +quota_injected_file_content_bytes=10240[0m[37m
172.16.1.170         +# number of bytes allowed per injected file path (default: 255)[0m[37m
172.16.1.170         +quota_injected_file_path_bytes=255[0m[37m
172.16.1.170         +# number of injected files allowed (default: 5)[0m[37m
172.16.1.170         +quota_injected_files=5[0m[37m
172.16.1.170         +# number of instances allowed per project (defailt: 10)[0m[37m
172.16.1.170         +quota_instances=10[0m[37m
172.16.1.170         +# number of key pairs per user (default: 100)[0m[37m
172.16.1.170         +quota_key_pairs=100[0m[37m
172.16.1.170         +# number of metadata items allowed per instance (default: 128)[0m[37m
172.16.1.170         +quota_metadata_items=128[0m[37m
172.16.1.170         +# megabytes of instance ram allowed per project (default: 51200)[0m[37m
172.16.1.170         +quota_ram=51200[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# FilterScheduler Only Options[0m[37m
172.16.1.170         +# virtual CPU to Physical CPU allocation ratio (default: 16.0)[0m[37m
172.16.1.170         +cpu_allocation_ratio=16.0[0m[37m
172.16.1.170         +# virtual ram to physical ram allocation ratio (default: 1.5)[0m[37m
172.16.1.170         +ram_allocation_ratio=1.5[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +mkisofs_cmd=genisoimage[0m[37m
172.16.1.170         +injected_network_template=$pybasedir/nova/virt/interfaces.template[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# a list of APIs to enable by default (list value)[0m[37m
172.16.1.170         +enabled_apis=osapi_compute,metadata[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### WORKERS ######[0m[37m
172.16.1.170         +osapi_compute_workers=2[0m[37m
172.16.1.170         +metadata_workers=2[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### VOLUMES #####[0m[37m
172.16.1.170         +# iscsi target user-land tool to use[0m[37m
172.16.1.170         +iscsi_helper=ietadm[0m[37m
172.16.1.170         +volume_api_class=nova.volume.cinder.API[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Set a version cap for messages sent to network services[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#network=<None>[0m[37m
172.16.1.170         +##### THIRD PARTY ADDITIONS #####[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.scheduler.rpcapi[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +[conductor][0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Set a version cap for messages sent to scheduler services[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#scheduler=<None>[0m[37m
172.16.1.170         +use_local=False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[vmware][0m[37m
172.16.1.170         +[libvirt][0m[37m
172.16.1.170          [0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# Options defined in nova.virt.vmwareapi.driver[0m[37m
172.16.1.170         +# Options defined in nova.virt.libvirt.driver[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# URL for connection to VMware ESX/VC host. (string value)[0m[37m
172.16.1.170         -#host_ip=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Username for connection to VMware ESX/VC host. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#host_username=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Password for connection to VMware ESX/VC host. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#host_password=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of a VMware Cluster ComputeResource. Used only if[0m[37m
172.16.1.170         -# compute_driver is vmwareapi.VMwareVCDriver. (multi valued)[0m[37m
172.16.1.170         -#cluster_name=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Regex to match the name of a datastore. Used only if[0m[37m
172.16.1.170         -# compute_driver is vmwareapi.VMwareVCDriver. (string value)[0m[37m
172.16.1.170         -#datastore_regex=<None>[0m[37m
172.16.1.170         +# Rescue ami image (string value)[0m[37m
172.16.1.170         +#rescue_image_id=<None>[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# The interval used for polling of remote tasks. (floating[0m[37m
172.16.1.170         -# point value)[0m[37m
172.16.1.170         -#task_poll_interval=0.5[0m[37m
172.16.1.170         +# Rescue aki image (string value)[0m[37m
172.16.1.170         +#rescue_kernel_id=<None>[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# The number of times we retry on failures, e.g., socket[0m[37m
172.16.1.170         -# error, etc. (integer value)[0m[37m
172.16.1.170         -#api_retry_count=10[0m[37m
172.16.1.170         +# Rescue ari image (string value)[0m[37m
172.16.1.170         +#rescue_ramdisk_id=<None>[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# VNC starting port (integer value)[0m[37m
172.16.1.170         -#vnc_port=5900[0m[37m
172.16.1.170         +# Libvirt domain type (valid options are: kvm, lxc, qemu, uml,[0m[37m
172.16.1.170         +# xen) (string value)[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_type[0m[37m
172.16.1.170         +virt_type=kvm[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Total number of VNC ports (integer value)[0m[37m
172.16.1.170         -#vnc_port_total=10000[0m[37m
172.16.1.170         +# Override the default libvirt URI (which is dependent on[0m[37m
172.16.1.170         +# virt_type) (string value)[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_uri[0m[37m
172.16.1.170         +#connection_uri=[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Whether to use linked clone (boolean value)[0m[37m
172.16.1.170         -#use_linked_clone=true[0m[37m
172.16.1.170         +# Inject the admin password at boot time, without an agent.[0m[37m
172.16.1.170         +# (boolean value)[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_inject_password[0m[37m
172.16.1.170         +inject_password=false[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +# Inject the ssh public key at boot time (boolean value)[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_inject_key[0m[37m
172.16.1.170         +inject_key=true[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.vmwareapi.vif[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +# The partition to inject to : -2 => disable, -1 => inspect[0m[37m
172.16.1.170         +# (libguestfs only), 0 => not partitioned, >0 => partition[0m[37m
172.16.1.170         +# number (integer value)[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_inject_partition[0m[37m
172.16.1.170         +#inject_partition=-2[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Physical ethernet adapter name for vlan networking (string[0m[37m
172.16.1.170         +# Sync virtual and real mouse cursors in Windows VMs (boolean[0m[37m
172.16.1.170          # value)[0m[37m
172.16.1.170         -#vlan_interface=vmnic0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.vmwareapi.vim[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Optional VIM Service WSDL Location e.g[0m[37m
172.16.1.170         -# http://<server>/vimService.wsdl. Optional over-ride to[0m[37m
172.16.1.170         -# default location for bug work-arounds (string value)[0m[37m
172.16.1.170         -#wsdl_location=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.vmwareapi.vim_util[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The maximum number of ObjectContent data objects that should[0m[37m
172.16.1.170         -# be returned in a single result. A positive value will cause[0m[37m
172.16.1.170         -# the operation to suspend the retrieval when the count of[0m[37m
172.16.1.170         -# objects reaches the specified maximum. The server may still[0m[37m
172.16.1.170         -# limit the count to something less than the configured value.[0m[37m
172.16.1.170         -# Any remaining objects may be retrieved with additional[0m[37m
172.16.1.170         -# requests. (integer value)[0m[37m
172.16.1.170         -#maximum_objects=100[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.vmwareapi.vmops[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of Integration Bridge (string value)[0m[37m
172.16.1.170         -#integration_bridge=br-int[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         +#use_usb_tablet=true[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[xenserver][0m[37m
172.16.1.170         +# Migration target URI (any included "%s" is replaced with the[0m[37m
172.16.1.170         +# migration target hostname) (string value)[0m[37m
172.16.1.170         +#live_migration_uri=qemu+tcp://%s/system[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.xenapi.agent[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +# Migration flags to be set for live migration (string value)[0m[37m
172.16.1.170         +#live_migration_flag=VIR_MIGRATE_UNDEFINE_SOURCE, VIR_MIGRATE_PEER2PEER[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of seconds to wait for agent reply (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/agent_timeout[0m[37m
172.16.1.170         -#agent_timeout=30[0m[37m
172.16.1.170         +# Migration flags to be set for block migration (string value)[0m[37m
172.16.1.170         +#block_migration_flag=VIR_MIGRATE_UNDEFINE_SOURCE, VIR_MIGRATE_PEER2PEER, VIR_MIGRATE_NON_SHARED_INC[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of seconds to wait for agent to be fully operational[0m[37m
172.16.1.170         +# Maximum bandwidth to be used during migration, in Mbps[0m[37m
172.16.1.170          # (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/agent_version_timeout[0m[37m
172.16.1.170         -#agent_version_timeout=300[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds to wait for agent reply to resetnetwork[0m[37m
172.16.1.170         -# request (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/agent_resetnetwork_timeout[0m[37m
172.16.1.170         -#agent_resetnetwork_timeout=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Specifies the path in which the XenAPI guest agent should be[0m[37m
172.16.1.170         -# located. If the agent is present, network configuration is[0m[37m
172.16.1.170         -# not injected into the image. Used if[0m[37m
172.16.1.170         -# compute_driver=xenapi.XenAPIDriver and flat_injected=True[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_agent_path[0m[37m
172.16.1.170         -#agent_path=usr/sbin/xe-update-networking[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Disables the use of the XenAPI agent in any image regardless[0m[37m
172.16.1.170         -# of what image properties are present. (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_disable_agent[0m[37m
172.16.1.170         -#disable_agent=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Determines if the XenAPI agent should be used when the image[0m[37m
172.16.1.170         -# used does not contain a hint to declare if the agent is[0m[37m
172.16.1.170         -# present or not. The hint is a glance property[0m[37m
172.16.1.170         -# "xenapi_use_agent" that has the value "True" or "False".[0m[37m
172.16.1.170         -# Note that waiting for the agent when it is not present will[0m[37m
172.16.1.170         -# significantly increase server boot times. (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_use_agent_default[0m[37m
172.16.1.170         -#use_agent_default=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.xenapi.client.session[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +#live_migration_bandwidth=0[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Timeout in seconds for XenAPI login. (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_login_timeout[0m[37m
172.16.1.170         -#login_timeout=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of concurrent XenAPI connections. Used only[0m[37m
172.16.1.170         -# if compute_driver=xenapi.XenAPIDriver (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_connection_concurrent[0m[37m
172.16.1.170         -#connection_concurrent=5[0m[37m
172.16.1.170         +# Snapshot image format (valid options are : raw, qcow2, vmdk,[0m[37m
172.16.1.170         +# vdi). Defaults to same as source image (string value)[0m[37m
172.16.1.170         +snapshot_image_format=qcow2[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +# The libvirt VIF driver to configure the VIFs. (string value)[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_vif_driver[0m[37m
172.16.1.170         +vif_driver=nova.virt.libvirt.vif.LibvirtGenericVIFDriver[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.xenapi.driver[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +# Libvirt handlers for remote volumes. (list value)[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_volume_drivers[0m[37m
172.16.1.170         +#volume_drivers=iscsi=nova.virt.libvirt.volume.LibvirtISCSIVolumeDriver,iser=nova.virt.libvirt.volume.LibvirtISERVolumeDriver,local=nova.virt.libvirt.volume.LibvirtVolumeDriver,fake=nova.virt.libvirt.volume.LibvirtFakeVolumeDriver,rbd=nova.virt.libvirt.volume.LibvirtNetVolumeDriver,sheepdog=nova.virt.libvirt.volume.LibvirtNetVolumeDriver,nfs=nova.virt.libvirt.volume.LibvirtNFSVolumeDriver,aoe=nova.virt.libvirt.volume.LibvirtAOEVolumeDriver,glusterfs=nova.virt.libvirt.volume.LibvirtGlusterfsVolumeDriver,fibre_channel=nova.virt.libvirt.volume.LibvirtFibreChannelVolumeDriver,scality=nova.virt.libvirt.volume.LibvirtScalityVolumeDriver[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# URL for connection to XenServer/Xen Cloud Platform. A[0m[37m
172.16.1.170         -# special value of unix://local can be used to connect to the[0m[37m
172.16.1.170         -# local unix socket.  Required if[0m[37m
172.16.1.170         -# compute_driver=xenapi.XenAPIDriver (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_connection_url[0m[37m
172.16.1.170         -#connection_url=<None>[0m[37m
172.16.1.170         +# Override the default disk prefix for the devices attached to[0m[37m
172.16.1.170         +# a server, which is dependent on virt_type. (valid options[0m[37m
172.16.1.170         +# are: sd, xvd, uvd, vd) (string value)[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_disk_prefix[0m[37m
172.16.1.170         +#disk_prefix=<None>[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Username for connection to XenServer/Xen Cloud Platform.[0m[37m
172.16.1.170         -# Used only if compute_driver=xenapi.XenAPIDriver (string[0m[37m
172.16.1.170         +# Number of seconds to wait for instance to shut down after[0m[37m
172.16.1.170         +# soft reboot request is made. We fall back to hard reboot if[0m[37m
172.16.1.170         +# instance does not shutdown within this window. (integer[0m[37m
172.16.1.170          # value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_connection_username[0m[37m
172.16.1.170         -#connection_username=root[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_wait_soft_reboot_seconds[0m[37m
172.16.1.170         +#wait_soft_reboot_seconds=120[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Password for connection to XenServer/Xen Cloud Platform.[0m[37m
172.16.1.170         -# Used only if compute_driver=xenapi.XenAPIDriver (string[0m[37m
172.16.1.170         +# Set to "host-model" to clone the host CPU feature flags; to[0m[37m
172.16.1.170         +# "host-passthrough" to use the host CPU model exactly; to[0m[37m
172.16.1.170         +# "custom" to use a named CPU model; to "none" to not set any[0m[37m
172.16.1.170         +# CPU model. If virt_type="kvm|qemu", it will default to[0m[37m
172.16.1.170         +# "host-model", otherwise it will default to "none" (string[0m[37m
172.16.1.170          # value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_connection_password[0m[37m
172.16.1.170         -#connection_password=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The interval used for polling of coalescing vhds. Used only[0m[37m
172.16.1.170         -# if compute_driver=xenapi.XenAPIDriver (floating point value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_vhd_coalesce_poll_interval[0m[37m
172.16.1.170         -#vhd_coalesce_poll_interval=5.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Ensure compute service is running on host XenAPI connects[0m[37m
172.16.1.170         -# to. (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_check_host[0m[37m
172.16.1.170         -#check_host=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Max number of times to poll for VHD to coalesce. Used only[0m[37m
172.16.1.170         -# if compute_driver=xenapi.XenAPIDriver (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_vhd_coalesce_max_attempts[0m[37m
172.16.1.170         -#vhd_coalesce_max_attempts=20[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Base path to the storage repository (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_sr_base_path[0m[37m
172.16.1.170         -#sr_base_path=/var/run/sr-mount[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The iSCSI Target Host (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/target_host[0m[37m
172.16.1.170         -#target_host=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The iSCSI Target Port, default is port 3260 (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/target_port[0m[37m
172.16.1.170         -#target_port=3260[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# IQN Prefix (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/iqn_prefix[0m[37m
172.16.1.170         -#iqn_prefix=iqn.2010-10.org.openstack[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Used to enable the remapping of VBD dev (Works around an[0m[37m
172.16.1.170         -# issue in Ubuntu Maverick) (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_remap_vbd_dev[0m[37m
172.16.1.170         -#remap_vbd_dev=false[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Specify prefix to remap VBD dev to (ex. /dev/xvdb ->[0m[37m
172.16.1.170         -# /dev/sdb) (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_remap_vbd_dev_prefix[0m[37m
172.16.1.170         -#remap_vbd_dev_prefix=sd[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.xenapi.image.bittorrent[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Base URL for torrent files. (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_torrent_base_url[0m[37m
172.16.1.170         -#torrent_base_url=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Probability that peer will become a seeder. (1.0 = 100%)[0m[37m
172.16.1.170         -# (floating point value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_torrent_seed_chance[0m[37m
172.16.1.170         -#torrent_seed_chance=1.0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds after downloading an image via BitTorrent[0m[37m
172.16.1.170         -# that it should be seeded for other peers. (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_torrent_seed_duration[0m[37m
172.16.1.170         -#torrent_seed_duration=3600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Cached torrent files not accessed within this number of[0m[37m
172.16.1.170         -# seconds can be reaped (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_torrent_max_last_accessed[0m[37m
172.16.1.170         -#torrent_max_last_accessed=86400[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Beginning of port range to listen on (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_torrent_listen_port_start[0m[37m
172.16.1.170         -#torrent_listen_port_start=6881[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# End of port range to listen on (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_torrent_listen_port_end[0m[37m
172.16.1.170         -#torrent_listen_port_end=6891[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds a download can remain at the same progress[0m[37m
172.16.1.170         -# percentage w/o being considered a stall (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_torrent_download_stall_cutoff[0m[37m
172.16.1.170         -#torrent_download_stall_cutoff=600[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of seeder processes to run concurrently[0m[37m
172.16.1.170         -# within a given dom0. (-1 = no limit) (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_torrent_max_seeder_processes_per_host[0m[37m
172.16.1.170         -#torrent_max_seeder_processes_per_host=1[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.xenapi.pool[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# To use for hosts with different CPUs (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/use_join_force[0m[37m
172.16.1.170         -#use_join_force=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_cpu_mode[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.xenapi.vif[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +# Set to a named libvirt CPU model (see names listed in[0m[37m
172.16.1.170         +# /usr/share/libvirt/cpu_map.xml). Only has effect if[0m[37m
172.16.1.170         +# cpu_mode="custom" and virt_type="kvm|qemu" (string value)[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_cpu_model[0m[37m
172.16.1.170         +#cpu_model=<none>[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Name of Integration Bridge used by Open vSwitch (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_ovs_integration_bridge[0m[37m
172.16.1.170         -#ovs_integration_bridge=xapi1[0m[37m
172.16.1.170         +# Location where libvirt driver will store snapshots before[0m[37m
172.16.1.170         +# uploading them to image service (string value)[0m[37m
172.16.1.170         +# Deprecated group/name - [DEFAULT]/libvirt_snapshots_directory[0m[37m
172.16.1.170         +#snapshots_directory=$instances_path/snapshots[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +# Location where the Xen hvmloader is kept (string value)[0m[37m
172.16.1.170         +#xen_hvmloader_path=/usr/lib/xen/boot/hvmloader[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# Options defined in nova.virt.xenapi.vm_utils[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +# Specific cachemodes to use for different disk types e.g:[0m[37m
172.16.1.170         +# file=directsync,block=none (list value)[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Cache glance images locally. `all` will cache all images,[0m[37m
172.16.1.170         -# `some` will only cache images that have the image_property[0m[37m
172.16.1.170         -# `cache_in_nova=True`, and `none` turns off caching entirely[0m[37m
172.16.1.170         +# A path to a device that will be used as source of entropy on[0m[37m
172.16.1.170         +# the host. Permitted options are: /dev/random or /dev/hwrng[0m[37m
172.16.1.170          # (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/cache_images[0m[37m
172.16.1.170         -#cache_images=all[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Compression level for images, e.g., 9 for gzip -9. Range is[0m[37m
172.16.1.170         -# 1-9, 9 being most compressed but most CPU intensive on dom0.[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_image_compression_level[0m[37m
172.16.1.170         -#image_compression_level=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Default OS type (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/default_os_type[0m[37m
172.16.1.170         -#default_os_type=linux[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Time to wait for a block device to be created (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/block_device_creation_timeout[0m[37m
172.16.1.170         -#block_device_creation_timeout=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum size in bytes of kernel or ramdisk images (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/max_kernel_ramdisk_size[0m[37m
172.16.1.170         -#max_kernel_ramdisk_size=16777216[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Filter for finding the SR to be used to install guest[0m[37m
172.16.1.170         -# instances on. To use the Local Storage in default[0m[37m
172.16.1.170         -# XenServer/XCP installations set this flag to other-config[0m[37m
172.16.1.170         -# :i18n-key=local-storage. To select an SR with a different[0m[37m
172.16.1.170         -# matching criteria, you could set it to other-[0m[37m
172.16.1.170         -# config:my_favorite_sr=true. On the other hand, to fall back[0m[37m
172.16.1.170         -# on the Default SR, as displayed by XenCenter, set this flag[0m[37m
172.16.1.170         -# to: default-sr:true (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/sr_matching_filter[0m[37m
172.16.1.170         -#sr_matching_filter=default-sr:true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether to use sparse_copy for copying data on a resize down[0m[37m
172.16.1.170         -# (False will use standard dd). This speeds up resizes down[0m[37m
172.16.1.170         -# considerably since large runs of zeros won't have to be[0m[37m
172.16.1.170         -# rsynced (boolean value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_sparse_copy[0m[37m
172.16.1.170         -#sparse_copy=true[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Maximum number of retries to unplug VBD (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_num_vbd_unplug_retries[0m[37m
172.16.1.170         -#num_vbd_unplug_retries=10[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Whether or not to download images via Bit Torrent[0m[37m
172.16.1.170         -# (all|some|none). (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_torrent_images[0m[37m
172.16.1.170         -#torrent_images=none[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of network to use for booting iPXE ISOs (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_ipxe_network_name[0m[37m
172.16.1.170         -#ipxe_network_name=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# URL to the iPXE boot menu (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_ipxe_boot_menu_url[0m[37m
172.16.1.170         -#ipxe_boot_menu_url=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name and optionally path of the tool used for ISO image[0m[37m
172.16.1.170         -# creation (string value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_ipxe_mkisofs_cmd[0m[37m
172.16.1.170         -#ipxe_mkisofs_cmd=mkisofs[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         +#rng_dev_path=<None>[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# Options defined in nova.virt.xenapi.vmops[0m[37m
172.16.1.170         +# Options defined in nova.virt.libvirt.imagecache[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of seconds to wait for instance to go to running[0m[37m
172.16.1.170         -# state (integer value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_running_timeout[0m[37m
172.16.1.170         -#running_timeout=60[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The XenAPI VIF driver using XenServer Network APIs. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_vif_driver[0m[37m
172.16.1.170         -#vif_driver=nova.virt.xenapi.vif.XenAPIBridgeDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Dom0 plugin driver used to handle image uploads. (string[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -# Deprecated group/name - [DEFAULT]/xenapi_image_upload_handler[0m[37m
172.16.1.170         -#image_upload_handler=nova.virt.xenapi.image.glance.GlanceStore[0m[37m
172.16.1.170         +# Unused resized base images younger than this will not be removed (default: 3600)[0m[37m
172.16.1.170         +remove_unused_resized_minimum_age_seconds=3600[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         +# Write a checksum for files in _base to disk (default: false)[0m[37m
172.16.1.170         +checksum_base_images=false[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# Options defined in nova.virt.xenapi.volume_utils[0m[37m
172.16.1.170         +# Options defined in nova.virt.libvirt.vif[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of seconds to wait for an SR to settle if the VDI[0m[37m
172.16.1.170         -# does not exist when first introduced  (integer value)[0m[37m
172.16.1.170         -#introduce_vdi_retry_wait=20[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[zookeeper][0m[37m
172.16.1.170         +use_virtio_for_bridges=true[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# Options defined in nova.servicegroup.drivers.zk[0m[37m
172.16.1.170         +# Options defined in nova.virt.libvirt.imagebackend[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# The ZooKeeper addresses for servicegroup service in the[0m[37m
172.16.1.170         -# format of host1:port,host2:port,host3:port (string value)[0m[37m
172.16.1.170         -#address=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The recv_timeout parameter for the zk session (integer[0m[37m
172.16.1.170         -# value)[0m[37m
172.16.1.170         -#recv_timeout=4000[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# The prefix used in ZooKeeper to store ephemeral nodes[0m[37m
172.16.1.170         -# (string value)[0m[37m
172.16.1.170         -#sg_prefix=/servicegroups[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of seconds to wait until retrying to join the session[0m[37m
172.16.1.170         -# (integer value)[0m[37m
172.16.1.170         -#sg_retry_interval=5[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         +# VM Images format. Acceptable values are: raw, qcow2, lvm, rbd, default. If default is specified,[0m[37m
172.16.1.170         +# then use_cow_images flag is used instead of this one.[0m[37m
172.16.1.170         +images_type=default[0m[37m
172.16.1.170          [0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/nova/rootwrap.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/nova/rootwrap.conf] from 893b0c to bbbfe5[0m[37m
172.16.1.170         --- /etc/nova/rootwrap.conf	2014-02-26 07:07:09.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-87a20a	2014-08-08 01:51:45.736999965 +0800[0m[37m
172.16.1.170         @@ -1,3 +1,8 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          # Configuration for nova-rootwrap[0m[37m
172.16.1.170          # This file should be owned by (and only-writeable by) the root user[0m[37m
172.16.1.170          [0m
172.16.1.170 [0m
172.16.1.170   * template[/root/openrc] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/root/openrc][0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-yj4fk	2014-08-08 01:51:45.958999965 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-qbbds9	2014-08-08 01:51:45.957999965 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,27 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# COMMON OPENSTACK ENVS[0m[37m
172.16.1.170         +export OS_USERNAME=admin[0m[37m
172.16.1.170         +export OS_PASSWORD=admin[0m[37m
172.16.1.170         +export OS_TENANT_NAME=admin[0m[37m
172.16.1.170         +export OS_AUTH_URL=http://172.16.1.170:5000/v2.0[0m[37m
172.16.1.170         +export OS_AUTH_STRATEGY=keystone[0m[37m
172.16.1.170         +export OS_REGION_NAME=RegionOne[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# LEGACY NOVA ENVS[0m[37m
172.16.1.170         +export NOVA_USERNAME=${OS_USERNAME}[0m[37m
172.16.1.170         +export NOVA_PROJECT_ID=${OS_TENANT_NAME}[0m[37m
172.16.1.170         +export NOVA_PASSWORD=${OS_PASSWORD}[0m[37m
172.16.1.170         +export NOVA_API_KEY=${OS_PASSWORD}[0m[37m
172.16.1.170         +export NOVA_URL=${OS_AUTH_URL}[0m
172.16.1.170 [37m
172.16.1.170         +export NOVA_VERSION=[0m[37m
172.16.1.170         +export NOVA_REGION_NAME=RegionOne[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# EUCA2OOLs ENV VARIABLES[0m[37m
172.16.1.170         +export EC2_ACCESS_KEY=6eec33328fbd4e988c98602d839d5493[0m[37m
172.16.1.170         +export EC2_SECRET_KEY=34dd7fbac8514fd0adcefa99047dbc62[0m[37m
172.16.1.170         +export EC2_URL=http://172.16.1.170:8773/services/Cloud[0m[37m
172.16.1.170         +[0m
172.16.1.170 [0m
172.16.1.170   * execute[enable nova login] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute usermod -s /bin/sh nova[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::nova-setup[0m
172.16.1.170   * execute[nova-manage db sync] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute nova-manage db sync[0m
172.16.1.170 [0m
172.16.1.170   * package[python-neutronclient] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[pyparsing] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * cookbook_file[/usr/local/bin/add_floaters.py] action create[0m
172.16.1.170 [32m
172.16.1.170     - create a new cookbook_file /usr/local/bin/add_floaters.py[0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-57q0vz	2014-08-08 01:53:53.927999964 +0800[0m[37m
172.16.1.170         +++ /var/chef/cache/cookbooks/openstack-compute/files/default/add_floaters.py	2014-08-08 01:53:53.926999959 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,148 @@[0m[37m
172.16.1.170         +#! /usr/bin/env python[0m[37m
172.16.1.170         +# vim: tabstop=4 shiftwidth=4 softtabstop=4[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Copyright 2013 AT&T Services, Inc.[0m[37m
172.16.1.170         +# All Rights Reserved.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +#    Licensed under the Apache License, Version 2.0 (the "License"); you may[0m[37m
172.16.1.170         +#    not use this file except in compliance with the License. You may obtain[0m[37m
172.16.1.170         +#    a copy of the License at[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +#         http://www.apache.org/licenses/LICENSE-2.0[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +#    Unless required by applicable law or agreed to in writing, software[0m[37m
172.16.1.170         +#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT[0m[37m
172.16.1.170         +#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the[0m[37m
172.16.1.170         +#    License for the specific language governing permissions and limitations[0m[37m
172.16.1.170         +#    under the License.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +import argparse[0m[37m
172.16.1.170         +import subprocess[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +import netaddr[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +DESCRIPTION = "A `nova-manage floating create` and `neutron net create` wrapper."[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +class FloatingAddress(object):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    A simple wrapper class for creating networks.  Often[0m[37m
172.16.1.170         +    times there are reserved addresses at the start of a[0m[37m
172.16.1.170         +    network, nova-manage doesn't account for this.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    TODO(retr0h): This should really be added to nova-manage.[0m[37m
172.16.1.170         +    TODO(jaypipes): Instead of subprocess calls, just use the neutronclient[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def __init__(self, args):[0m[37m
172.16.1.170         +        self._args = args[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def nova_add_cidr(self, cidr):[0m[37m
172.16.1.170         +        """[0m[37m
172.16.1.170         +        Validates the provided cider address, and passes it to nova-manage.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        :param cidr: A string containing a valid CIDR address.[0m[37m
172.16.1.170         +        """[0m[37m
172.16.1.170         +        netaddr.IPNetwork(cidr)[0m
172.16.1.170 [37m
172.16.1.170         +        self.nova_add_floating(cidr)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def nova_add_range(self, start, end):[0m[37m
172.16.1.170         +        """[0m[37m
172.16.1.170         +        Takes a start and end range, and creates individual host addresses.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        :param start: A string containing the start of the range.[0m[37m
172.16.1.170         +        :param end: A string containing the end of the range.[0m[37m
172.16.1.170         +        """[0m[37m
172.16.1.170         +        ip_list = list(netaddr.iter_iprange(start, end))[0m[37m
172.16.1.170         +        for ip in ip_list:[0m[37m
172.16.1.170         +            self.nova_add_floating(ip)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def nova_add_floating(self, ip):[0m[37m
172.16.1.170         +        cmd = "nova-manage floating create --ip_range={0}".format(ip)[0m[37m
172.16.1.170         +        if self._args.pool:[0m[37m
172.16.1.170         +            cmd += ' --pool={0}'.format(self._args.pool)[0m[37m
172.16.1.170         +        if self._args.interface:[0m[37m
172.16.1.170         +            cmd += ' --interface={0}'.format(self._args.interface)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        subprocess.check_call(cmd, shell=True)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def neutron_add_floating(self, cidr):[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        # convert cidr string to IPNetwork object[0m[37m
172.16.1.170         +        cidr = netaddr.IPNetwork(cidr)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        # ensure we have a public network and we only ever create one[0m[37m
172.16.1.170         +        cmd = "NETLIST=$(neutron net-list -c name); if [ $? -eq 0 ]; then if ! echo $NETLIST | grep -q %s; then neutron net-create %s -- --router:external=True; fi; fi;" % (self._args.pool, self._args.pool)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        try:[0m[37m
172.16.1.170         +            subprocess.check_call(cmd, shell=True)[0m[37m
172.16.1.170         +        except:[0m[37m
172.16.1.170         +            # we failed to query the quanutm api, we'll ignore this error[0m[37m
172.16.1.170         +            # and return now so any surrounding chef runs can continue[0m[37m
172.16.1.170         +            # since this script may actually be running on the neutron api[0m[37m
172.16.1.170         +            print "ERROR: Failed to query the neutron api for the public network"[0m[37m
172.16.1.170         +            return[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        cmd = "neutron subnet-list -Fcidr -fcsv --quote=none | grep '%s'" % cidr[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        res = subprocess.call(cmd, shell=True)[0m[37m
172.16.1.170         +        if res == 0:[0m[37m
172.16.1.170         +            # Subnet has already been created...[0m[37m
172.16.1.170         +            return[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        # calculate the start and end values[0m[37m
172.16.1.170         +        ip_start = cidr.ip[0m[37m
172.16.1.170         +        ip_end = netaddr.IPAddress(cidr.last-1)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        # create a new subnet[0m[37m
172.16.1.170         +        cmd = "neutron subnet-create --allocation-pool start=%s,end=%s %s %s -- --enable_dhcp=False" % \[0m[37m
172.16.1.170         +              (ip_start, ip_end, self._args.pool, cidr)[0m[37m
172.16.1.170         +        subprocess.check_call(cmd, shell=True)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def parse_args():[0m[37m
172.16.1.170         +    ap = argparse.ArgumentParser(description=DESCRIPTION)[0m[37m
172.16.1.170         +    subparsers = ap.add_subparsers(help='sub-command help', dest='subparser_name')[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # create the parser for the "nova" command[0m[37m
172.16.1.170         +    parser_nova = subparsers.add_parser('nova', help='Use Nova Backend')[0m[37m
172.16.1.170         +    parser_nova.add_argument('--pool',[0m
172.16.1.170 [37m
172.16.1.170         +                             required=True,[0m[37m
172.16.1.170         +                             help="Name of the floating pool")[0m[37m
172.16.1.170         +    parser_nova.add_argument('--interface',[0m[37m
172.16.1.170         +                             required=False,[0m[37m
172.16.1.170         +                             help="Network interface to bring the floating "[0m[37m
172.16.1.170         +                                  "addresses up on")[0m[37m
172.16.1.170         +    group = parser_nova.add_mutually_exclusive_group(required=True)[0m[37m
172.16.1.170         +    group.add_argument('--cidr',[0m[37m
172.16.1.170         +                       help="A CIDR notation of addresses to add "[0m[37m
172.16.1.170         +                            "(e.g. 192.168.0.0/24)")[0m[37m
172.16.1.170         +    group.add_argument('--ip-range',[0m[37m
172.16.1.170         +                       help="A range of addresses to add "[0m[37m
172.16.1.170         +                            "(e.g. 192.168.0.10,192.168.0.50)")[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # create the parser for the "neutron command"[0m[37m
172.16.1.170         +    parser_neutron = subparsers.add_parser('neutron', help='Use Neutron Backend')[0m[37m
172.16.1.170         +    parser_neutron.add_argument('--cidr',[0m[37m
172.16.1.170         +                                required=True,[0m[37m
172.16.1.170         +                                help="A CIDR notation of addresses to add "[0m[37m
172.16.1.170         +                                     "(e.g. 192.168.0.11/24 to start at .11 "[0m[37m
172.16.1.170         +                                     "and end at .254)")[0m[37m
172.16.1.170         +    parser_neutron.add_argument('--pool',[0m[37m
172.16.1.170         +                                required=True,[0m[37m
172.16.1.170         +                                help="Name of the public network")[0m[37m
172.16.1.170         +    return ap.parse_args()[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +if __name__ == '__main__':[0m[37m
172.16.1.170         +    args = parse_args()[0m[37m
172.16.1.170         +    fa = FloatingAddress(args)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    if args.subparser_name == 'nova':[0m[37m
172.16.1.170         +        if args.cidr:[0m[37m
172.16.1.170         +            fa.nova_add_cidr(args.cidr)[0m[37m
172.16.1.170         +        elif args.ip_range:[0m[37m
172.16.1.170         +            start, end = args.ip_range.split(',')[0m[37m
172.16.1.170         +            fa.nova_add_range(start, end)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    elif args.subparser_name == 'neutron':[0m[37m
172.16.1.170         +        fa.neutron_add_floating(args.cidr)[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::identity_registration[0m
172.16.1.170   * openstack-identity_register[Register Service Tenant] action create_tenant[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * openstack-identity_register[Register Service User] action create_user[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Grant 'admin' Role to Service User for Service Tenant] action grant_role[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register Compute Service] action create_service[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register Compute Endpoint] action create_endpoint[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::api-ec2[0m
172.16.1.170   * directory[/var/lock/nova] action create[0m[32m
172.16.1.170     - create new directory /var/lock/nova[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '' to '0700'[0m[32m
172.16.1.170     - change owner from '' to 'nova'[0m[32m
172.16.1.170     - change group from '' to 'nova'[0m
172.16.1.170 [0m
172.16.1.170   * package[python-keystoneclient] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[openstack-nova-api] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package openstack-nova-api from uninstalled to 2014.1-201402251728.ibm.el6.85[0m
172.16.1.170 [0m
172.16.1.170   * service[nova-api-ec2] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[nova-api-ec2][0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/nova/api-paste.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/nova/api-paste.ini] from 4de07a to bc4354[0m[37m
172.16.1.170         --- /etc/nova/api-paste.ini	2014-02-26 07:30:33.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1sshwuj	2014-08-08 01:54:02.568999966 +0800[0m[37m
172.16.1.170         @@ -1,3 +1,8 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          ############[0m[37m
172.16.1.170          # Metadata #[0m[37m
172.16.1.170          ############[0m
172.16.1.170 [37m
172.16.1.170         @@ -11,46 +16,6 @@[0m[37m
172.16.1.170          [app:metaapp][0m[37m
172.16.1.170          paste.app_factory = nova.api.metadata.handler:MetadataRequestHandler.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -#######[0m[37m
172.16.1.170         -# EC2 #[0m[37m
172.16.1.170         -#######[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[composite:ec2][0m[37m
172.16.1.170         -use = egg:Paste#urlmap[0m[37m
172.16.1.170         -/services/Cloud: ec2cloud[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[composite:ec2cloud][0m[37m
172.16.1.170         -use = call:nova.api.auth:pipeline_factory[0m[37m
172.16.1.170         -noauth = ec2faultwrap logrequest ec2noauth cloudrequest validator ec2executor[0m[37m
172.16.1.170         -keystone = ec2faultwrap logrequest ec2keystoneauth cloudrequest validator ec2executor[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[filter:ec2faultwrap][0m[37m
172.16.1.170         -paste.filter_factory = nova.api.ec2:FaultWrapper.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[filter:logrequest][0m[37m
172.16.1.170         -paste.filter_factory = nova.api.ec2:RequestLogging.factory[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -[filter:ec2lockout][0m[37m
172.16.1.170         -paste.filter_factory = nova.api.ec2:Lockout.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[filter:ec2keystoneauth][0m[37m
172.16.1.170         -paste.filter_factory = nova.api.ec2:EC2KeystoneAuth.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[filter:ec2noauth][0m[37m
172.16.1.170         -paste.filter_factory = nova.api.ec2:NoAuth.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[filter:cloudrequest][0m[37m
172.16.1.170         -controller = nova.api.ec2.cloud.CloudController[0m[37m
172.16.1.170         -paste.filter_factory = nova.api.ec2:Requestify.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[filter:authorizer][0m[37m
172.16.1.170         -paste.filter_factory = nova.api.ec2:Authorizer.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[filter:validator][0m[37m
172.16.1.170         -paste.filter_factory = nova.api.ec2:Validator.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[app:ec2executor][0m[37m
172.16.1.170         -paste.app_factory = nova.api.ec2:Executor.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          #############[0m[37m
172.16.1.170          # Openstack #[0m[37m
172.16.1.170         @@ -61,7 +26,6 @@[0m[37m
172.16.1.170          /: oscomputeversions[0m[37m
172.16.1.170          /v1.1: openstack_compute_api_v2[0m[37m
172.16.1.170          /v2: openstack_compute_api_v2[0m
172.16.1.170 [37m
172.16.1.170         -/v3: openstack_compute_api_v3[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [composite:openstack_compute_api_v2][0m[37m
172.16.1.170          use = call:nova.api.auth:pipeline_factory[0m[37m
172.16.1.170         @@ -69,22 +33,20 @@[0m[37m
172.16.1.170          keystone = faultwrap sizelimit authtoken keystonecontext ratelimit osapi_compute_app_v2[0m[37m
172.16.1.170          keystone_nolimit = faultwrap sizelimit authtoken keystonecontext osapi_compute_app_v2[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[composite:openstack_compute_api_v3][0m[37m
172.16.1.170         -use = call:nova.api.auth:pipeline_factory_v3[0m[37m
172.16.1.170         -noauth = faultwrap sizelimit noauth_v3 osapi_compute_app_v3[0m[37m
172.16.1.170         -keystone = faultwrap sizelimit authtoken keystonecontext osapi_compute_app_v3[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          [filter:faultwrap][0m[37m
172.16.1.170          paste.filter_factory = nova.api.openstack:FaultWrapper.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [filter:noauth][0m[37m
172.16.1.170          paste.filter_factory = nova.api.openstack.auth:NoAuthMiddleware.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[filter:noauth_v3][0m[37m
172.16.1.170         -paste.filter_factory = nova.api.openstack.auth:NoAuthMiddlewareV3.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          [filter:ratelimit][0m[37m
172.16.1.170          paste.filter_factory = nova.api.openstack.compute.limits:RateLimitingMiddleware.factory[0m[37m
172.16.1.170         +limits =[0m[37m
172.16.1.170         +  ( POST, *, .*, 10, MINUTE );[0m[37m
172.16.1.170         +  ( POST, */servers, ^/servers, 50, DAY );[0m[37m
172.16.1.170         +  ( PUT, *, .*, 10, MINUTE );[0m[37m
172.16.1.170         +  ( GET, *changes-since*, .*changes-since.*, 3, MINUTE );[0m
172.16.1.170 [37m
172.16.1.170         +  ( DELETE, *, .*, 100, MINUTE )[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [filter:sizelimit][0m[37m
172.16.1.170          paste.filter_factory = nova.api.sizelimit:RequestBodySizeLimiter.factory[0m[37m
172.16.1.170         @@ -92,9 +54,6 @@[0m[37m
172.16.1.170          [app:osapi_compute_app_v2][0m[37m
172.16.1.170          paste.app_factory = nova.api.openstack.compute:APIRouter.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[app:osapi_compute_app_v3][0m[37m
172.16.1.170         -paste.app_factory = nova.api.openstack.compute:APIRouterV3.factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          [pipeline:oscomputeversions][0m[37m
172.16.1.170          pipeline = faultwrap oscomputeversionapp[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         @@ -110,3 +69,13 @@[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [filter:authtoken][0m[37m
172.16.1.170          paste.filter_factory = keystoneclient.middleware.auth_token:filter_factory[0m[37m
172.16.1.170         +auth_uri = http://172.16.1.170:5000/v2.0[0m[37m
172.16.1.170         +auth_host = 172.16.1.170[0m[37m
172.16.1.170         +auth_port = 35357[0m[37m
172.16.1.170         +auth_protocol = http[0m[37m
172.16.1.170         +auth_version = v2.0[0m[37m
172.16.1.170         +admin_tenant_name = service[0m[37m
172.16.1.170         +admin_user = nova[0m[37m
172.16.1.170         +admin_password = openstack-compute[0m[37m
172.16.1.170         +signing_dir = /var/cache/nova/api[0m[37m
172.16.1.170         +[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::api-os-compute[0m
172.16.1.170   * directory[/var/lock/nova] action create[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * directory[/var/cache/nova] action create[0m[32m
172.16.1.170     - create new directory /var/cache/nova[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '' to '0700'[0m[32m
172.16.1.170     - change owner from '' to 'nova'[0m[32m
172.16.1.170     - change group from '' to 'nova'[0m
172.16.1.170 [0m
172.16.1.170   * package[python-keystoneclient] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[openstack-nova-api] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[nova-api-os-compute] action enable[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[nova-api-os-compute] action start[0m
172.16.1.170 [32m
172.16.1.170     - start service service[nova-api-os-compute][0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/nova/api-paste.ini] action create[0m
172.16.1.170  (up to date)[0m
172.16.1.170 Recipe: openstack-compute::api-metadata[0m
172.16.1.170   * directory[/var/lock/nova] action create[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[python-keystoneclient] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[openstack-nova-api] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[nova-api-metadata] action enable[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * template[/etc/nova/api-paste.ini] action create[0m
172.16.1.170  (up to date)[0m
172.16.1.170 Recipe: openstack-compute::vncproxy[0m
172.16.1.170   * package[openstack-nova-novncproxy] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package openstack-nova-novncproxy from uninstalled to 2014.1-201402251728.ibm.el6.85[0m
172.16.1.170 [0m
172.16.1.170   * package[openstack-nova-console] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package openstack-nova-console from uninstalled to 2014.1-201402251728.ibm.el6.85[0m
172.16.1.170 [0m
172.16.1.170   * service[openstack-nova-novncproxy] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[openstack-nova-novncproxy][0m
172.16.1.170 [0m
172.16.1.170   * service[openstack-nova-novncproxy] action start[0m
172.16.1.170 [32m
172.16.1.170     - start service service[openstack-nova-novncproxy][0m
172.16.1.170 [0m
172.16.1.170   * service[nova-consoleauth] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[nova-consoleauth][0m
172.16.1.170 [0m
172.16.1.170   * service[nova-consoleauth] action start[0m
172.16.1.170 [32m
172.16.1.170     - start service service[nova-consoleauth][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::scheduler[0m
172.16.1.170   * directory[/var/lock/nova] action create[0m (up to date)[0m
172.16.1.170   * package[openstack-nova-scheduler] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package openstack-nova-scheduler from uninstalled to 2014.1-201402251728.ibm.el6.85[0m
172.16.1.170 [0m
172.16.1.170   * service[nova-scheduler] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[nova-scheduler][0m
172.16.1.170 [0m
172.16.1.170   * service[nova-scheduler] action start[0m
172.16.1.170 [32m
172.16.1.170     - start service service[nova-scheduler][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::conductor[0m
172.16.1.170   * package[openstack-nova-conductor] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package openstack-nova-conductor from uninstalled to 2014.1-201402251728.ibm.el6.85[0m
172.16.1.170 [0m
172.16.1.170   * service[nova-conductor] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[nova-conductor][0m
172.16.1.170 [0m
172.16.1.170   * service[nova-conductor] action start[0m
172.16.1.170 [32m
172.16.1.170     - start service service[nova-conductor][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::nova-cert[0m
172.16.1.170   * package[openstack-nova-cert] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package openstack-nova-cert from uninstalled to 2014.1-201402251728.ibm.el6.85[0m
172.16.1.170 [0m
172.16.1.170   * service[nova-cert] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[nova-cert][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-network::common[0m
172.16.1.170   * package[openstack-nova-network] action purge[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[openstack-neutron] action install[0m
172.16.1.170 [32m
172.16.1.170     - install version 2014.1-201402251722.ibm.el6.68 of package openstack-neutron[0m
172.16.1.170 [0m
172.16.1.170   * package[openstack-neutron-ml2] action install[0m
172.16.1.170 [32m
172.16.1.170     - install version 2014.1-201402251722.ibm.el6.68 of package openstack-neutron-ml2[0m
172.16.1.170 [0m
172.16.1.170   * package[MySQL-python] action install[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * directory[/etc/neutron/plugins] action create[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '02755' to '0700'[0m[32m
172.16.1.170     - change owner from 'root' to 'neutron'[0m[32m
172.16.1.170     - change group from 'root' to 'neutron'[0m
172.16.1.170 [0m
172.16.1.170   * directory[/var/cache/neutron] action create[0m[32m
172.16.1.170     - create new directory /var/cache/neutron[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '' to '0700'[0m[32m
172.16.1.170     - change owner from '' to 'neutron'[0m[32m
172.16.1.170     - change group from '' to 'neutron'[0m
172.16.1.170 [0m
172.16.1.170   * directory[/var/cache/neutron] action create[0m (skipped due to only_if)[0m
172.16.1.170   * template[/etc/neutron/rootwrap.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/neutron/rootwrap.conf] from 1048ad to 7e63c4[0m[37m
172.16.1.170         --- /etc/neutron/rootwrap.conf	2014-02-26 07:04:39.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1afuou0	2014-08-08 01:54:57.596999966 +0800[0m[37m
172.16.1.170         @@ -1,34 +1,9 @@[0m[37m
172.16.1.170         -# Configuration for neutron-rootwrap[0m[37m
172.16.1.170         -# This file should be owned by (and only-writeable by) the root user[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [DEFAULT][0m[37m
172.16.1.170          # List of directories to load filter definitions from (separated by ',').[0m[37m
172.16.1.170          # These directories MUST all be only writeable by root ![0m[37m
172.16.1.170         -filters_path=/etc/neutron/rootwrap.d,/usr/share/neutron/rootwrap,/etc/quantum/rootwrap.d,/usr/share/quantum/rootwrap[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# List of directories to search executables in, in case filters do not[0m[37m
172.16.1.170         -# explicitely specify a full path (separated by ',')[0m[37m
172.16.1.170         -# If not specified, defaults to system PATH environment variable.[0m[37m
172.16.1.170         -# These directories MUST all be only writeable by root ![0m[37m
172.16.1.170         -exec_dirs=/sbin,/usr/sbin,/bin,/usr/bin[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Enable logging to syslog[0m
172.16.1.170 [37m
172.16.1.170         -# Default value is False[0m[37m
172.16.1.170         -use_syslog=False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Which syslog facility to use.[0m[37m
172.16.1.170         -# Valid values include auth, authpriv, syslog, local0, local1...[0m[37m
172.16.1.170         -# Default value is 'syslog'[0m[37m
172.16.1.170         -syslog_log_facility=syslog[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Which messages to log.[0m[37m
172.16.1.170         -# INFO means log all usage[0m[37m
172.16.1.170         -# ERROR means only log unsuccessful attempts[0m[37m
172.16.1.170         -syslog_log_level=ERROR[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[xenapi][0m[37m
172.16.1.170         -# XenAPI configuration is only required by the L2 agent if it is to[0m[37m
172.16.1.170         -# target a XenServer/XCP compute host's dom0.[0m[37m
172.16.1.170         -xenapi_connection_url=<None>[0m[37m
172.16.1.170         -xenapi_connection_username=root[0m[37m
172.16.1.170         -xenapi_connection_password=<None>[0m[37m
172.16.1.170         +filters_path=/etc/neutron/rootwrap.d,/usr/share/neutron/rootwrap[0m
172.16.1.170 [0m
172.16.1.170   * package[python-neutronclient] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[iproute] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package iproute from 2.6.32-23.el6 to 2.6.32-31.el6[0m
172.16.1.170 [0m
172.16.1.170   * service[neutron-server] action nothing[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * ruby_block[query service tenant uuid] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute the ruby block query service tenant uuid[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/neutron/neutron.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/neutron/neutron.conf] from 8dcfcf to 7892a1[0m[37m
172.16.1.170         --- /etc/neutron/neutron.conf	2014-02-26 07:22:48.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1mhywf6	2014-08-08 01:55:07.441999964 +0800[0m[37m
172.16.1.170         @@ -1,13 +1,17 @@[0m[37m
172.16.1.170         -[DEFAULT][0m[37m
172.16.1.170         -# Print more verbose output (set logging level to INFO instead of default WARNING level).[0m[37m
172.16.1.170         -# verbose = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Print debugging output (set logging level to DEBUG instead of default WARNING level).[0m[37m
172.16.1.170         -# debug = False[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[DEFAULT][0m[37m
172.16.1.170         +# Default log level is INFO[0m[37m
172.16.1.170         +# verbose and debug has the same result.[0m[37m
172.16.1.170         +# One of them will set DEBUG log level output[0m[37m
172.16.1.170         +debug = False[0m[37m
172.16.1.170         +verbose = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Where to store Neutron state files.  This directory must be writable by the[0m[37m
172.16.1.170          # user executing the agent.[0m[37m
172.16.1.170         -# state_path = /var/lib/neutron[0m[37m
172.16.1.170         +state_path = /var/lib/neutron[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Where to store lock files[0m[37m
172.16.1.170          lock_path = $state_path/lock[0m[37m
172.16.1.170         @@ -22,30 +26,20 @@[0m[37m
172.16.1.170          # (not user_stderr) and (not log_file) -> stdout[0m[37m
172.16.1.170          # publish_errors                       -> notification system[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# (Optional) In addition to the system's default language log,[0m[37m
172.16.1.170         -# creates an additional log in the given language if such language is present[0m[37m
172.16.1.170         -# in the operating system. This option is only enabled if the 'log-file' option[0m[37m
172.16.1.170         -# is used, and the additional log will be created in the same directory as the[0m[37m
172.16.1.170         -# main log, inside a directory named after the locale.[0m[37m
172.16.1.170         -# This option is not available in community OpenStack Havana but it is in[0m
172.16.1.170 [37m
172.16.1.170         -# IBM OpenStack Enterprise Edition.[0m[37m
172.16.1.170         -#log_additional_locale=<None>[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170          # use_syslog = False[0m[37m
172.16.1.170          # syslog_log_facility = LOG_USER[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # use_stderr = True[0m
172.16.1.170 [37m
172.16.1.170          # log_file =[0m[37m
172.16.1.170         -# log_dir =[0m
172.16.1.170 [37m
172.16.1.170         +log_dir = /var/log/neutron[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # publish_errors = False[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Address to bind the API server[0m
172.16.1.170 [37m
172.16.1.170         -# bind_host = 0.0.0.0[0m[37m
172.16.1.170         +bind_host = 0.0.0.0[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Port the bind the API server to[0m[37m
172.16.1.170         -# bind_port = 9696[0m
172.16.1.170 [37m
172.16.1.170         +bind_port = 9696[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Path to the extensions.  Note that this can be a colon-separated list of[0m[37m
172.16.1.170          # paths.  For example:[0m
172.16.1.170 [37m
172.16.1.170         @@ -54,30 +48,21 @@[0m[37m
172.16.1.170          # extensions are in there you don't need to specify them here[0m
172.16.1.170 [37m
172.16.1.170          # api_extensions_path =[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170         -# (StrOpt) Neutron core plugin entrypoint to be loaded from the[0m[37m
172.16.1.170         -# neutron.core_plugins namespace. See setup.cfg for the entrypoint names of the[0m[37m
172.16.1.170         -# plugins included in the neutron source distribution. For compatibility with[0m[37m
172.16.1.170         -# previous versions, the class name of a plugin can be specified instead of its[0m[37m
172.16.1.170         -# entrypoint name.[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +# Neutron plugin provider module[0m[37m
172.16.1.170          # core_plugin =[0m[37m
172.16.1.170         -# Example: core_plugin = ml2[0m[37m
172.16.1.170         +core_plugin = neutron.plugins.ml2.plugin.Ml2Plugin[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# (ListOpt) List of service plugin entrypoints to be loaded from the[0m[37m
172.16.1.170         -# neutron.service_plugins namespace. See setup.cfg for the entrypoint names of[0m[37m
172.16.1.170         -# the plugins included in the neutron source distribution. For compatibility[0m[37m
172.16.1.170         -# with previous versions, the class name of a plugin can be specified instead[0m[37m
172.16.1.170         -# of its entrypoint name.[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +# Advanced service modules[0m[37m
172.16.1.170          # service_plugins =[0m[37m
172.16.1.170         -# Example: service_plugins = router,firewall,lbaas,vpnaas,metering[0m
172.16.1.170 [37m
172.16.1.170         +service_plugins = router[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Paste configuration file[0m[37m
172.16.1.170         -# api_paste_config = api-paste.ini[0m
172.16.1.170 [37m
172.16.1.170         +api_paste_config = api-paste.ini[0m
172.16.1.170 [37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # The strategy to be used for auth.[0m
172.16.1.170 [37m
172.16.1.170          # Supported values are 'keystone'(default), 'noauth'.[0m
172.16.1.170 [37m
172.16.1.170          # auth_strategy = keystone[0m
172.16.1.170 [37m
172.16.1.170         +auth_strategy = keystone[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Base MAC address. The first 3 octets will remain unchanged. If the[0m[37m
172.16.1.170          # 4h octet is not 00, it will also used. The others will be[0m
172.16.1.170 [37m
172.16.1.170         @@ -91,7 +76,7 @@[0m[37m
172.16.1.170          # mac_generation_retries = 16[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # DHCP Lease duration (in seconds)[0m
172.16.1.170 [37m
172.16.1.170         -# dhcp_lease_duration = 86400[0m[37m
172.16.1.170         +dhcp_lease_duration = 86400[0m
172.16.1.170 [37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Allow sending resource operation notification to DHCP agent[0m[37m
172.16.1.170          # dhcp_agent_notification = True[0m[37m
172.16.1.170         @@ -104,7 +89,7 @@[0m[37m
172.16.1.170          # allow_sorting = False[0m[37m
172.16.1.170          # Enable or disable overlapping IPs for subnets[0m[37m
172.16.1.170          # Attention: the following parameter MUST be set to False if Neutron is[0m[37m
172.16.1.170         -# being used in conjunction with nova security groups[0m[37m
172.16.1.170         +# being used in conjunction with nova security groups and/or metadata service.[0m[37m
172.16.1.170          # allow_overlapping_ips = False[0m[37m
172.16.1.170          # Ensure that configured gateway is on subnet[0m[37m
172.16.1.170          # force_gateway_on_subnet = False[0m[37m
172.16.1.170         @@ -114,21 +99,18 @@[0m[37m
172.16.1.170          # The messaging module to use, defaults to kombu.[0m[37m
172.16.1.170          # rpc_backend = neutron.openstack.common.rpc.impl_kombu[0m[37m
172.16.1.170          # Size of RPC thread pool[0m[37m
172.16.1.170         -# rpc_thread_pool_size = 64[0m[37m
172.16.1.170         +rpc_thread_pool_size = 64[0m[37m
172.16.1.170          # Size of RPC connection pool[0m[37m
172.16.1.170         -# rpc_conn_pool_size = 30[0m[37m
172.16.1.170         +rpc_conn_pool_size = 30[0m[37m
172.16.1.170          # Seconds to wait for a response from call or multicall[0m[37m
172.16.1.170         -# rpc_response_timeout = 60[0m[37m
172.16.1.170         +rpc_response_timeout = 60[0m[37m
172.16.1.170          # Seconds to wait before a cast expires (TTL). Only supported by impl_zmq.[0m[37m
172.16.1.170          # rpc_cast_timeout = 30[0m[37m
172.16.1.170          # Modules of exceptions that are permitted to be recreated[0m[37m
172.16.1.170          # upon receiving exception data from an rpc call.[0m[37m
172.16.1.170          # allowed_rpc_exception_modules = neutron.openstack.common.exception, nova.exception[0m[37m
172.16.1.170          # AMQP exchange to connect to if using RabbitMQ or QPID[0m[37m
172.16.1.170         -# control_exchange = neutron[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# If passed, use a fake RabbitMQ provider[0m[37m
172.16.1.170         -# fake_rabbit = False[0m[37m
172.16.1.170         +control_exchange = neutron[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Configuration options if sending notifications via kombu rpc (these are[0m[37m
172.16.1.170          # the defaults)[0m[37m
172.16.1.170         @@ -140,49 +122,30 @@[0m[37m
172.16.1.170          # kombu_ssl_certfile =[0m[37m
172.16.1.170          # SSL certification authority file (valid only if SSL enabled)'[0m[37m
172.16.1.170          # kombu_ssl_ca_certs =[0m[37m
172.16.1.170         -# IP address of the RabbitMQ installation[0m[37m
172.16.1.170         -# rabbit_host = localhost[0m[37m
172.16.1.170         -# Password of the RabbitMQ server[0m[37m
172.16.1.170         -# rabbit_password = guest[0m[37m
172.16.1.170         -# Port where RabbitMQ server is running/listening[0m[37m
172.16.1.170         -# rabbit_port = 5672[0m
172.16.1.170 [37m
172.16.1.170         -# RabbitMQ single or HA cluster (host:port pairs i.e: host1:5672, host2:5672)[0m[37m
172.16.1.170         -# rabbit_hosts is defaulted to '$rabbit_host:$rabbit_port'[0m[37m
172.16.1.170         -# rabbit_hosts = localhost:5672[0m
172.16.1.170 [37m
172.16.1.170         -# User ID used for RabbitMQ connections[0m[37m
172.16.1.170         -# rabbit_userid = guest[0m
172.16.1.170 [37m
172.16.1.170         -# Location of a virtual RabbitMQ installation.[0m
172.16.1.170 [37m
172.16.1.170         -# rabbit_virtual_host = /[0m
172.16.1.170 [37m
172.16.1.170         -# Maximum retries with trying to connect to RabbitMQ[0m
172.16.1.170 [37m
172.16.1.170         -# (the default of 0 implies an infinite retry count)[0m
172.16.1.170 [37m
172.16.1.170         -# rabbit_max_retries = 0[0m[37m
172.16.1.170         -# RabbitMQ connection retry interval[0m
172.16.1.170 [37m
172.16.1.170         -# rabbit_retry_interval = 1[0m[37m
172.16.1.170         -# Use HA queues in RabbitMQ (x-ha-policy: all).You need to[0m
172.16.1.170 [37m
172.16.1.170         -# wipe RabbitMQ database when changing this option. (boolean value)[0m
172.16.1.170 [37m
172.16.1.170         -# rabbit_ha_queues = false[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# QPID[0m
172.16.1.170 [37m
172.16.1.170         -# rpc_backend=neutron.openstack.common.rpc.impl_qpid[0m[37m
172.16.1.170         -# Qpid broker hostname[0m
172.16.1.170 [37m
172.16.1.170         -# qpid_hostname = localhost[0m
172.16.1.170 [37m
172.16.1.170         -# Qpid broker port[0m[37m
172.16.1.170         -# qpid_port = 5672[0m
172.16.1.170 [37m
172.16.1.170         -# Qpid single or HA cluster (host:port pairs i.e: host1:5672, host2:5672)[0m
172.16.1.170 [37m
172.16.1.170         -# qpid_hosts is defaulted to '$qpid_hostname:$qpid_port'[0m[37m
172.16.1.170         -# qpid_hosts = localhost:5672[0m
172.16.1.170 [37m
172.16.1.170         -# Username for qpid connection[0m
172.16.1.170 [37m
172.16.1.170         -# qpid_username = ''[0m[37m
172.16.1.170         -# Password for qpid connection[0m
172.16.1.170 [37m
172.16.1.170         -# qpid_password = ''[0m
172.16.1.170 [37m
172.16.1.170         -# Space separated list of SASL mechanisms to use for auth[0m
172.16.1.170 [37m
172.16.1.170         -# qpid_sasl_mechanisms = ''[0m[37m
172.16.1.170         -# Seconds between connection keepalive heartbeats[0m[37m
172.16.1.170         -# qpid_heartbeat = 60[0m[37m
172.16.1.170         -# Transport to use, either 'tcp' or 'ssl'[0m[37m
172.16.1.170         -# qpid_protocol = tcp[0m[37m
172.16.1.170         -# Disable Nagle algorithm[0m[37m
172.16.1.170         -# qpid_tcp_nodelay = True[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# allow_overlapping_ips = False[0m[37m
172.16.1.170         +allow_overlapping_ips = False[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##### QPID #####[0m[37m
172.16.1.170         +rpc_backend=neutron.openstack.common.rpc.impl_qpid[0m[37m
172.16.1.170         +qpid_hostname=172.16.1.170[0m[37m
172.16.1.170         +qpid_port=5672[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +qpid_password=guest[0m[37m
172.16.1.170         +qpid_username=guest[0m[37m
172.16.1.170         +qpid_sasl_mechanisms=[0m[37m
172.16.1.170         +qpid_reconnect=true[0m[37m
172.16.1.170         +qpid_reconnect_timeout=0[0m[37m
172.16.1.170         +qpid_reconnect_limit=0[0m[37m
172.16.1.170         +qpid_reconnect_interval_min=0[0m[37m
172.16.1.170         +qpid_reconnect_interval_max=0[0m[37m
172.16.1.170         +qpid_reconnect_interval=0[0m[37m
172.16.1.170         +qpid_heartbeat=60[0m
172.16.1.170 [37m
172.16.1.170         +# qpid protocol. default 'tcp'. set to 'ssl' to enable SSL[0m[37m
172.16.1.170         +qpid_protocol=tcp[0m
172.16.1.170 [37m
172.16.1.170         +qpid_tcp_nodelay=true[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # ZMQ[0m
172.16.1.170 [37m
172.16.1.170          # rpc_backend=neutron.openstack.common.rpc.impl_zmq[0m
172.16.1.170 [37m
172.16.1.170         @@ -202,12 +165,12 @@[0m[37m
172.16.1.170          # notification_driver = neutron.openstack.common.notifier.no_op_notifier[0m
172.16.1.170 [37m
172.16.1.170          # Logging driver[0m
172.16.1.170 [37m
172.16.1.170          # notification_driver = neutron.openstack.common.notifier.log_notifier[0m[37m
172.16.1.170         -# RPC driver.[0m
172.16.1.170 [37m
172.16.1.170         +# RPC driver. DHCP agents needs it.[0m
172.16.1.170 [37m
172.16.1.170         +#notification_driver = neutron.openstack.common.notifier.rpc_notifier[0m[37m
172.16.1.170          notification_driver = neutron.openstack.common.notifier.rpc_notifier[0m
172.16.1.170 [37m
172.16.1.170         -auth_strategy = noauth[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # default_notification_level is used to form actual topic name(s) or to set logging level[0m
172.16.1.170 [37m
172.16.1.170         -# default_notification_level = INFO[0m
172.16.1.170 [37m
172.16.1.170         +default_notification_level = INFO[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # default_publisher_id is a part of the notification payload[0m[37m
172.16.1.170          # host = myhost.com[0m
172.16.1.170 [37m
172.16.1.170         @@ -215,7 +178,7 @@[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Defined in rpc_notifier, can be comma separated values.[0m
172.16.1.170 [37m
172.16.1.170          # The actual topic names will be %s.%(default_notification_level)s[0m
172.16.1.170 [37m
172.16.1.170         -# notification_topics = notifications[0m[37m
172.16.1.170         +notification_topics = notifications[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Default maximum number of items returned in a single response,[0m
172.16.1.170 [37m
172.16.1.170          # value == infinite and value < 0 means no max limit, and value must[0m[37m
172.16.1.170         @@ -236,16 +199,14 @@[0m
172.16.1.170 [37m
172.16.1.170          # =========== items for agent management extension =============[0m[37m
172.16.1.170          # Seconds to regard the agent as down; should be at least twice[0m
172.16.1.170 [37m
172.16.1.170          # report_interval, to be sure the agent is down for good[0m
172.16.1.170 [37m
172.16.1.170         -# agent_down_time = 9[0m
172.16.1.170 [37m
172.16.1.170         +agent_down_time = 75[0m
172.16.1.170 [37m
172.16.1.170          # ===========  end of items for agent management extension =====[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # =========== items for agent scheduler extension =============[0m[37m
172.16.1.170          # Driver to use for scheduling network to DHCP agent[0m
172.16.1.170 [37m
172.16.1.170         -# network_scheduler_driver = neutron.scheduler.dhcp_agent_scheduler.ChanceScheduler[0m[37m
172.16.1.170         +network_scheduler_driver = neutron.scheduler.dhcp_agent_scheduler.ChanceScheduler[0m
172.16.1.170 [37m
172.16.1.170          # Driver to use for scheduling router to a default L3 agent[0m
172.16.1.170 [37m
172.16.1.170         -# router_scheduler_driver = neutron.scheduler.l3_agent_scheduler.ChanceScheduler[0m[37m
172.16.1.170         -# Driver to use for scheduling a loadbalancer pool to an lbaas agent[0m
172.16.1.170 [37m
172.16.1.170         -# loadbalancer_pool_scheduler_driver = neutron.services.loadbalancer.agent_scheduler.ChanceScheduler[0m[37m
172.16.1.170         +router_scheduler_driver = neutron.scheduler.l3_agent_scheduler.ChanceScheduler[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Allow auto scheduling networks to DHCP agent. It will schedule non-hosted[0m[37m
172.16.1.170          # networks to first DHCP agent which sends get_active_networks message to[0m
172.16.1.170 [37m
172.16.1.170         @@ -255,161 +216,160 @@[0m[37m
172.16.1.170          # Allow auto scheduling routers to L3 agent. It will schedule non-hosted[0m
172.16.1.170 [37m
172.16.1.170          # routers to first L3 agent which sends sync_routers message to neutron server[0m[37m
172.16.1.170          # router_auto_schedule = True[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of DHCP agents scheduled to host a network. This enables redundant[0m
172.16.1.170 [37m
172.16.1.170         -# DHCP agents for configured networks.[0m
172.16.1.170 [37m
172.16.1.170         -# dhcp_agents_per_network = 1[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170          # ===========  end of items for agent scheduler extension =====[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # =========== WSGI parameters related to the API server ==============[0m[37m
172.16.1.170         -# Number of separate worker processes to spawn.  The default, 0, runs the[0m
172.16.1.170 [37m
172.16.1.170         -# worker thread in the current process.  Greater than 0 launches that number of[0m
172.16.1.170 [37m
172.16.1.170         -# child processes as workers.  The parent process manages them.[0m
172.16.1.170 [37m
172.16.1.170         -# api_workers = 0[0m
172.16.1.170 [37m
172.16.1.170          # Sets the value of TCP_KEEPIDLE in seconds to use for each server socket when[0m[37m
172.16.1.170          # starting API server. Not supported on OS X.[0m
172.16.1.170 [37m
172.16.1.170         -# tcp_keepidle = 600[0m
172.16.1.170 [37m
172.16.1.170         +#tcp_keepidle = 600[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Number of seconds to keep retrying to listen[0m[37m
172.16.1.170         -# retry_until_window = 30[0m
172.16.1.170 [37m
172.16.1.170         +#retry_until_window = 30[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Number of backlog requests to configure the socket with.[0m
172.16.1.170 [37m
172.16.1.170         -# backlog = 4096[0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -# Max header line to accommodate large tokens[0m[37m
172.16.1.170         -# max_header_line = 16384[0m
172.16.1.170 [37m
172.16.1.170         +#backlog = 4096[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Enable SSL on the API server[0m
172.16.1.170 [37m
172.16.1.170         -# use_ssl = False[0m[37m
172.16.1.170         +#use_ssl = False[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Certificate file to use when starting API server securely[0m
172.16.1.170 [37m
172.16.1.170         -# ssl_cert_file = /path/to/certfile[0m[37m
172.16.1.170         +#ssl_cert_file = /path/to/certfile[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Private key file to use when starting API server securely[0m
172.16.1.170 [37m
172.16.1.170         -# ssl_key_file = /path/to/keyfile[0m
172.16.1.170 [37m
172.16.1.170         +#ssl_key_file = /path/to/keyfile[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # CA certificate file to use when starting API server securely to[0m
172.16.1.170 [37m
172.16.1.170          # verify connecting clients. This is an optional parameter only required if[0m[37m
172.16.1.170          # API clients need to authenticate to the API server using SSL certificates[0m
172.16.1.170 [37m
172.16.1.170          # signed by a trusted CA[0m[37m
172.16.1.170         -# ssl_ca_file = /path/to/cafile[0m
172.16.1.170 [37m
172.16.1.170         +#ssl_ca_file = /path/to/cafile[0m[37m
172.16.1.170          # ======== end of WSGI parameters related to the API server ==========[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170         -[quotas][0m
172.16.1.170 [37m
172.16.1.170         -# Default driver to use for quota checks[0m[37m
172.16.1.170         -# quota_driver = neutron.db.quota_db.DbQuotaDriver[0m
172.16.1.170 [37m
172.16.1.170         +# ======== neutron nova interactions ==========[0m
172.16.1.170 [37m
172.16.1.170         +# Send notification to nova when port status is active.[0m[37m
172.16.1.170         +notify_nova_on_port_status_changes = True[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Send notifications to nova when port data (fixed_ips/floatingips) change[0m
172.16.1.170 [37m
172.16.1.170         +# so nova can update it's cache.[0m
172.16.1.170 [37m
172.16.1.170         +notify_nova_on_port_data_changes = True[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +# URL for connection to nova (Only supports one nova region currently).[0m[37m
172.16.1.170         +nova_url = http://172.16.1.170:8774/v2[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +# Name of nova region to use. Useful if keystone manages more than one region[0m[37m
172.16.1.170         +nova_region_name = RegionOne[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Username for connection to nova in admin context[0m[37m
172.16.1.170         +nova_admin_username = nova[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +# The uuid of the admin nova tenant[0m
172.16.1.170 [37m
172.16.1.170         +nova_admin_tenant_id = ea62f5ea8219433c9dc8668ee7363c51[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170         -# Resource name(s) that are supported in quota features[0m
172.16.1.170 [37m
172.16.1.170         -# quota_items = network,subnet,port[0m[37m
172.16.1.170         +# Password for connection to nova in admin context.[0m
172.16.1.170 [37m
172.16.1.170         +nova_admin_password = openstack-compute[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170         -# Default number of resource allowed per tenant. A negative value means[0m
172.16.1.170 [37m
172.16.1.170         -# unlimited.[0m[37m
172.16.1.170         -# default_quota = -1[0m
172.16.1.170 [37m
172.16.1.170         +# Authorization URL for connection to nova in admin context.[0m
172.16.1.170 [37m
172.16.1.170         +nova_admin_auth_url = http://172.16.1.170:35357/v2.0[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170         -# Number of networks allowed per tenant. A negative value means unlimited.[0m
172.16.1.170 [37m
172.16.1.170         -# quota_network = 10[0m[37m
172.16.1.170         +# Number of seconds between sending events to nova if there are any events to send[0m
172.16.1.170 [37m
172.16.1.170         +send_events_interval = 2[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of subnets allowed per tenant. A negative value means unlimited.[0m
172.16.1.170 [37m
172.16.1.170         -# quota_subnet = 10[0m[37m
172.16.1.170         +# ======== end of neutron nova interactions ==========[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of ports allowed per tenant. A negative value means unlimited.[0m
172.16.1.170 [37m
172.16.1.170         -# quota_port = 50[0m
172.16.1.170 [37m
172.16.1.170         +[QUOTAS][0m[37m
172.16.1.170         +# resource name(s) that are supported in quota features[0m
172.16.1.170 [37m
172.16.1.170         +quota_items = network,subnet,port[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170         -# Number of security groups allowed per tenant. A negative value means[0m[37m
172.16.1.170         -# unlimited.[0m
172.16.1.170 [37m
172.16.1.170         -# quota_security_group = 10[0m[37m
172.16.1.170         +# default number of resource allowed per tenant, minus for unlimited[0m
172.16.1.170 [37m
172.16.1.170         +default_quota = -1[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170         -# Number of security group rules allowed per tenant. A negative value means[0m[37m
172.16.1.170         -# unlimited.[0m
172.16.1.170 [37m
172.16.1.170         -# quota_security_group_rule = 100[0m[37m
172.16.1.170         +# number of networks allowed per tenant, and minus means unlimited[0m
172.16.1.170 [37m
172.16.1.170         +quota_network = 10[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170         -# Number of vips allowed per tenant. A negative value means unlimited.[0m[37m
172.16.1.170         -# quota_vip = 10[0m[37m
172.16.1.170         +# number of subnets allowed per tenant, and minus means unlimited[0m[37m
172.16.1.170         +quota_subnet = 10[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of pools allowed per tenant. A negative value means unlimited.[0m[37m
172.16.1.170         -# quota_pool = 10[0m[37m
172.16.1.170         +# number of ports allowed per tenant, and minus means unlimited[0m[37m
172.16.1.170         +quota_port = 50[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of pool members allowed per tenant. A negative value means unlimited.[0m[37m
172.16.1.170         -# The default is unlimited because a member is not a real resource consumer[0m[37m
172.16.1.170         -# on Openstack. However, on back-end, a member is a resource consumer[0m[37m
172.16.1.170         -# and that is the reason why quota is possible.[0m[37m
172.16.1.170         -# quota_member = -1[0m[37m
172.16.1.170         +# number of security groups allowed per tenant, and minus means unlimited[0m[37m
172.16.1.170         +quota_security_group = 10[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of health monitors allowed per tenant. A negative value means[0m[37m
172.16.1.170         -# unlimited.[0m[37m
172.16.1.170         -# The default is unlimited because a health monitor is not a real resource[0m[37m
172.16.1.170         -# consumer on Openstack. However, on back-end, a member is a resource consumer[0m[37m
172.16.1.170         -# and that is the reason why quota is possible.[0m[37m
172.16.1.170         -# quota_health_monitors = -1[0m[37m
172.16.1.170         +# number of security group rules allowed per tenant, and minus means unlimited[0m[37m
172.16.1.170         +quota_security_group_rule = 100[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of routers allowed per tenant. A negative value means unlimited.[0m[37m
172.16.1.170         -# quota_router = 10[0m[37m
172.16.1.170         +# default driver to use for quota checks[0m[37m
172.16.1.170         +quota_driver = neutron.db.quota_db.DbQuotaDriver[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Number of floating IPs allowed per tenant. A negative value means unlimited.[0m[37m
172.16.1.170         -# quota_floatingip = 50[0m[37m
172.16.1.170         +[DEFAULT_SERVICETYPE][0m[37m
172.16.1.170         +# Description of the default service type (optional)[0m[37m
172.16.1.170         +# description = "default service type"[0m[37m
172.16.1.170         +# Enter a service definition line for each advanced service provided[0m[37m
172.16.1.170         +# by the default service type.[0m[37m
172.16.1.170         +# Each service definition should be in the following format:[0m[37m
172.16.1.170         +# <service>:<plugin>[:driver][0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[agent][0m[37m
172.16.1.170         +[AGENT][0m[37m
172.16.1.170          # Use "sudo neutron-rootwrap /etc/neutron/rootwrap.conf" to use the real[0m[37m
172.16.1.170          # root filter facility.[0m[37m
172.16.1.170          # Change to "sudo" to skip the filtering and just run the comand directly[0m[37m
172.16.1.170          # root_helper = sudo[0m[37m
172.16.1.170         +root_helper = "sudo neutron-rootwrap /etc/neutron/rootwrap.conf"[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # =========== items for agent management extension =============[0m[37m
172.16.1.170         -# seconds between nodes reporting state to server; should be less than[0m
172.16.1.170 [37m
172.16.1.170         +# seconds between nodes reporting state to server, should be less than[0m[37m
172.16.1.170          # agent_down_time, best if it is half or less than agent_down_time[0m[37m
172.16.1.170         -# report_interval = 4[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# ===========  end of items for agent management extension =====[0m
172.16.1.170 [37m
172.16.1.170         +report_interval = 30[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          [keystone_authtoken][0m[37m
172.16.1.170         -auth_host = 127.0.0.1[0m
172.16.1.170 [37m
172.16.1.170         +auth_uri = http://172.16.1.170:5000/v2.0[0m[37m
172.16.1.170         +auth_host = 172.16.1.170[0m
172.16.1.170 [37m
172.16.1.170          auth_port = 35357[0m[37m
172.16.1.170          auth_protocol = http[0m
172.16.1.170 [37m
172.16.1.170         -admin_tenant_name = %SERVICE_TENANT_NAME%[0m[37m
172.16.1.170         -admin_user = %SERVICE_USER%[0m
172.16.1.170 [37m
172.16.1.170         -admin_password = %SERVICE_PASSWORD%[0m[37m
172.16.1.170         -signing_dir = $state_path/keystone-signing[0m
172.16.1.170 [37m
172.16.1.170         +admin_tenant_name = service[0m[37m
172.16.1.170         +admin_user = neutron[0m
172.16.1.170 [37m
172.16.1.170         +admin_password = openstack-network[0m[37m
172.16.1.170         +signing_dir = /var/lib/neutron/keystone-signing[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          [database][0m
172.16.1.170 [37m
172.16.1.170          # This line MUST be changed to actually run the plugin.[0m
172.16.1.170 [37m
172.16.1.170          # Example:[0m
172.16.1.170 [37m
172.16.1.170         -# connection = mysql://root:pass@127.0.0.1:3306/neutron[0m[37m
172.16.1.170         +# connection = mysql://root:nova@127.0.0.1:3306/neutron_linux_bridge[0m
172.16.1.170 [37m
172.16.1.170          # Replace 127.0.0.1 above with the IP address of the database used by the[0m
172.16.1.170 [37m
172.16.1.170          # main neutron server. (Leave it as is if the database runs on this host.)[0m[37m
172.16.1.170         -# connection = sqlite://[0m
172.16.1.170 [37m
172.16.1.170         +connection = mysql://neutron1:neutron@172.16.1.170:3306/neutron?charset=utf8[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # The SQLAlchemy connection string used to connect to the slave database[0m[37m
172.16.1.170         -# slave_connection =[0m
172.16.1.170 [37m
172.16.1.170         +slave_connection = [0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Database reconnection retry times - in event connectivity is lost[0m
172.16.1.170 [37m
172.16.1.170          # set to -1 implies an infinite retry count[0m[37m
172.16.1.170         -# max_retries = 10[0m
172.16.1.170 [37m
172.16.1.170         +max_retries = 10[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Database reconnection interval in seconds - if the initial connection to the[0m[37m
172.16.1.170          # database fails[0m
172.16.1.170 [37m
172.16.1.170         -# retry_interval = 10[0m[37m
172.16.1.170         +retry_interval = 10[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Minimum number of SQL connections to keep open in a pool[0m
172.16.1.170 [37m
172.16.1.170         -# min_pool_size = 1[0m[37m
172.16.1.170         +min_pool_size = 1[0m
172.16.1.170 [37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Maximum number of SQL connections to keep open in a pool[0m[37m
172.16.1.170         -# max_pool_size = 10[0m
172.16.1.170 [37m
172.16.1.170         +max_pool_size = 10[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Timeout in seconds before idle sql connections are reaped[0m
172.16.1.170 [37m
172.16.1.170         -# idle_timeout = 3600[0m
172.16.1.170 [37m
172.16.1.170         +idle_timeout = 3600[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # If set, use this value for max_overflow with sqlalchemy[0m[37m
172.16.1.170         -# max_overflow = 20[0m[37m
172.16.1.170         +max_overflow = 20[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Verbosity of SQL debugging information. 0=None, 100=Everything[0m
172.16.1.170 [37m
172.16.1.170         -# connection_debug = 0[0m
172.16.1.170 [37m
172.16.1.170         +connection_debug = 0[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # Add python stack traces to SQL as comment strings[0m
172.16.1.170 [37m
172.16.1.170         -# connection_trace = False[0m
172.16.1.170 [37m
172.16.1.170         +connection_trace = false[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # If set, use this value for pool_timeout with sqlalchemy[0m
172.16.1.170 [37m
172.16.1.170         -# pool_timeout = 10[0m[37m
172.16.1.170         +pool_timeout = 10[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          [service_providers][0m
172.16.1.170 [37m
172.16.1.170          # Specify service providers (drivers) for advanced services like loadbalancer, VPN, Firewall.[0m
172.16.1.170 [37m
172.16.1.170         @@ -422,14 +382,5 @@[0m
172.16.1.170 [37m
172.16.1.170          # example of non-default provider:[0m
172.16.1.170 [37m
172.16.1.170          # service_provider=FIREWALL:name2:firewall_driver_path[0m[37m
172.16.1.170          # --- Reference implementations ---[0m
172.16.1.170 [37m
172.16.1.170         -service_provider=LOADBALANCER:Haproxy:neutron.services.loadbalancer.drivers.haproxy.plugin_driver.HaproxyOnHostPluginDriver:default[0m
172.16.1.170 [37m
172.16.1.170         -# In order to activate Radware's lbaas driver you need to uncomment the next line.[0m[37m
172.16.1.170         -# If you want to keep the HA Proxy as the default lbaas driver, remove the attribute default from the line below.[0m[37m
172.16.1.170         -# Otherwise comment the HA Proxy line[0m
172.16.1.170 [37m
172.16.1.170         -#service_provider = LOADBALANCER:Radware:neutron.services.loadbalancer.drivers.radware.driver.LoadBalancerDriver:default[0m[37m
172.16.1.170         -#uncomment the following line to make the 'netscaler' LBaaS provider available.[0m
172.16.1.170 [37m
172.16.1.170         -#service_provider=LOADBALANCER:NetScaler:neutron.services.loadbalancer.drivers.netscaler.netscaler_driver.NetScalerPluginDriver[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[0m
172.16.1.170 [37m
172.16.1.170         -[AGENT][0m[37m
172.16.1.170         -root_helper = sudo neutron-rootwrap /etc/neutron/rootwrap.conf[0m
172.16.1.170 [37m
172.16.1.170         +# ===========  end of items for agent management extension =====[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * template[/etc/neutron/api-paste.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/neutron/api-paste.ini] from 5ded02 to 71dd1b[0m[37m
172.16.1.170         --- /etc/neutron/api-paste.ini	2014-02-26 07:04:39.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-xeaekl	2014-08-08 01:55:07.661999966 +0800[0m[37m
172.16.1.170         @@ -1,3 +1,8 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          [composite:neutron][0m[37m
172.16.1.170          use = egg:Paste#urlmap[0m[37m
172.16.1.170          /: neutronversions[0m[37m
172.16.1.170         @@ -17,9 +22,6 @@[0m[37m
172.16.1.170          [filter:keystonecontext][0m[37m
172.16.1.170          paste.filter_factory = neutron.auth:NeutronKeystoneContext.factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[filter:authtoken][0m[37m
172.16.1.170         -paste.filter_factory = keystoneclient.middleware.auth_token:filter_factory[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170          [filter:extensions][0m[37m
172.16.1.170          paste.filter_factory = neutron.api.extensions:plugin_aware_extension_middleware_factory[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         @@ -28,3 +30,7 @@[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [app:neutronapiapp_v2_0][0m
172.16.1.170 [37m
172.16.1.170          paste.app_factory = neutron.api.v2.router:APIRouter.factory[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[filter:authtoken][0m
172.16.1.170 [37m
172.16.1.170         +paste.filter_factory = keystoneclient.middleware.auth_token:filter_factory[0m
172.16.1.170 [37m
172.16.1.170         +delay_auth_decision = true[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * directory[/etc/neutron/plugins/ml2] action create[0m
172.16.1.170 [32m
172.16.1.170     - change mode from '02755' to '0700'[0m[32m
172.16.1.170     - change owner from 'root' to 'neutron'[0m[32m
172.16.1.170     - change group from 'root' to 'neutron'[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/neutron/plugins/ml2/ml2_conf.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/neutron/plugins/ml2/ml2_conf.ini] from 791bdd to bf81e6[0m[37m
172.16.1.170         --- /etc/neutron/plugins/ml2/ml2_conf.ini	2014-02-26 07:04:39.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-2ne6q2	2014-08-08 01:55:07.903999965 +0800[0m[37m
172.16.1.170         @@ -1,9 +1,14 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          [ml2][0m[37m
172.16.1.170          # (ListOpt) List of network type driver entrypoints to be loaded from[0m[37m
172.16.1.170          # the neutron.ml2.type_drivers namespace.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # type_drivers = local,flat,vlan,gre,vxlan[0m[37m
172.16.1.170          # Example: type_drivers = flat,vlan,gre,vxlan[0m[37m
172.16.1.170         +type_drivers = flat[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # (ListOpt) Ordered list of network_types to allocate as tenant[0m[37m
172.16.1.170          # networks. The default value 'local' is useful for single-box testing[0m[37m
172.16.1.170         @@ -11,12 +16,14 @@[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # tenant_network_types = local[0m[37m
172.16.1.170          # Example: tenant_network_types = vlan,gre,vxlan[0m[37m
172.16.1.170         +tenant_network_types = flat[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # (ListOpt) Ordered list of networking mechanism driver entrypoints[0m[37m
172.16.1.170          # to be loaded from the neutron.ml2.mechanism_drivers namespace.[0m[37m
172.16.1.170          # mechanism_drivers =[0m[37m
172.16.1.170          # Example: mechanism_drivers = arista[0m[37m
172.16.1.170          # Example: mechanism_drivers = cisco,logger[0m[37m
172.16.1.170         +mechanism_drivers = openvswitch[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [ml2_type_flat][0m[37m
172.16.1.170          # (ListOpt) List of physical_network names with which flat networks[0m[37m
172.16.1.170         @@ -26,6 +33,7 @@[0m[37m
172.16.1.170          # flat_networks =[0m[37m
172.16.1.170          # Example:flat_networks = physnet1,physnet2[0m
172.16.1.170 [37m
172.16.1.170          # Example:flat_networks = *[0m[37m
172.16.1.170         +flat_networks = *[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [ml2_type_vlan][0m[37m
172.16.1.170          # (ListOpt) List of <physical_network>[:<vlan_min>:<vlan_max>] tuples[0m[37m
172.16.1.170         @@ -35,16 +43,16 @@[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # network_vlan_ranges =[0m[37m
172.16.1.170          # Example: network_vlan_ranges = physnet1:1000:2999,physnet2[0m[37m
172.16.1.170         +network_vlan_ranges = [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [ml2_type_gre][0m[37m
172.16.1.170          # (ListOpt) Comma-separated list of <tun_min>:<tun_max> tuples enumerating ranges of GRE tunnel IDs that are available for tenant network allocation[0m[37m
172.16.1.170         -# tunnel_id_ranges =[0m[37m
172.16.1.170         +tunnel_id_ranges = [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [ml2_type_vxlan][0m[37m
172.16.1.170          # (ListOpt) Comma-separated list of <vni_min>:<vni_max> tuples enumerating[0m[37m
172.16.1.170          # ranges of VXLAN VNI IDs that are available for tenant network allocation.[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# vni_ranges =[0m[37m
172.16.1.170         +vni_ranges = [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # (StrOpt) Multicast group for the VXLAN interface. When configured, will[0m[37m
172.16.1.170          # enable sending all broadcast traffic to this multicast group. When left[0m[37m
172.16.1.170         @@ -52,3 +60,9 @@[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # vxlan_group =[0m[37m
172.16.1.170          # Example: vxlan_group = 239.1.1.1[0m[37m
172.16.1.170         +vxlan_group = [0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[securitygroup][0m[37m
172.16.1.170         +# Controls if neutron security group is enabled or not.[0m[37m
172.16.1.170         +# It should be false when you use nova security group.[0m[37m
172.16.1.170         +enable_security_group = True[0m
172.16.1.170 [0m
172.16.1.170   * link[/etc/neutron/plugin.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - create symlink at /etc/neutron/plugin.ini to /etc/neutron/plugins/ml2/ml2_conf.ini[0m
172.16.1.170 [32m
172.16.1.170     - change owner from '' to 'neutron'[0m[32m
172.16.1.170     - change group from '' to 'neutron'[0m
172.16.1.170 [0m
172.16.1.170   * link[/etc/neutron/plugin.ini] action nothing[0m (up to date)[0m
172.16.1.170   * template[/etc/default/neutron-server] action create[0m
172.16.1.170  (skipped due to only_if)[0m
172.16.1.170 Recipe: openstack-network::openvswitch[0m
172.16.1.170   * package[openvswitch] action install[0m
172.16.1.170 [32m
172.16.1.170     - install version 1.10.0-4.ibm.el6 of package openvswitch[0m
172.16.1.170 [0m
172.16.1.170   * service[neutron-openvswitch-switch] action enable[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[neutron-openvswitch-switch] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[neutron-openvswitch-switch][0m
172.16.1.170 [0m
172.16.1.170   * service[neutron-server] action nothing[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * package[openstack-neutron-openvswitch] action install[0m
172.16.1.170 [32m
172.16.1.170     - install version 2014.1-201402251722.ibm.el6.68 of package openstack-neutron-openvswitch[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/neutron/plugins/openvswitch/ovs_neutron_plugin.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/neutron/plugins/openvswitch/ovs_neutron_plugin.ini] from bf7ee2 to 3ebf8f[0m[37m
172.16.1.170         --- /etc/neutron/plugins/openvswitch/ovs_neutron_plugin.ini	2014-02-26 07:04:39.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1x98uc5	2014-08-08 01:55:22.952999964 +0800[0m[37m
172.16.1.170         @@ -1,15 +1,19 @@[0m[37m
172.16.1.170         -[ovs][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[OVS][0m[37m
172.16.1.170          # (StrOpt) Type of network to allocate for tenant networks. The[0m[37m
172.16.1.170          # default value 'local' is useful only for single-box testing and[0m[37m
172.16.1.170          # provides no connectivity between hosts. You MUST either change this[0m
172.16.1.170 [37m
172.16.1.170          # to 'vlan' and configure network_vlan_ranges below or change this to[0m[37m
172.16.1.170         -# 'gre' or 'vxlan' and configure tunnel_id_ranges below in order for[0m[37m
172.16.1.170         -# tenant networks to provide connectivity between hosts. Set to 'none'[0m[37m
172.16.1.170         -# to disable creation of tenant networks.[0m[37m
172.16.1.170         +# 'gre' and configure tunnel_id_ranges below in order for tenant[0m[37m
172.16.1.170         +# networks to provide connectivity between hosts. Set to 'none' to[0m[37m
172.16.1.170         +# disable creation of tenant networks.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# tenant_network_type = local[0m[37m
172.16.1.170         +# Default: tenant_network_type = local[0m[37m
172.16.1.170          # Example: tenant_network_type = gre[0m[37m
172.16.1.170         -# Example: tenant_network_type = vxlan[0m[37m
172.16.1.170         +tenant_network_type = flat[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # (ListOpt) Comma-separated list of[0m[37m
172.16.1.170          # <physical_network>[:<vlan_min>:<vlan_max>] tuples enumerating ranges[0m[37m
172.16.1.170         @@ -17,34 +21,29 @@[0m[37m
172.16.1.170          # allocation. All physical networks listed are available for flat and[0m[37m
172.16.1.170          # VLAN provider network creation. Specified ranges of VLAN IDs are[0m[37m
172.16.1.170          # available for tenant network allocation if tenant_network_type is[0m[37m
172.16.1.170         -# 'vlan'. If empty, only gre, vxlan and local networks may be created.[0m[37m
172.16.1.170         +# 'vlan'. If empty, only gre and local networks may be created.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# network_vlan_ranges =[0m[37m
172.16.1.170         +# Default: network_vlan_ranges =[0m[37m
172.16.1.170          # Example: network_vlan_ranges = physnet1:1000:2999[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # (BoolOpt) Set to True in the server and the agents to enable support[0m[37m
172.16.1.170          # for GRE or VXLAN networks. Requires kernel support for OVS patch ports and[0m[37m
172.16.1.170          # GRE or VXLAN tunneling.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# WARNING: This option will be deprecated in the Icehouse release, at which[0m[37m
172.16.1.170         -#          point setting tunnel_type below will be required to enable[0m[37m
172.16.1.170         -#          tunneling.[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# enable_tunneling = False[0m[37m
172.16.1.170         +# Default: enable_tunneling = False[0m[37m
172.16.1.170         +enable_tunneling = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # (StrOpt) The type of tunnel network, if any, supported by the plugin. If[0m[37m
172.16.1.170          # this is set, it will cause tunneling to be enabled. If this is not set and[0m[37m
172.16.1.170          # the option enable_tunneling is set, this will default to 'gre'.[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# tunnel_type =[0m[37m
172.16.1.170         -# Example: tunnel_type = gre[0m[37m
172.16.1.170         -# Example: tunnel_type = vxlan[0m[37m
172.16.1.170         +# 'gre' or 'vxlan'[0m[37m
172.16.1.170         +tunnel_type = flat[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # (ListOpt) Comma-separated list of <tun_min>:<tun_max> tuples[0m[37m
172.16.1.170         -# enumerating ranges of GRE or VXLAN tunnel IDs that are available for[0m[37m
172.16.1.170         -# tenant network allocation if tenant_network_type is 'gre' or 'vxlan'.[0m[37m
172.16.1.170         +# enumerating ranges of GRE tunnel IDs that are available for tenant[0m[37m
172.16.1.170         +# network allocation if tenant_network_type is 'gre'.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# tunnel_id_ranges =[0m
172.16.1.170 [37m
172.16.1.170         +# Default: tunnel_id_ranges =[0m[37m
172.16.1.170          # Example: tunnel_id_ranges = 1:1000[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Do not change this parameter unless you have a good reason to.[0m[37m
172.16.1.170         @@ -53,24 +52,25 @@[0m[37m
172.16.1.170          # attached to this bridge and then "patched" according to their network[0m[37m
172.16.1.170          # connectivity.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# integration_bridge = br-int[0m[37m
172.16.1.170         +# Default: integration_bridge = br-int[0m[37m
172.16.1.170         +integration_bridge = br-int[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Only used for the agent if tunnel_id_ranges (above) is not empty for[0m[37m
172.16.1.170          # the server.  In most cases, the default value should be fine.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# tunnel_bridge = br-tun[0m[37m
172.16.1.170         +# Default: tunnel_bridge = br-tun[0m[37m
172.16.1.170         +tunnel_bridge = br-tun[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Peer patch port in integration bridge for tunnel bridge[0m[37m
172.16.1.170         -# int_peer_patch_port = patch-tun[0m[37m
172.16.1.170         +# Default: int_peer_patch_port = patch-tun[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Peer patch port in tunnel bridge for integration bridge[0m[37m
172.16.1.170         -# tun_peer_patch_port = patch-int[0m[37m
172.16.1.170         +# Default: tun_peer_patch_port = patch-int[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Uncomment this line for the agent if tunnel_id_ranges (above) is not[0m[37m
172.16.1.170          # empty for the server. Set local-ip to be the local IP address of[0m[37m
172.16.1.170          # this hypervisor.[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# local_ip =[0m[37m
172.16.1.170         +local_ip = [0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # (ListOpt) Comma-separated list of <physical_network>:<bridge> tuples[0m[37m
172.16.1.170          # mapping physical network names to the agent's node-specific OVS[0m[37m
172.16.1.170         @@ -80,86 +80,40 @@[0m[37m
172.16.1.170          # port. All physical networks listed in network_vlan_ranges on the[0m[37m
172.16.1.170          # server should have mappings to appropriate bridges on each agent.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# bridge_mappings =[0m[37m
172.16.1.170         +# Default: bridge_mappings =[0m[37m
172.16.1.170          # Example: bridge_mappings = physnet1:br-eth1[0m[37m
172.16.1.170         +bridge_mappings = openstack.network.openvswitch.bridge_mappings[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -[agent][0m[37m
172.16.1.170         +[AGENT][0m[37m
172.16.1.170          # Agent's polling interval in seconds[0m[37m
172.16.1.170         -# polling_interval = 2[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Minimize polling by monitoring ovsdb for interface changes[0m[37m
172.16.1.170         -# minimize_polling = True[0m[37m
172.16.1.170         +polling_interval = 2[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# When minimize_polling = True, the number of seconds to wait before[0m[37m
172.16.1.170         -# respawning the ovsdb monitor after losing communication with it[0m[37m
172.16.1.170         -# ovsdb_monitor_respawn_interval = 30[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (ListOpt) The types of tenant network tunnels supported by the agent.[0m[37m
172.16.1.170         -# Setting this will enable tunneling support in the agent. This can be set to[0m[37m
172.16.1.170         -# either 'gre' or 'vxlan'. If this is unset, it will default to [] and[0m[37m
172.16.1.170         -# disable tunneling support in the agent. When running the agent with the OVS[0m[37m
172.16.1.170         -# plugin, this value must be the same as "tunnel_type" in the "[ovs]" section.[0m[37m
172.16.1.170         -# When running the agent with ML2, you can specify as many values here as[0m[37m
172.16.1.170         -# your compute hosts supports.[0m[37m
172.16.1.170         -#[0m
172.16.1.170 [37m
172.16.1.170         -# tunnel_types =[0m[37m
172.16.1.170         -# Example: tunnel_types = gre[0m[37m
172.16.1.170         -# Example: tunnel_types = vxlan[0m[37m
172.16.1.170         -# Example: tunnel_types = vxlan, gre[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (IntOpt) The port number to utilize if tunnel_types includes 'vxlan'. By[0m[37m
172.16.1.170         -# default, this will make use of the Open vSwitch default value of '4789' if[0m[37m
172.16.1.170         -# not specified.[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# vxlan_udp_port =[0m[37m
172.16.1.170         -# Example: vxlan_udp_port = 8472[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (IntOpt) This is the MTU size of veth interfaces.[0m[37m
172.16.1.170         -# Do not change unless you have a good reason to.[0m[37m
172.16.1.170         -# The default MTU size of veth interfaces is 1500.[0m[37m
172.16.1.170         -# veth_mtu =[0m[37m
172.16.1.170         -# Example: veth_mtu = 1504[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# (BoolOpt) Flag to enable l2-population extension. This option should only be[0m[37m
172.16.1.170         -# used in conjunction with ml2 plugin and l2population mechanism driver. It'll[0m[37m
172.16.1.170         -# enable plugin to populate remote ports macs and IPs (using fdb_add/remove[0m[37m
172.16.1.170         -# RPC calbbacks instead of tunnel_sync/update) on OVS agents in order to[0m[37m
172.16.1.170         -# optimize tunnel management.[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# l2_population = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -[securitygroup][0m[37m
172.16.1.170         -# Firewall driver for realizing neutron security group function.[0m
172.16.1.170 [37m
172.16.1.170         -# firewall_driver = neutron.agent.firewall.NoopFirewallDriver[0m[37m
172.16.1.170         -# Example: firewall_driver = neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver[0m[37m
172.16.1.170         +[SECURITYGROUP][0m[37m
172.16.1.170         +# Firewall driver for realizing neutron security group function[0m[37m
172.16.1.170         +# Default: firewall_driver = neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver[0m[37m
172.16.1.170         +firewall_driver = neutron.agent.linux.iptables_firewall.OVSHybridIptablesFirewallDriver[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Controls if neutron security group is enabled or not.[0m[37m
172.16.1.170         +# It should be false when you use nova security group.[0m[37m
172.16.1.170         +enable_security_group = True[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          #-----------------------------------------------------------------------------[0m[37m
172.16.1.170          # Sample Configurations.[0m[37m
172.16.1.170          #-----------------------------------------------------------------------------[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # 1. With VLANs on eth1.[0m[37m
172.16.1.170         -# [ovs][0m[37m
172.16.1.170         +# [OVS][0m[37m
172.16.1.170          # network_vlan_ranges = default:2000:3999[0m[37m
172.16.1.170          # tunnel_id_ranges =[0m[37m
172.16.1.170          # integration_bridge = br-int[0m[37m
172.16.1.170          # bridge_mappings = default:br-eth1[0m[37m
172.16.1.170         +# [AGENT][0m[37m
172.16.1.170         +# Add the following setting, if you want to log to a file[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# 2. With GRE tunneling.[0m[37m
172.16.1.170         -# [ovs][0m[37m
172.16.1.170         -# network_vlan_ranges =[0m[37m
172.16.1.170         -# tunnel_id_ranges = 1:1000[0m[37m
172.16.1.170         -# integration_bridge = br-int[0m[37m
172.16.1.170         -# tunnel_bridge = br-tun[0m[37m
172.16.1.170         -# local_ip = 10.0.0.3[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         -# 3. With VXLAN tunneling.[0m[37m
172.16.1.170         -# [ovs][0m[37m
172.16.1.170         +# 2. With tunneling.[0m[37m
172.16.1.170         +# [OVS][0m[37m
172.16.1.170          # network_vlan_ranges =[0m[37m
172.16.1.170         -# tenant_network_type = vxlan[0m[37m
172.16.1.170         -# tunnel_type = vxlan[0m[37m
172.16.1.170          # tunnel_id_ranges = 1:1000[0m[37m
172.16.1.170          # integration_bridge = br-int[0m[37m
172.16.1.170          # tunnel_bridge = br-tun[0m
172.16.1.170 [37m
172.16.1.170          # local_ip = 10.0.0.3[0m[37m
172.16.1.170         -# [agent][0m[37m
172.16.1.170         -# tunnel_types = vxlan[0m
172.16.1.170 [0m
172.16.1.170   * service[neutron-plugin-openvswitch-agent] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[neutron-plugin-openvswitch-agent][0m
172.16.1.170 [0m
172.16.1.170   * service[neutron-plugin-openvswitch-agent] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[neutron-plugin-openvswitch-agent][0m
172.16.1.170 [0m
172.16.1.170   * execute[create internal network bridge] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute ovs-vsctl add-br br-int[0m
172.16.1.170 [0m
172.16.1.170   * execute[create tunnel network bridge] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute ovs-vsctl add-br br-tun[0m
172.16.1.170 [0m
172.16.1.170   * cookbook_file[ovs-dpctl-top] action create[0m
172.16.1.170 [32m
172.16.1.170     - create a new cookbook_file /usr/bin/ovs-dpctl-top[0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-1ij3rdh	2014-08-08 01:55:23.546999964 +0800[0m[37m
172.16.1.170         +++ /var/chef/cache/cookbooks/openstack-network/files/default/ovs-dpctl-top	2014-08-08 01:55:23.545999964 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,1687 @@[0m[37m
172.16.1.170         +#!/usr/bin/env python[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Copyright (c) 2013 Nicira, Inc.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Licensed under the Apache License, Version 2.0 (the "License");[0m[37m
172.16.1.170         +# you may not use this file except in compliance with the License.[0m[37m
172.16.1.170         +# You may obtain a copy of the License at:[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +#     http://www.apache.org/licenses/LICENSE-2.0[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# Unless required by applicable law or agreed to in writing, software[0m[37m
172.16.1.170         +# distributed under the License is distributed on an "AS IS" BASIS,[0m[37m
172.16.1.170         +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.[0m[37m
172.16.1.170         +# See the License for the specific language governing permissions and[0m[37m
172.16.1.170         +# limitations under the License.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# The approximate_size code was copied from[0m
172.16.1.170 [37m
172.16.1.170         +# http://getpython3.com/diveintopython3/your-first-python-program.html#divingin[0m[37m
172.16.1.170         +# which is licensed under # "Dive Into Python 3," Copyright 2011 Mark Pilgrim,[0m[37m
172.16.1.170         +# used under a Creative Commons Attribution-Share-Alike license:[0m
172.16.1.170 [37m
172.16.1.170         +# http://creativecommons.org/licenses/by-sa/3.0/[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +"""Top like behavior for ovs-dpctl dump-flows output.[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +This program summarizes ovs-dpctl flow content by aggregating the number[0m
172.16.1.170 [37m
172.16.1.170         +of packets, total bytes and occurrence of the following fields:[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +  - Datapath in_port[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +  - Ethernet type[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +  - Source and destination MAC addresses[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +  - IP protocol[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +  - Source and destination IPv4 addresses[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +  - Source and destination IPv6 addresses[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +  - UDP and TCP destination port[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +  - Tunnel source and destination addresses[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +Output shows four values:[0m[37m
172.16.1.170         +  - FIELDS: the flow fields for example in_port(1).[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +  - PACKETS: the total number of packets containing the flow field.[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +  - BYTES: the total number of bytes containing the flow field. If units are[0m[37m
172.16.1.170         +  not present then values are in bytes.[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +  - AVERAGE: the average packets size (BYTES/PACKET).[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +  - COUNT: the number of lines in the dump-flow output contain the flow field.[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +Top Behavior[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +While in top mode, the default behavior, the following single character[0m
172.16.1.170 [37m
172.16.1.170         +commands are supported:[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +  a - toggles top in accumulate and live mode. Accumulate mode is described[0m[37m
172.16.1.170         +  below.[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +  s - toggles which column is used to sort content in decreasing order. A[0m
172.16.1.170 [37m
172.16.1.170         +  DESC title is placed over the column.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +  _ - a space indicating to collect dump-flow content again[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +  h - halt output. Any character will restart sampling[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +  f - cycle through flow fields[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +  q - q for quit.[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +Accumulate Mode[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +There are two supported modes: live and accumulate. The default is live.[0m[37m
172.16.1.170         +The parameter --accumulate  or the 'a' character in top mode enables the[0m
172.16.1.170 [37m
172.16.1.170         +latter. In live mode, recent dump-flow content is presented.[0m[37m
172.16.1.170         +Where as accumulate mode keeps track of the prior historical[0m
172.16.1.170 [37m
172.16.1.170         +information until the flow is reset not when the flow is purged. Reset[0m[37m
172.16.1.170         +flows are determined when the packet count for a flow has decreased from[0m
172.16.1.170 [37m
172.16.1.170         +its previous sample. There is one caveat, eventually the system will[0m[37m
172.16.1.170         +run out of memory if, after the accumulate-decay period any flows that[0m
172.16.1.170 [37m
172.16.1.170         +have not been refreshed are purged. The goal here is to free memory[0m[37m
172.16.1.170         +of flows that are not active. Statistics are not decremented. Their purpose[0m[37m
172.16.1.170         +is to reflect the overall history of the flow fields.[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +Debugging Errors[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +Parsing errors are counted and displayed in the status line at the beginning[0m[37m
172.16.1.170         +of the output. Use the --verbose option with --script to see what output[0m
172.16.1.170 [37m
172.16.1.170         + was not parsed, like this:[0m
172.16.1.170 [37m
172.16.1.170         +$ ovs-dpctl dump-flows | ovs-dpctl-top --script --verbose[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +Error messages will identify content that failed to parse.[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +Access Remote Hosts[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +The --host must follow the format user@hostname. This script simply calls[0m[37m
172.16.1.170         +'ssh user@Hostname' without checking for login credentials therefore public[0m[37m
172.16.1.170         +keys should be installed on the system identified by hostname, such as:[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +$ ssh-copy-id user@hostname[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +Consult ssh-copy-id man pages for more details.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +Expected usage[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +$ ovs-dpctl-top[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +or to run as a script:[0m[37m
172.16.1.170         +$ ovs-dpctl dump-flows > dump-flows.log[0m[37m
172.16.1.170         +$ ovs-dpctl-top --script --flow-file dump-flows.log[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +"""[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# pylint: disable-msg=C0103[0m[37m
172.16.1.170         +# pylint: disable-msg=C0302[0m[37m
172.16.1.170         +# pylint: disable-msg=R0902[0m[37m
172.16.1.170         +# pylint: disable-msg=R0903[0m[37m
172.16.1.170         +# pylint: disable-msg=R0904[0m[37m
172.16.1.170         +# pylint: disable-msg=R0912[0m[37m
172.16.1.170         +# pylint: disable-msg=R0913[0m[37m
172.16.1.170         +# pylint: disable-msg=R0914[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +import sys[0m
172.16.1.170 [37m
172.16.1.170         +import os[0m[37m
172.16.1.170         +try:[0m[37m
172.16.1.170         +    ##[0m[37m
172.16.1.170         +    # Arg parse is not installed on older Python distributions.[0m
172.16.1.170 [37m
172.16.1.170         +    # ovs ships with a version in the directory mentioned below.[0m[37m
172.16.1.170         +    import argparse[0m[37m
172.16.1.170         +except ImportError:[0m[37m
172.16.1.170         +    sys.path.append(os.path.join("@pkgdatadir@", "python"))[0m[37m
172.16.1.170         +    import argparse[0m[37m
172.16.1.170         +import logging[0m
172.16.1.170 [37m
172.16.1.170         +import re[0m[37m
172.16.1.170         +import unittest[0m[37m
172.16.1.170         +import copy[0m[37m
172.16.1.170         +import curses[0m[37m
172.16.1.170         +import operator[0m[37m
172.16.1.170         +import subprocess[0m[37m
172.16.1.170         +import fcntl[0m
172.16.1.170 [37m
172.16.1.170         +import struct[0m[37m
172.16.1.170         +import termios[0m[37m
172.16.1.170         +import datetime[0m[37m
172.16.1.170         +import threading[0m[37m
172.16.1.170         +import time[0m[37m
172.16.1.170         +import socket[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +##[0m[37m
172.16.1.170         +# The following two definitions provide the necessary netaddr functionality.[0m[37m
172.16.1.170         +# Python netaddr module is not part of the core installation. Packaging[0m[37m
172.16.1.170         +# netaddr was involved and seems inappropriate given that only two[0m[37m
172.16.1.170         +# methods where used.[0m[37m
172.16.1.170         +def ipv4_to_network(ip_str):[0m[37m
172.16.1.170         +    """ Calculate the network given a ipv4/mask value.[0m[37m
172.16.1.170         +    If a mask is not present simply return ip_str.[0m[37m
172.16.1.170         +    """[0m
172.16.1.170 [37m
172.16.1.170         +    pack_length = '!HH'[0m[37m
172.16.1.170         +    try:[0m[37m
172.16.1.170         +        (ip, mask) = ip_str.split("/")[0m[37m
172.16.1.170         +    except ValueError:[0m[37m
172.16.1.170         +        # just an ip address no mask.[0m
172.16.1.170 [37m
172.16.1.170         +        return ip_str[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    ip_p = socket.inet_pton(socket.AF_INET, ip)[0m[37m
172.16.1.170         +    ip_t = struct.unpack(pack_length, ip_p)[0m[37m
172.16.1.170         +    mask_t = struct.unpack(pack_length, socket.inet_pton(socket.AF_INET, mask))[0m
172.16.1.170 [37m
172.16.1.170         +    network_n = [ii & jj for (ii, jj) in zip(ip_t, mask_t)][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    return socket.inet_ntop(socket.AF_INET,[0m[37m
172.16.1.170         +                            struct.pack('!HH', network_n[0], network_n[1]))[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def ipv6_to_network(ip_str):[0m[37m
172.16.1.170         +    """ Calculate the network given a ipv6/mask value.[0m[37m
172.16.1.170         +    If a mask is not present simply return ip_str.[0m
172.16.1.170 [37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    pack_length = '!HHHHHHHH'[0m[37m
172.16.1.170         +    try:[0m[37m
172.16.1.170         +        (ip, mask) = ip_str.split("/")[0m[37m
172.16.1.170         +    except ValueError:[0m[37m
172.16.1.170         +        # just an ip address no mask.[0m[37m
172.16.1.170         +        return ip_str[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    ip_p = socket.inet_pton(socket.AF_INET6, ip)[0m[37m
172.16.1.170         +    ip_t = struct.unpack(pack_length, ip_p)[0m[37m
172.16.1.170         +    mask_t = struct.unpack(pack_length,[0m[37m
172.16.1.170         +                           socket.inet_pton(socket.AF_INET6, mask))[0m[37m
172.16.1.170         +    network_n = [ii & jj for (ii, jj) in zip(ip_t, mask_t)][0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    return socket.inet_ntop(socket.AF_INET6,[0m[37m
172.16.1.170         +                            struct.pack(pack_length,[0m[37m
172.16.1.170         +                                        network_n[0], network_n[1],[0m[37m
172.16.1.170         +                                        network_n[2], network_n[3],[0m
172.16.1.170 [37m
172.16.1.170         +                                        network_n[4], network_n[5],[0m[37m
172.16.1.170         +                                        network_n[6], network_n[7]))[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##[0m
172.16.1.170 [37m
172.16.1.170         +# columns displayed[0m[37m
172.16.1.170         +##[0m[37m
172.16.1.170         +class Columns:[0m[37m
172.16.1.170         +    """ Holds column specific content.[0m[37m
172.16.1.170         +    Titles needs to be less than 8 characters.[0m
172.16.1.170 [37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    VALUE_WIDTH = 9[0m[37m
172.16.1.170         +    FIELDS = "fields"[0m[37m
172.16.1.170         +    PACKETS = "packets"[0m[37m
172.16.1.170         +    COUNT = "count"[0m[37m
172.16.1.170         +    BYTES = "bytes"[0m[37m
172.16.1.170         +    AVERAGE = "average"[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def __init__(self):[0m[37m
172.16.1.170         +        pass[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    @staticmethod[0m[37m
172.16.1.170         +    def assoc_list(obj):[0m[37m
172.16.1.170         +        """ Return a associated list. """[0m[37m
172.16.1.170         +        return [(Columns.FIELDS, repr(obj)),[0m
172.16.1.170 [37m
172.16.1.170         +                (Columns.PACKETS, obj.packets),[0m[37m
172.16.1.170         +                (Columns.BYTES, obj.bytes),[0m[37m
172.16.1.170         +                (Columns.COUNT, obj.count),[0m[37m
172.16.1.170         +                (Columns.AVERAGE, obj.average),[0m[37m
172.16.1.170         +                ][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def element_eth_get(field_type, element, stats_dict):[0m
172.16.1.170 [37m
172.16.1.170         +    """ Extract eth frame src and dst from a dump-flow element."""[0m[37m
172.16.1.170         +    fmt = "%s(src=%s,dst=%s)"[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    element = fmt % (field_type, element["src"], element["dst"])[0m[37m
172.16.1.170         +    return SumData(field_type, element, stats_dict["packets"],[0m
172.16.1.170 [37m
172.16.1.170         +                   stats_dict["bytes"], element)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def element_ipv4_get(field_type, element, stats_dict):[0m[37m
172.16.1.170         +    """ Extract src and dst from a dump-flow element."""[0m[37m
172.16.1.170         +    fmt = "%s(src=%s,dst=%s)"[0m
172.16.1.170 [37m
172.16.1.170         +    element_show = fmt % (field_type, element["src"], element["dst"])[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    element_key = fmt % (field_type, ipv4_to_network(element["src"]),[0m[37m
172.16.1.170         +                         ipv4_to_network(element["dst"]))[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    return SumData(field_type, element_show, stats_dict["packets"],[0m[37m
172.16.1.170         +                       stats_dict["bytes"], element_key)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def element_tunnel_get(field_type, element, stats_dict):[0m[37m
172.16.1.170         +    """ Extract src and dst from a tunnel."""[0m[37m
172.16.1.170         +    return element_ipv4_get(field_type, element, stats_dict)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def element_ipv6_get(field_type, element, stats_dict):[0m[37m
172.16.1.170         +    """ Extract src and dst from a dump-flow element."""[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    fmt = "%s(src=%s,dst=%s)"[0m
172.16.1.170 [37m
172.16.1.170         +    element_show = fmt % (field_type, element["src"], element["dst"])[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    element_key = fmt % (field_type, ipv6_to_network(element["src"]),[0m[37m
172.16.1.170         +                         ipv6_to_network(element["dst"]))[0m[37m
172.16.1.170 
172.16.1.170         +[0m[37m
172.16.1.170         +    return SumData(field_type, element_show, stats_dict["packets"],[0m[37m
172.16.1.170         +                       stats_dict["bytes"], element_key)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def element_dst_port_get(field_type, element, stats_dict):[0m
172.16.1.170 [37m
172.16.1.170         +    """ Extract src and dst from a dump-flow element."""[0m[37m
172.16.1.170         +    element_key = "%s(dst=%s)" % (field_type, element["dst"])[0m[37m
172.16.1.170         +    return SumData(field_type, element_key, stats_dict["packets"],[0m[37m
172.16.1.170         +                   stats_dict["bytes"], element_key)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +def element_passthrough_get(field_type, element, stats_dict):[0m[37m
172.16.1.170         +    """ Extract src and dst from a dump-flow element."""[0m[37m
172.16.1.170         +    element_key = "%s(%s)" % (field_type, element)[0m[37m
172.16.1.170         +    return SumData(field_type, element_key,[0m[37m
172.16.1.170         +                   stats_dict["packets"], stats_dict["bytes"], element_key)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# pylint: disable-msg=R0903[0m[37m
172.16.1.170         +class OutputFormat:[0m[37m
172.16.1.170         +    """ Holds field_type and function to extract element value. """[0m[37m
172.16.1.170         +    def __init__(self, field_type, generator):[0m[37m
172.16.1.170         +        self.field_type = field_type[0m[37m
172.16.1.170         +        self.generator = generator[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +OUTPUT_FORMAT = [[0m
172.16.1.170 [37m
172.16.1.170         +    OutputFormat("eth", element_eth_get),[0m[37m
172.16.1.170         +    OutputFormat("ipv4", element_ipv4_get),[0m[37m
172.16.1.170         +    OutputFormat("ipv6", element_ipv6_get),[0m[37m
172.16.1.170         +    OutputFormat("tunnel", element_tunnel_get),[0m[37m
172.16.1.170         +    OutputFormat("udp", element_dst_port_get),[0m[37m
172.16.1.170         +    OutputFormat("tcp", element_dst_port_get),[0m[37m
172.16.1.170         +    OutputFormat("eth_type", element_passthrough_get),[0m[37m
172.16.1.170         +    OutputFormat("in_port", element_passthrough_get)[0m[37m
172.16.1.170         +    ][0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +ELEMENT_KEY = {[0m[37m
172.16.1.170         +    "udp": "udp.dst",[0m[37m
172.16.1.170         +    "tcp": "tcp.dst"[0m
172.16.1.170 [37m
172.16.1.170         +    }[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def top_input_get(args):[0m[37m
172.16.1.170         +    """ Return subprocess stdout."""[0m[37m
172.16.1.170         +    cmd = [][0m
172.16.1.170 [37m
172.16.1.170         +    if (args.host):[0m[37m
172.16.1.170         +        cmd += ["ssh", args.host][0m[37m
172.16.1.170         +    cmd += ["ovs-dpctl", "dump-flows"][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    return subprocess.Popen(cmd, stderr=subprocess.STDOUT,[0m
172.16.1.170 [37m
172.16.1.170         +                            stdout=subprocess.PIPE).stdout[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def args_get():[0m[37m
172.16.1.170         +    """ read program parameters handle any necessary validation of input. """[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    parser = argparse.ArgumentParser([0m[37m
172.16.1.170         +                          formatter_class=argparse.RawDescriptionHelpFormatter,[0m[37m
172.16.1.170         +                          description=__doc__)[0m[37m
172.16.1.170         +    ##[0m[37m
172.16.1.170         +    # None is a special value indicating to read flows from stdin.[0m[37m
172.16.1.170         +    # This handles the case[0m[37m
172.16.1.170         +    #   ovs-dpctl dump-flows | ovs-dpctl-flows.py[0m
172.16.1.170 [37m
172.16.1.170         +    parser.add_argument("-v", "--version", version="@VERSION@",[0m[37m
172.16.1.170         +                        action="version", help="show version")[0m[37m
172.16.1.170         +    parser.add_argument("-f", "--flow-file", dest="flowFiles", default=None,[0m[37m
172.16.1.170         +                        action="append",[0m[37m
172.16.1.170         +                        help="file containing flows from ovs-dpctl dump-flow")[0m
172.16.1.170 [37m
172.16.1.170         +    parser.add_argument("-V", "--verbose", dest="verbose",[0m[37m
172.16.1.170         +                        default=logging.CRITICAL,[0m[37m
172.16.1.170         +                        action="store_const", const=logging.DEBUG,[0m[37m
172.16.1.170         +                        help="enable debug level verbosity")[0m
172.16.1.170 [37m
172.16.1.170         +    parser.add_argument("-s", "--script", dest="top", action="store_false",[0m[37m
172.16.1.170         +                        help="Run from a script (no user interface)")[0m[37m
172.16.1.170         +    parser.add_argument("--host", dest="host",[0m[37m
172.16.1.170         +                        help="Specify a user@host for retrieving flows see"[0m[37m
172.16.1.170         +                             "Accessing Remote Hosts for more information")[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    parser.add_argument("-a", "--accumulate", dest="accumulate",[0m
172.16.1.170 [37m
172.16.1.170         +                        action="store_true", default=False,[0m[37m
172.16.1.170         +                        help="Accumulate dump-flow content")[0m[37m
172.16.1.170         +    parser.add_argument("--accumulate-decay", dest="accumulateDecay",[0m[37m
172.16.1.170         +                        default=5.0 * 60, type=float,[0m[37m
172.16.1.170         +                        help="Decay old accumulated flows. "[0m
172.16.1.170 [37m
172.16.1.170         +                        "The default is 5 minutes. "[0m[37m
172.16.1.170         +                        "A value of 0 disables decay.")[0m[37m
172.16.1.170         +    parser.add_argument("-d", "--delay", dest="delay", type=int,[0m[37m
172.16.1.170         +                        default=1000,[0m[37m
172.16.1.170         +                        help="Delay in milliseconds to collect dump-flow "[0m[37m
172.16.1.170         +                             "content (sample rate).")[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    args = parser.parse_args()[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    logging.basicConfig(level=args.verbose)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    return args[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +###[0m[37m
172.16.1.170         +# Code to parse a single line in dump-flow[0m[37m
172.16.1.170         +###[0m[37m
172.16.1.170         +# key(values)[0m
172.16.1.170 [37m
172.16.1.170         +FIELDS_CMPND = re.compile("([\w]+)\((.+)\)")[0m[37m
172.16.1.170         +# key:value[0m[37m
172.16.1.170         +FIELDS_CMPND_ELEMENT = re.compile("([\w:]+)=([/\.\w:]+)")[0m[37m
172.16.1.170         +FIELDS_ELEMENT = re.compile("([\w]+):([-\.\w]+)")[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +def flow_line_iter(line):[0m[37m
172.16.1.170         +    """ iterate over flow dump elements.[0m[37m
172.16.1.170         +    return tuples of (true, element) or (false, remaining element)[0m[37m
172.16.1.170         +    """[0m
172.16.1.170 [37m
172.16.1.170         +    # splits by , except for when in a (). Actions element was not[0m[37m
172.16.1.170         +    # split properly but we don't need it.[0m[37m
172.16.1.170         +    rc = [][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    element = ""[0m
172.16.1.170 [37m
172.16.1.170         +    paren_count = 0[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    for ch in line:[0m[37m
172.16.1.170         +        if (ch == '('):[0m[37m
172.16.1.170         +            paren_count += 1[0m
172.16.1.170 [37m
172.16.1.170         +        elif (ch == ')'):[0m[37m
172.16.1.170         +            paren_count -= 1[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        if (ch == ' '):[0m[37m
172.16.1.170         +            # ignore white space.[0m
172.16.1.170 [37m
172.16.1.170         +            continue[0m[37m
172.16.1.170         +        elif ((ch == ',') and (paren_count == 0)):[0m[37m
172.16.1.170         +            rc.append(element)[0m[37m
172.16.1.170         +            element = ""[0m[37m
172.16.1.170         +        else:[0m[37m
172.16.1.170         +            element += ch[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    if (paren_count):[0m[37m
172.16.1.170         +        raise ValueError(line)[0m[37m
172.16.1.170         +    else:[0m[37m
172.16.1.170         +        if (len(element) > 0):[0m
172.16.1.170 [37m
172.16.1.170         +            rc.append(element)[0m[37m
172.16.1.170         +    return rc[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +def flow_line_compound_parse(compound):[0m[37m
172.16.1.170         +    """ Parse compound element[0m[37m
172.16.1.170         +    for example[0m[37m
172.16.1.170         +    src=00:50:56:b4:4e:f8,dst=33:33:00:01:00:03[0m[37m
172.16.1.170         +    which is in[0m
172.16.1.170 [37m
172.16.1.170         +    eth(src=00:50:56:b4:4e:f8,dst=33:33:00:01:00:03)[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    result = {}[0m[37m
172.16.1.170         +    for element in flow_line_iter(compound):[0m[37m
172.16.1.170         +        match = FIELDS_CMPND_ELEMENT.search(element)[0m[37m
172.16.1.170         +        if (match):[0m[37m
172.16.1.170         +            key = match.group(1)[0m[37m
172.16.1.170         +            value = match.group(2)[0m[37m
172.16.1.170         +            result[key] = value[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        match = FIELDS_CMPND.search(element)[0m[37m
172.16.1.170         +        if (match):[0m[37m
172.16.1.170         +            key = match.group(1)[0m[37m
172.16.1.170         +            value = match.group(2)[0m[37m
172.16.1.170         +            result[key] = flow_line_compound_parse(value)[0m[37m
172.16.1.170         +            continue[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    if (len(result.keys()) == 0):[0m[37m
172.16.1.170         +        return compound[0m[37m
172.16.1.170         +    return result[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def flow_line_split(line):[0m[37m
172.16.1.170         +    """ Convert a flow dump line into ([fields], [stats], actions) tuple.[0m
172.16.1.170 [37m
172.16.1.170         +    Where fields and stats are lists.[0m[37m
172.16.1.170         +    This function relies on a the following ovs-dpctl dump-flow[0m[37m
172.16.1.170         +    output characteristics:[0m[37m
172.16.1.170         +    1. The dumpe flow line consists of a list of frame fields, list of stats[0m[37m
172.16.1.170         +       and action.[0m[37m
172.16.1.170         +    2. list of frame fields, each stat and action field are delimited by ', '.[0m[37m
172.16.1.170         +    3. That all other non stat field are not delimited by ', '.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    results = re.split(', ', line)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    (field, stats, action) = (results[0], results[1:-1], results[-1])[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    fields = flow_line_iter(field)[0m[37m
172.16.1.170         +    return (fields, stats, action)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def elements_to_dict(elements):[0m[37m
172.16.1.170         +    """ Convert line to a hierarchy of dictionaries. """[0m[37m
172.16.1.170         +    result = {}[0m
172.16.1.170 [37m
172.16.1.170         +    for element in elements:[0m[37m
172.16.1.170         +        match = FIELDS_CMPND.search(element)[0m[37m
172.16.1.170         +        if (match):[0m[37m
172.16.1.170         +            key = match.group(1)[0m[37m
172.16.1.170         +            value = match.group(2)[0m
172.16.1.170 [37m
172.16.1.170         +            result[key] = flow_line_compound_parse(value)[0m[37m
172.16.1.170         +            continue[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        match = FIELDS_ELEMENT.search(element)[0m[37m
172.16.1.170         +        if (match):[0m[37m
172.16.1.170         +            key = match.group(1)[0m
172.16.1.170 [37m
172.16.1.170         +            value = match.group(2)[0m[37m
172.16.1.170         +            result[key] = value[0m[37m
172.16.1.170         +        else:[0m[37m
172.16.1.170         +            raise ValueError("can't parse >%s<" % element)[0m[37m
172.16.1.170         +    return result[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# pylint: disable-msg=R0903[0m[37m
172.16.1.170         +class SumData(object):[0m[37m
172.16.1.170         +    """ Interface that all data going into SumDb must implement.[0m
172.16.1.170 [37m
172.16.1.170         +    Holds the flow field and its corresponding count, total packets,[0m[37m
172.16.1.170         +    total bytes and calculates average.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    __repr__ is used as key into SumData singleton.[0m[37m
172.16.1.170         +    __str__ is used as human readable output.[0m[37m
172.16.1.170         +    """[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def __init__(self, field_type, field, packets, flow_bytes, key):[0m[37m
172.16.1.170         +        # Count is the number of lines in the dump-flow log.[0m[37m
172.16.1.170         +        self.field_type = field_type[0m[37m
172.16.1.170         +        self.field = field[0m
172.16.1.170 [37m
172.16.1.170         +        self.count = 1[0m[37m
172.16.1.170         +        self.packets = int(packets)[0m[37m
172.16.1.170         +        self.bytes = int(flow_bytes)[0m[37m
172.16.1.170         +        self.key = key[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def decrement(self, decr_packets, decr_bytes, decr_count):[0m
172.16.1.170 [37m
172.16.1.170         +        """ Decrement content to calculate delta from previous flow sample."""[0m[37m
172.16.1.170         +        self.packets -= decr_packets[0m[37m
172.16.1.170         +        self.bytes -= decr_bytes[0m[37m
172.16.1.170         +        self.count -= decr_count[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def __iadd__(self, other):[0m[37m
172.16.1.170         +        """ Add two objects. """[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        if (self.key != other.key):[0m[37m
172.16.1.170         +            raise ValueError("adding two unrelated types")[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        self.count += other.count[0m[37m
172.16.1.170         +        self.packets += other.packets[0m
172.16.1.170 [37m
172.16.1.170         +        self.bytes += other.bytes[0m[37m
172.16.1.170         +        return self[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def __isub__(self, other):[0m[37m
172.16.1.170         +        """ Decrement two objects. """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        if (self.key != other.key):[0m[37m
172.16.1.170         +            raise ValueError("adding two unrelated types")[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        self.count -= other.count[0m[37m
172.16.1.170         +        self.packets -= other.packets[0m[37m
172.16.1.170         +        self.bytes -= other.bytes[0m[37m
172.16.1.170         +        return self[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def __getattr__(self, name):[0m[37m
172.16.1.170         +        """ Handle average. """[0m[37m
172.16.1.170         +        if (name == "average"):[0m[37m
172.16.1.170         +            if (self.packets == 0):[0m[37m
172.16.1.170         +                return float(0.0)[0m
172.16.1.170 [37m
172.16.1.170         +            else:[0m[37m
172.16.1.170         +                return float(self.bytes) / float(self.packets)[0m[37m
172.16.1.170         +        raise AttributeError(name)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def __str__(self):[0m[37m
172.16.1.170         +        """ Used for debugging. """[0m
172.16.1.170 [37m
172.16.1.170         +        return "%s %s %s %s" % (self.field, self.count,[0m[37m
172.16.1.170         +                                   self.packets, self.bytes)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def __repr__(self):[0m[37m
172.16.1.170         +        """ Used as key in the FlowDB table. """[0m
172.16.1.170 [37m
172.16.1.170         +        return self.key[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def flow_aggregate(fields_dict, stats_dict):[0m[37m
172.16.1.170         +    """ Search for content in a line.[0m
172.16.1.170 [37m
172.16.1.170         +    Passed the flow port of the dump-flows plus the current stats consisting[0m[37m
172.16.1.170         +    of packets, bytes, etc[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    result = [][0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    for output_format in OUTPUT_FORMAT:[0m[37m
172.16.1.170         +        field = fields_dict.get(output_format.field_type, None)[0m[37m
172.16.1.170         +        if (field):[0m[37m
172.16.1.170         +            obj = output_format.generator(output_format.field_type,[0m[37m
172.16.1.170         +                                          field, stats_dict)[0m[37m
172.16.1.170         +            result.append(obj)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    return result[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def flows_read(ihdl, flow_db):[0m[37m
172.16.1.170         +    """ read flow content from ihdl and insert into flow_db. """[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    done = False[0m[37m
172.16.1.170         +    while (not done):[0m[37m
172.16.1.170         +        line = ihdl.readline()[0m[37m
172.16.1.170         +        if (len(line) == 0):[0m[37m
172.16.1.170         +            # end of input[0m[37m
172.16.1.170         +            break[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        try:[0m[37m
172.16.1.170         +            flow_db.flow_line_add(line)[0m[37m
172.16.1.170         +        except ValueError, arg:[0m[37m
172.16.1.170         +            logging.error(arg)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    return flow_db[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def get_terminal_size():[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    return column width and height of the terminal[0m
172.16.1.170 [37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    for fd_io in [0, 1, 2]:[0m[37m
172.16.1.170         +        try:[0m[37m
172.16.1.170         +            result = struct.unpack('hh',[0m[37m
172.16.1.170         +                                   fcntl.ioctl(fd_io, termios.TIOCGWINSZ,[0m[37m
172.16.1.170         +                                               '1234'))[0m
172.16.1.170 [37m
172.16.1.170         +        except IOError:[0m[37m
172.16.1.170         +            result = None[0m[37m
172.16.1.170         +            continue[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    if (result is None or result == (0, 0)):[0m[37m
172.16.1.170         +        # Maybe we can't get the width. In that case assume (25, 80)[0m[37m
172.16.1.170         +        result = (25, 80)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    return result[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +##[0m[37m
172.16.1.170         +# Content derived from:[0m[37m
172.16.1.170         +# http://getpython3.com/diveintopython3/your-first-python-program.html#divingin[0m
172.16.1.170 [37m
172.16.1.170         +##[0m[37m
172.16.1.170         +SUFFIXES = {1000: ['KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'],[0m[37m
172.16.1.170         +            1024: ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']}[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +def approximate_size(size, a_kilobyte_is_1024_bytes=True):[0m[37m
172.16.1.170         +    """Convert a file size to human-readable form.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    Keyword arguments:[0m[37m
172.16.1.170         +    size -- file size in bytes[0m
172.16.1.170 [37m
172.16.1.170         +    a_kilobyte_is_1024_bytes -- if True (default), use multiples of 1024[0m[37m
172.16.1.170         +                                    if False, use multiples of 1000[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    Returns: string[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    """[0m
172.16.1.170 [37m
172.16.1.170         +    size = float(size)[0m[37m
172.16.1.170         +    if size < 0:[0m[37m
172.16.1.170         +        raise ValueError('number must be non-negative')[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    if (a_kilobyte_is_1024_bytes):[0m
172.16.1.170 [37m
172.16.1.170         +        multiple = 1024[0m[37m
172.16.1.170         +    else:[0m[37m
172.16.1.170         +        multiple = 1000[0m[37m
172.16.1.170         +    for suffix in SUFFIXES[multiple]:[0m[37m
172.16.1.170         +        size /= multiple[0m
172.16.1.170 [37m
172.16.1.170         +        if size < multiple:[0m[37m
172.16.1.170         +            return "%.1f %s" % (size, suffix)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    raise ValueError('number too large')[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +##[0m[37m
172.16.1.170         +# End copied content[0m[37m
172.16.1.170         +##[0m[37m
172.16.1.170         +class ColMeta:[0m[37m
172.16.1.170         +    """ Concepts about columns. """[0m
172.16.1.170 [37m
172.16.1.170         +    def __init__(self, sortable, width):[0m[37m
172.16.1.170         +        self.sortable = sortable[0m[37m
172.16.1.170         +        self.width = width[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +class RowMeta:[0m
172.16.1.170 [37m
172.16.1.170         +    """ How to render rows. """[0m[37m
172.16.1.170         +    def __init__(self, label, fmt):[0m[37m
172.16.1.170         +        self.label = label[0m[37m
172.16.1.170         +        self.fmt = fmt[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +def fmt_packet(obj, width):[0m[37m
172.16.1.170         +    """ Provide a string for packets that is appropriate for output."""[0m[37m
172.16.1.170         +    return str(obj.packets).rjust(width)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def fmt_count(obj, width):[0m
172.16.1.170 [37m
172.16.1.170         +    """ Provide a string for average that is appropriate for output."""[0m[37m
172.16.1.170         +    return str(obj.count).rjust(width)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def fmt_avg(obj, width):[0m[37m
172.16.1.170         +    """ Provide a string for average that is appropriate for output."""[0m
172.16.1.170 [37m
172.16.1.170         +    return str(int(obj.average)).rjust(width)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def fmt_field(obj, width):[0m[37m
172.16.1.170         +    """ truncate really long flow and insert ellipses to help make it[0m[37m
172.16.1.170         +    clear.[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    ellipses = " ... "[0m[37m
172.16.1.170         +    value = obj.field[0m
172.16.1.170 [37m
172.16.1.170         +    if (len(obj.field) > width):[0m[37m
172.16.1.170         +        value = value[:(width - len(ellipses))] + ellipses[0m[37m
172.16.1.170         +    return value.ljust(width)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def fmt_bytes(obj, width):[0m
172.16.1.170 [37m
172.16.1.170         +    """ Provide a string for average that is appropriate for output."""[0m[37m
172.16.1.170         +    if (len(str(obj.bytes)) <= width):[0m[37m
172.16.1.170         +        value = str(obj.bytes)[0m[37m
172.16.1.170         +    else:[0m[37m
172.16.1.170         +        value = approximate_size(obj.bytes)[0m
172.16.1.170 [37m
172.16.1.170         +    return value.rjust(width)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def title_center(value, width):[0m[37m
172.16.1.170         +    """ Center a column title."""[0m[37m
172.16.1.170         +    return value.upper().center(width)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def title_rjust(value, width):[0m
172.16.1.170 [37m
172.16.1.170         +    """ Right justify a column title. """[0m[37m
172.16.1.170         +    return value.upper().rjust(width)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def column_picker(order, obj):[0m[37m
172.16.1.170         +    """ return the column as specified by order. """[0m
172.16.1.170 [37m
172.16.1.170         +    if (order == 1):[0m[37m
172.16.1.170         +        return obj.count[0m[37m
172.16.1.170         +    elif (order == 2):[0m[37m
172.16.1.170         +        return obj.packets[0m[37m
172.16.1.170         +    elif (order == 3):[0m
172.16.1.170 [37m
172.16.1.170         +        return obj.bytes[0m[37m
172.16.1.170         +    elif (order == 4):[0m[37m
172.16.1.170         +        return obj.average[0m[37m
172.16.1.170         +    else:[0m[37m
172.16.1.170         +        raise ValueError("order outside of range %s" % order)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +class Render:[0m[37m
172.16.1.170         +    """ Renders flow data. """[0m
172.16.1.170 [37m
172.16.1.170         +    def __init__(self, console_width):[0m[37m
172.16.1.170         +        """ Calculate column widths taking into account changes in format."""[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        self._start_time = datetime.datetime.now()[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        self._cols = [ColMeta(False, 0),[0m[37m
172.16.1.170         +                      ColMeta(True, Columns.VALUE_WIDTH),[0m[37m
172.16.1.170         +                      ColMeta(True, Columns.VALUE_WIDTH),[0m[37m
172.16.1.170         +                      ColMeta(True, Columns.VALUE_WIDTH),[0m[37m
172.16.1.170         +                      ColMeta(True, Columns.VALUE_WIDTH)][0m
172.16.1.170 [37m
172.16.1.170         +        self._console_width = console_width[0m[37m
172.16.1.170         +        self.console_width_set(console_width)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        # Order in this array dictate the order of the columns.[0m[37m
172.16.1.170         +        # The 0 width for the first entry is a place holder. This is[0m[37m
172.16.1.170         +        # dynamically calculated. The first column is special. We need a[0m[37m
172.16.1.170         +        # way to indicate which field are presented.[0m
172.16.1.170 [37m
172.16.1.170         +        self._descs = [RowMeta("", title_rjust),[0m[37m
172.16.1.170         +                       RowMeta("", title_rjust),[0m[37m
172.16.1.170         +                       RowMeta("", title_rjust),[0m[37m
172.16.1.170         +                       RowMeta("", title_rjust),[0m[37m
172.16.1.170         +                       RowMeta("", title_rjust)][0m
172.16.1.170 [37m
172.16.1.170         +        self._column_sort_select = 0[0m[37m
172.16.1.170         +        self.column_select_event()[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        self._titles = [[0m[37m
172.16.1.170         +            RowMeta(Columns.FIELDS, title_center),[0m[37m
172.16.1.170         +            RowMeta(Columns.COUNT, title_rjust),[0m[37m
172.16.1.170         +            RowMeta(Columns.PACKETS, title_rjust),[0m[37m
172.16.1.170         +            RowMeta(Columns.BYTES, title_rjust),[0m
172.16.1.170 [37m
172.16.1.170         +            RowMeta(Columns.AVERAGE, title_rjust)[0m[37m
172.16.1.170         +        ][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        self._datas = [[0m[37m
172.16.1.170         +            RowMeta(None, fmt_field),[0m[37m
172.16.1.170         +            RowMeta(None, fmt_count),[0m
172.16.1.170 [37m
172.16.1.170         +            RowMeta(None, fmt_packet),[0m[37m
172.16.1.170         +            RowMeta(None, fmt_bytes),[0m[37m
172.16.1.170         +            RowMeta(None, fmt_avg)[0m[37m
172.16.1.170         +            ][0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        # _field_types hold which fields are displayed in the field[0m[37m
172.16.1.170         +        # column, with the keyword all implying all fields.[0m[37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        self._field_types = ["all"] + [ii.field_type for ii in OUTPUT_FORMAT][0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        # The default is to show all field types.[0m[37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        self._field_type_select = -1[0m[37m
172.16.1.170         +        self.field_type_toggle()[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def _field_type_select_get(self):[0m[37m
172.16.1.170         +        """ Return which field type to display. """[0m[37m
172.16.1.170         +        return self._field_types[self._field_type_select][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def field_type_toggle(self):[0m[37m
172.16.1.170         +        """ toggle which field types to show. """[0m
172.16.1.170 [37m
172.16.1.170         +        self._field_type_select += 1[0m[37m
172.16.1.170         +        if (self._field_type_select >= len(self._field_types)):[0m[37m
172.16.1.170         +            self._field_type_select = 0[0m[37m
172.16.1.170         +        value = Columns.FIELDS + " (%s)" % self._field_type_select_get()[0m[37m
172.16.1.170         +        self._titles[0].label = value[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def column_select_event(self):[0m[37m
172.16.1.170         +        """ Handles column select toggle. """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        self._descs[self._column_sort_select].label = ""[0m
172.16.1.170 [37m
172.16.1.170         +        for _ in range(len(self._cols)):[0m[37m
172.16.1.170         +            self._column_sort_select += 1[0m[37m
172.16.1.170         +            if (self._column_sort_select >= len(self._cols)):[0m
172.16.1.170 [37m
172.16.1.170         +                self._column_sort_select = 0[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            # Now look for the next sortable column[0m[37m
172.16.1.170         +            if (self._cols[self._column_sort_select].sortable):[0m[37m
172.16.1.170         +                break[0m
172.16.1.170 [37m
172.16.1.170         +        self._descs[self._column_sort_select].label = "DESC"[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def console_width_set(self, console_width):[0m[37m
172.16.1.170         +        """ Adjust the output given the new console_width. """[0m[37m
172.16.1.170         +        self._console_width = console_width[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        spaces = len(self._cols) - 1[0m[37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        # Calculating column width can be tedious but important. The[0m[37m
172.16.1.170         +        # flow field value can be long. The goal here is to dedicate[0m[37m
172.16.1.170         +        # fixed column space for packets, bytes, average and counts. Give the[0m[37m
172.16.1.170         +        # remaining space to the flow column. When numbers get large[0m
172.16.1.170 [37m
172.16.1.170         +        # transition output to output generated by approximate_size which[0m[37m
172.16.1.170         +        # limits output to ###.# XiB in other words 9 characters.[0m[37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        # At this point, we know the maximum length values. We may[0m[37m
172.16.1.170         +        # truncate the flow column to get everything to fit.[0m[37m
172.16.1.170         +        self._cols[0].width = 0[0m[37m
172.16.1.170         +        values_max_length = sum([ii.width for ii in self._cols]) + spaces[0m
172.16.1.170 [37m
172.16.1.170         +        flow_max_length = console_width - values_max_length[0m[37m
172.16.1.170         +        self._cols[0].width = flow_max_length[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def format(self, flow_db):[0m[37m
172.16.1.170         +        """ shows flows based on --script parameter."""[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        rc = [][0m[37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        # Top output consists of[0m[37m
172.16.1.170         +        # Title[0m
172.16.1.170 [37m
172.16.1.170         +        # Column title (2 rows)[0m[37m
172.16.1.170         +        # data[0m[37m
172.16.1.170         +        # statistics and status[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        # Title[0m[37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        rc.append("Flow Summary".center(self._console_width))[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        stats = " Total: %(flow_total)s  errors: %(flow_errors)s " % \[0m[37m
172.16.1.170         +                  flow_db.flow_stats_get()[0m[37m
172.16.1.170         +        accumulate = flow_db.accumulate_get()[0m[37m
172.16.1.170         +        if (accumulate):[0m[37m
172.16.1.170         +            stats += "Accumulate: on "[0m
172.16.1.170 [37m
172.16.1.170         +        else:[0m[37m
172.16.1.170         +            stats += "Accumulate: off "[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        duration = datetime.datetime.now() - self._start_time[0m[37m
172.16.1.170         +        stats += "Duration: %s " % str(duration)[0m[37m
172.16.1.170         +        rc.append(stats.ljust(self._console_width))[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        # 2 rows for columns.[0m[37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        # Indicate which column is in descending order.[0m[37m
172.16.1.170         +        rc.append(" ".join([ii.fmt(ii.label, col.width)[0m[37m
172.16.1.170         +                            for (ii, col) in zip(self._descs, self._cols)]))[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        rc.append(" ".join([ii.fmt(ii.label, col.width)[0m[37m
172.16.1.170         +                         for (ii, col) in zip(self._titles, self._cols)]))[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        # Data.[0m
172.16.1.170 [37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        for dd in flow_db.field_values_in_order(self._field_type_select_get(),[0m[37m
172.16.1.170         +                                                self._column_sort_select):[0m
172.16.1.170 [37m
172.16.1.170         +            rc.append(" ".join([ii.fmt(dd, col.width)[0m[37m
172.16.1.170         +                                for (ii, col) in zip(self._datas,[0m[37m
172.16.1.170         +                                                     self._cols)]))[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        return rc[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +def curses_screen_begin():[0m[37m
172.16.1.170         +    """ begin curses screen control. """[0m[37m
172.16.1.170         +    stdscr = curses.initscr()[0m[37m
172.16.1.170         +    curses.cbreak()[0m
172.16.1.170 [37m
172.16.1.170         +    curses.noecho()[0m[37m
172.16.1.170         +    stdscr.keypad(1)[0m[37m
172.16.1.170         +    return stdscr[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def curses_screen_end(stdscr):[0m[37m
172.16.1.170         +    """ end curses screen control. """[0m
172.16.1.170 [37m
172.16.1.170         +    curses.nocbreak()[0m[37m
172.16.1.170         +    stdscr.keypad(0)[0m[37m
172.16.1.170         +    curses.echo()[0m[37m
172.16.1.170         +    curses.endwin()[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +class FlowDB:[0m[37m
172.16.1.170         +    """ Implements live vs accumulate mode.[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    Flows are stored as key value pairs. The key consists of the content[0m[37m
172.16.1.170         +    prior to stat fields. The value portion consists of stats in a dictionary[0m[37m
172.16.1.170         +    form.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    @ \todo future add filtering here.[0m[37m
172.16.1.170         +    """[0m
172.16.1.170 [37m
172.16.1.170         +    def __init__(self, accumulate):[0m[37m
172.16.1.170         +        self._accumulate = accumulate[0m[37m
172.16.1.170         +        self._error_count = 0[0m[37m
172.16.1.170         +        # Values are (stats, last update time.)[0m[37m
172.16.1.170         +        # The last update time is used for aging.[0m
172.16.1.170 [37m
172.16.1.170         +        self._flow_lock = threading.Lock()[0m[37m
172.16.1.170         +        # This dictionary holds individual flows.[0m
172.16.1.170 [37m
172.16.1.170         +        self._flows = {}[0m[37m
172.16.1.170         +        # This dictionary holds aggregate of flow fields.[0m
172.16.1.170 [37m
172.16.1.170         +        self._fields = {}[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    def accumulate_get(self):[0m[37m
172.16.1.170         +        """ Return the current accumulate state. """[0m
172.16.1.170 [37m
172.16.1.170         +        return self._accumulate[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def accumulate_toggle(self):[0m
172.16.1.170 [37m
172.16.1.170         +        """ toggle accumulate flow behavior. """[0m[37m
172.16.1.170         +        self._accumulate = not self._accumulate[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def begin(self):[0m
172.16.1.170 [37m
172.16.1.170         +        """ Indicate the beginning of processing flow content.[0m[37m
172.16.1.170         +        if accumulate is false clear current set of flows. """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        if (not self._accumulate):[0m
172.16.1.170 [37m
172.16.1.170         +            self._flow_lock.acquire()[0m[37m
172.16.1.170         +            try:[0m[37m
172.16.1.170         +                self._flows.clear()[0m
172.16.1.170 [37m
172.16.1.170         +            finally:[0m[37m
172.16.1.170         +                self._flow_lock.release()[0m
172.16.1.170 [37m
172.16.1.170         +            self._fields.clear()[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def flow_line_add(self, line):[0m
172.16.1.170 [37m
172.16.1.170         +        """ Split a line from a ovs-dpctl dump-flow into key and stats.[0m[37m
172.16.1.170         +        The order of the content in the flow should be:[0m[37m
172.16.1.170         +        - flow content[0m[37m
172.16.1.170         +        - stats for the flow[0m[37m
172.16.1.170         +        - actions[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        This method also assumes that the dump flow output does not[0m[37m
172.16.1.170         +        change order of fields of the same flow.[0m
172.16.1.170 [37m
172.16.1.170         +        """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        line = line.rstrip("\n")[0m
172.16.1.170 [37m
172.16.1.170         +        (fields, stats, _) = flow_line_split(line)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        try:[0m[37m
172.16.1.170         +            fields_dict = elements_to_dict(fields)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            if (len(fields_dict) == 0):[0m
172.16.1.170 [37m
172.16.1.170         +                raise ValueError("flow fields are missing %s", line)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            stats_dict = elements_to_dict(stats)[0m
172.16.1.170 [37m
172.16.1.170         +            if (len(stats_dict) == 0):[0m[37m
172.16.1.170         +                raise ValueError("statistics are missing %s.", line)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            ##[0m
172.16.1.170 [37m
172.16.1.170         +            # In accumulate mode, the Flow database can reach 10,000's of[0m[37m
172.16.1.170         +            # persistent flows. The interaction of the script with this many[0m
172.16.1.170 [37m
172.16.1.170         +            # flows is too slow. Instead, delta are sent to the flow_db[0m[37m
172.16.1.170         +            # database allow incremental changes to be done in O(m) time[0m[37m
172.16.1.170         +            # where m is the current flow list, instead of iterating over[0m
172.16.1.170 [37m
172.16.1.170         +            # all flows in O(n) time where n is the entire history of flows.[0m[37m
172.16.1.170         +            key = ",".join(fields)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            self._flow_lock.acquire()[0m
172.16.1.170 [37m
172.16.1.170         +            try:[0m[37m
172.16.1.170         +                (stats_old_dict, _) = self._flows.get(key, (None, None))[0m
172.16.1.170 [37m
172.16.1.170         +            finally:[0m[37m
172.16.1.170         +                self._flow_lock.release()[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            self.flow_event(fields_dict, stats_old_dict, stats_dict)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        except ValueError, arg:[0m[37m
172.16.1.170         +            logging.error(arg)[0m[37m
172.16.1.170 
172.16.1.170         +            self._error_count += 1[0m[37m
172.16.1.170         +            raise[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        self._flow_lock.acquire()[0m[37m
172.16.1.170         +        try:[0m
172.16.1.170 [37m
172.16.1.170         +            self._flows[key] = (stats_dict, datetime.datetime.now())[0m[37m
172.16.1.170         +        finally:[0m[37m
172.16.1.170         +            self._flow_lock.release()[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    def decay(self, decayTimeInSeconds):[0m[37m
172.16.1.170         +        """ Decay content. """[0m
172.16.1.170 [37m
172.16.1.170         +        now = datetime.datetime.now()[0m[37m
172.16.1.170         +        for (key, value) in self._flows.items():[0m
172.16.1.170 [37m
172.16.1.170         +            (stats_dict, updateTime) = value[0m[37m
172.16.1.170         +            delta = now - updateTime[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            if (delta.seconds > decayTimeInSeconds):[0m[37m
172.16.1.170         +                self._flow_lock.acquire()[0m
172.16.1.170 [37m
172.16.1.170         +                try:[0m[37m
172.16.1.170         +                    del self._flows[key][0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +                    fields_dict = elements_to_dict(flow_line_iter(key))[0m[37m
172.16.1.170         +                    matches = flow_aggregate(fields_dict, stats_dict)[0m
172.16.1.170 [37m
172.16.1.170         +                    for match in matches:[0m[37m
172.16.1.170         +                        self.field_dec(match)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +                finally:[0m
172.16.1.170 [37m
172.16.1.170         +                    self._flow_lock.release()[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def flow_stats_get(self):[0m
172.16.1.170 [37m
172.16.1.170         +        """ Return statistics in a form of a dictionary. """[0m[37m
172.16.1.170         +        rc = None[0m[37m
172.16.1.170         +        self._flow_lock.acquire()[0m
172.16.1.170 [37m
172.16.1.170         +        try:[0m[37m
172.16.1.170         +            rc = {"flow_total": len(self._flows),[0m
172.16.1.170 [37m
172.16.1.170         +                  "flow_errors": self._error_count}[0m[37m
172.16.1.170         +        finally:[0m[37m
172.16.1.170         +            self._flow_lock.release()[0m
172.16.1.170 [37m
172.16.1.170         +        return rc[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    def field_types_get(self):[0m[37m
172.16.1.170         +        """ Return the set of types stored in the singleton. """[0m
172.16.1.170 [37m
172.16.1.170         +        types = set((ii.field_type for ii in self._fields.values()))[0m[37m
172.16.1.170         +        return types[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    def field_add(self, data):[0m[37m
172.16.1.170         +        """ Collect dump-flow data to sum number of times item appears. """[0m
172.16.1.170 [37m
172.16.1.170         +        current = self._fields.get(repr(data), None)[0m[37m
172.16.1.170         +        if (current is None):[0m[37m
172.16.1.170         +            current = copy.copy(data)[0m[37m
172.16.1.170         +        else:[0m
172.16.1.170 [37m
172.16.1.170         +            current += data[0m[37m
172.16.1.170         +        self._fields[repr(current)] = current[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def field_dec(self, data):[0m[37m
172.16.1.170         +        """ Collect dump-flow data to sum number of times item appears. """[0m
172.16.1.170 [37m
172.16.1.170         +        current = self._fields.get(repr(data), None)[0m[37m
172.16.1.170         +        if (current is None):[0m[37m
172.16.1.170         +            raise ValueError("decrementing field missing %s" % repr(data))[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        current -= data[0m[37m
172.16.1.170         +        self._fields[repr(current)] = current[0m
172.16.1.170 [37m
172.16.1.170         +        if (current.count == 0):[0m[37m
172.16.1.170         +            del self._fields[repr(current)][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def field_values_in_order(self, field_type_select, column_order):[0m[37m
172.16.1.170         +        """ Return a list of items in order maximum first. """[0m[37m
172.16.1.170         +        values = self._fields.values()[0m
172.16.1.170 [37m
172.16.1.170         +        if (field_type_select != "all"):[0m[37m
172.16.1.170         +            # If a field type other than "all" then reduce the list.[0m[37m
172.16.1.170         +            values = [ii for ii in values[0m
172.16.1.170 [37m
172.16.1.170         +                      if (ii.field_type == field_type_select)][0m[37m
172.16.1.170         +        values = [(column_picker(column_order, ii), ii) for ii in values][0m
172.16.1.170 [37m
172.16.1.170         +        values.sort(key=operator.itemgetter(0))[0m[37m
172.16.1.170         +        values.reverse()[0m
172.16.1.170 [37m
172.16.1.170         +        values = [ii[1] for ii in values][0m
172.16.1.170 [37m
172.16.1.170         +        return values[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def flow_event(self, fields_dict, stats_old_dict, stats_new_dict):[0m[37m
172.16.1.170         +        """ Receives new flow information. """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        # In order to avoid processing every flow at every sample[0m[37m
172.16.1.170         +        # period, changes in flow packet count is used to determine the[0m[37m
172.16.1.170         +        # delta in the flow statistics. This delta is used in the call[0m[37m
172.16.1.170         +        # to self.decrement prior to self.field_add[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        if (stats_old_dict is None):[0m[37m
172.16.1.170         +            # This is a new flow[0m[37m
172.16.1.170         +            matches = flow_aggregate(fields_dict, stats_new_dict)[0m[37m
172.16.1.170         +            for match in matches:[0m[37m
172.16.1.170         +                self.field_add(match)[0m[37m
172.16.1.170         +        else:[0m[37m
172.16.1.170         +            old_packets = int(stats_old_dict.get("packets", 0))[0m[37m
172.16.1.170         +            new_packets = int(stats_new_dict.get("packets", 0))[0m[37m
172.16.1.170         +            if (old_packets == new_packets):[0m[37m
172.16.1.170         +                # ignore. same data.[0m[37m
172.16.1.170         +                pass[0m[37m
172.16.1.170         +            else:[0m[37m
172.16.1.170         +                old_bytes = stats_old_dict.get("bytes", 0)[0m[37m
172.16.1.170         +                # old_packets != new_packets[0m[37m
172.16.1.170         +                # if old_packets > new_packets then we end up decrementing[0m[37m
172.16.1.170         +                # packets and bytes.[0m[37m
172.16.1.170         +                matches = flow_aggregate(fields_dict, stats_new_dict)[0m[37m
172.16.1.170         +                for match in matches:[0m[37m
172.16.1.170         +                    match.decrement(int(old_packets), int(old_bytes), 1)[0m[37m
172.16.1.170         +                    self.field_add(match)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +class DecayThread(threading.Thread):[0m[37m
172.16.1.170         +    """ Periodically call flow database to see if any flows are old. """[0m[37m
172.16.1.170         +    def __init__(self, flow_db, interval):[0m[37m
172.16.1.170         +        """ Start decay thread. """[0m[37m
172.16.1.170         +        threading.Thread.__init__(self)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        self._interval = max(1, interval)[0m[37m
172.16.1.170         +        self._min_interval = min(1, interval / 10)[0m[37m
172.16.1.170         +        self._flow_db = flow_db[0m[37m
172.16.1.170         +        self._event = threading.Event()[0m
172.16.1.170 [37m
172.16.1.170         +        self._running = True[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        self.daemon = True[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def run(self):[0m[37m
172.16.1.170         +        """ Worker thread which handles decaying accumulated flows. """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        while(self._running):[0m
172.16.1.170 [37m
172.16.1.170         +            self._event.wait(self._min_interval)[0m[37m
172.16.1.170         +            if (self._running):[0m[37m
172.16.1.170         +                self._flow_db.decay(self._interval)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    def stop(self):[0m[37m
172.16.1.170         +        """ Stop thread. """[0m[37m
172.16.1.170         +        self._running = False[0m[37m
172.16.1.170         +        self._event.set()[0m
172.16.1.170 [37m
172.16.1.170         +        ##[0m[37m
172.16.1.170         +        # Give the calling thread time to terminate but not too long.[0m[37m
172.16.1.170         +        # this thread is a daemon so the application will terminate if[0m[37m
172.16.1.170         +        # we timeout during the join. This is just a cleaner way to[0m[37m
172.16.1.170         +        # release resources.[0m[37m
172.16.1.170         +        self.join(2.0)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def flow_top_command(stdscr, render, flow_db):[0m
172.16.1.170 [37m
172.16.1.170         +    """ Handle input while in top mode. """[0m[37m
172.16.1.170         +    ch = stdscr.getch()[0m[37m
172.16.1.170         +    ##[0m
172.16.1.170 [37m
172.16.1.170         +    # Any character will restart sampling.[0m[37m
172.16.1.170         +    if (ch == ord('h')):[0m[37m
172.16.1.170         +        # halt output.[0m
172.16.1.170 [37m
172.16.1.170         +        ch = stdscr.getch()[0m[37m
172.16.1.170         +        while (ch == -1):[0m[37m
172.16.1.170         +            ch = stdscr.getch()[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    if (ch == ord('s')):[0m
172.16.1.170 [37m
172.16.1.170         +        # toggle which column sorts data in descending order.[0m[37m
172.16.1.170         +        render.column_select_event()[0m
172.16.1.170 [37m
172.16.1.170         +    elif (ch == ord('a')):[0m[37m
172.16.1.170         +        flow_db.accumulate_toggle()[0m
172.16.1.170 [37m
172.16.1.170         +    elif (ch == ord('f')):[0m[37m
172.16.1.170         +        render.field_type_toggle()[0m
172.16.1.170 [37m
172.16.1.170         +    elif (ch == ord(' ')):[0m
172.16.1.170 [37m
172.16.1.170         +        # resample[0m[37m
172.16.1.170         +        pass[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    return ch[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +def decay_timer_start(flow_db, accumulateDecay):[0m
172.16.1.170 [37m
172.16.1.170         +    """ If accumulateDecay greater than zero then start timer. """[0m[37m
172.16.1.170         +    if (accumulateDecay > 0):[0m
172.16.1.170 [37m
172.16.1.170         +        decay_timer = DecayThread(flow_db, accumulateDecay)[0m
172.16.1.170 [37m
172.16.1.170         +        decay_timer.start()[0m[37m
172.16.1.170         +        return decay_timer[0m
172.16.1.170 [37m
172.16.1.170         +    else:[0m
172.16.1.170 [37m
172.16.1.170         +        return None[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +def flows_top(args):[0m[37m
172.16.1.170         +    """ handles top like behavior when --script is not specified. """[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    flow_db = FlowDB(args.accumulate)[0m
172.16.1.170 [37m
172.16.1.170         +    render = Render(0)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    decay_timer = decay_timer_start(flow_db, args.accumulateDecay)[0m
172.16.1.170 [37m
172.16.1.170         +    lines = [][0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    try:[0m
172.16.1.170 [37m
172.16.1.170         +        stdscr = curses_screen_begin()[0m
172.16.1.170 [37m
172.16.1.170         +        try:[0m[37m
172.16.1.170         +            ch = 'X'[0m
172.16.1.170 [37m
172.16.1.170         +            #stdscr.nodelay(1)[0m
172.16.1.170 [37m
172.16.1.170         +            stdscr.timeout(args.delay)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            while (ch != ord('q')):[0m[37m
172.16.1.170         +                flow_db.begin()[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +                try:[0m
172.16.1.170 [37m
172.16.1.170         +                    ihdl = top_input_get(args)[0m[37m
172.16.1.170         +                    try:[0m[37m
172.16.1.170         +                        flows_read(ihdl, flow_db)[0m
172.16.1.170 [37m
172.16.1.170         +                    finally:[0m[37m
172.16.1.170         +                        ihdl.close()[0m
172.16.1.170 [37m
172.16.1.170         +                except OSError, arg:[0m
172.16.1.170 [37m
172.16.1.170         +                    logging.critical(arg)[0m[37m
172.16.1.170         +                    break[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +                (console_height, console_width) = stdscr.getmaxyx()[0m[37m
172.16.1.170         +                render.console_width_set(console_width)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +                output_height = console_height - 1[0m[37m
172.16.1.170         +                line_count = range(output_height)[0m
172.16.1.170 [37m
172.16.1.170         +                line_output = render.format(flow_db)[0m[37m
172.16.1.170         +                lines = zip(line_count, line_output[:output_height])[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +                stdscr.erase()[0m[37m
172.16.1.170         +                for (count, line) in lines:[0m
172.16.1.170 [37m
172.16.1.170         +                    stdscr.addstr(count, 0, line[:console_width])[0m
172.16.1.170 [37m
172.16.1.170         +                stdscr.refresh()[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +                ch = flow_top_command(stdscr, render, flow_db)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        finally:[0m
172.16.1.170 [37m
172.16.1.170         +            curses_screen_end(stdscr)[0m[37m
172.16.1.170         +    except KeyboardInterrupt:[0m
172.16.1.170 [37m
172.16.1.170         +        pass[0m[37m
172.16.1.170         +    if (decay_timer):[0m
172.16.1.170 [37m
172.16.1.170         +        decay_timer.stop()[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # repeat output[0m
172.16.1.170 [37m
172.16.1.170         +    for (count, line) in lines:[0m
172.16.1.170 [37m
172.16.1.170         +        print line[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +def flows_script(args):[0m[37m
172.16.1.170         +    """ handles --script option. """[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    flow_db = FlowDB(args.accumulate)[0m
172.16.1.170 [37m
172.16.1.170         +    flow_db.begin()[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    if (args.flowFiles is None):[0m
172.16.1.170 [37m
172.16.1.170         +        logging.info("reading flows from stdin")[0m
172.16.1.170 [37m
172.16.1.170         +        ihdl = os.fdopen(sys.stdin.fileno(), 'r', 0)[0m[37m
172.16.1.170         +        try:[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db = flows_read(ihdl, flow_db)[0m[37m
172.16.1.170         +        finally:[0m
172.16.1.170 [37m
172.16.1.170         +            ihdl.close()[0m
172.16.1.170 [37m
172.16.1.170         +    else:[0m
172.16.1.170 [37m
172.16.1.170         +        for flowFile in args.flowFiles:[0m
172.16.1.170 [37m
172.16.1.170         +            logging.info("reading flows from %s", flowFile)[0m[37m
172.16.1.170         +            ihdl = open(flowFile, "r")[0m
172.16.1.170 [37m
172.16.1.170         +            try:[0m
172.16.1.170 [37m
172.16.1.170         +                flow_db = flows_read(ihdl, flow_db)[0m[37m
172.16.1.170         +            finally:[0m
172.16.1.170 [37m
172.16.1.170         +                ihdl.close()[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    (_, console_width) = get_terminal_size()[0m[37m
172.16.1.170         +    render = Render(console_width)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    for line in render.format(flow_db):[0m
172.16.1.170 [37m
172.16.1.170         +        print line[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +def main():[0m
172.16.1.170 [37m
172.16.1.170         +    """ Return 0 on success or 1 on failure.[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    Algorithm[0m[37m
172.16.1.170         +    There are four stages to the process ovs-dpctl dump-flow content.[0m
172.16.1.170 [37m
172.16.1.170         +    1. Retrieve current input[0m
172.16.1.170 [37m
172.16.1.170         +    2. store in FlowDB and maintain history[0m[37m
172.16.1.170         +    3. Iterate over FlowDB and aggregating stats for each flow field[0m
172.16.1.170 [37m
172.16.1.170         +    4. present data.[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    Retrieving current input is currently trivial, the ovs-dpctl dump-flow[0m
172.16.1.170 [37m
172.16.1.170         +    is called. Future version will have more elaborate means for collecting[0m
172.16.1.170 [37m
172.16.1.170         +    dump-flow content. FlowDB returns all data as in the form of a hierarchical[0m[37m
172.16.1.170         +    dictionary. Input will vary.[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    In the case of accumulate mode, flows are not purged from the FlowDB[0m
172.16.1.170 [37m
172.16.1.170         +    manager. Instead at the very least, merely the latest statistics are[0m[37m
172.16.1.170         +    kept. In the case, of live output the FlowDB is purged prior to sampling[0m
172.16.1.170 [37m
172.16.1.170         +    data.[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    Aggregating results requires identify flow fields to aggregate out[0m
172.16.1.170 [37m
172.16.1.170         +    of the flow and summing stats.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    """[0m
172.16.1.170 [37m
172.16.1.170         +    args = args_get()[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +    try:[0m[37m
172.16.1.170         +        if (args.top):[0m
172.16.1.170 [37m
172.16.1.170         +            flows_top(args)[0m[37m
172.16.1.170         +        else:[0m
172.16.1.170 [37m
172.16.1.170         +            flows_script(args)[0m[37m
172.16.1.170         +    except KeyboardInterrupt:[0m
172.16.1.170 [37m
172.16.1.170         +        return 1[0m[37m
172.16.1.170         +    return 0[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +if __name__ == '__main__':[0m
172.16.1.170 [37m
172.16.1.170         +    sys.exit(main())[0m
172.16.1.170 [37m
172.16.1.170         +elif __name__ == 'ovs-dpctl-top':[0m
172.16.1.170 [37m
172.16.1.170         +    # pylint: disable-msg=R0915[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    ##[0m
172.16.1.170 [37m
172.16.1.170         +    # Test case beyond this point.[0m
172.16.1.170 [37m
172.16.1.170         +    # pylint: disable-msg=R0904[0m[37m
172.16.1.170         +    class TestsuiteFlowParse(unittest.TestCase):[0m
172.16.1.170 [37m
172.16.1.170         +        """[0m[37m
172.16.1.170         +        parse flow into hierarchy of dictionaries.[0m
172.16.1.170 [37m
172.16.1.170         +        """[0m[37m
172.16.1.170         +        def test_flow_parse(self):[0m
172.16.1.170 [37m
172.16.1.170         +            """ test_flow_parse. """[0m
172.16.1.170 [37m
172.16.1.170         +            line = "in_port(4),eth(src=00:50:56:b4:4e:f8,"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "dst=33:33:00:01:00:03),eth_type(0x86dd),"\[0m[37m
172.16.1.170         +                   "ipv6(src=fe80::55bf:fe42:bc96:2812,dst=ff02::1:3,"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "label=0,proto=17,tclass=0,hlimit=1,frag=no),"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "udp(src=61252,dst=5355), packets:1, bytes:92, "\[0m
172.16.1.170 [37m
172.16.1.170         +                   "used:0.703s, actions:3,8,11,14,17,20,23,26,29,32,35,"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "38,41,44,47,50,53,56,59,62,65"[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            (fields, stats, _) = flow_line_split(line)[0m[37m
172.16.1.170         +            flow_dict = elements_to_dict(fields + stats)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(flow_dict["eth"]["src"], "00:50:56:b4:4e:f8")[0m[37m
172.16.1.170         +            self.assertEqual(flow_dict["eth"]["dst"], "33:33:00:01:00:03")[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(flow_dict["ipv6"]["src"],[0m
172.16.1.170 [37m
172.16.1.170         +                             "fe80::55bf:fe42:bc96:2812")[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(flow_dict["ipv6"]["dst"], "ff02::1:3")[0m[37m
172.16.1.170         +            self.assertEqual(flow_dict["packets"], "1")[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(flow_dict["bytes"], "92")[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            line = "in_port(4),eth(src=00:50:56:b4:4e:f8,"\[0m[37m
172.16.1.170         +                   "dst=33:33:00:01:00:03),eth_type(0x86dd),"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "ipv6(src=fe80::55bf:fe42:bc96:2812,dst=ff02::1:3,"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "label=0,proto=17,tclass=0,hlimit=1,frag=no),"\[0m[37m
172.16.1.170         +                   "udp(src=61252,dst=5355), packets:1, bytes:92, "\[0m
172.16.1.170 [37m
172.16.1.170         +                   "used:-0.703s, actions:3,8,11,14,17,20,23,26,29,32,35,"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "38,41,44,47,50,53,56,59,62,65"[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            (fields, stats, _) = flow_line_split(line)[0m
172.16.1.170 [37m
172.16.1.170         +            flow_dict = elements_to_dict(fields + stats)[0m[37m
172.16.1.170         +            self.assertEqual(flow_dict["used"], "-0.703s")[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(flow_dict["packets"], "1")[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(flow_dict["bytes"], "92")[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        def test_flow_sum(self):[0m[37m
172.16.1.170         +            """ test_flow_sum. """[0m
172.16.1.170 [37m
172.16.1.170         +            line = "in_port(4),eth(src=00:50:56:b4:4e:f8,"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "dst=33:33:00:01:00:03),eth_type(0x86dd),"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "ipv6(src=fe80::55bf:fe42:bc96:2812,dst=ff02::1:3,"\[0m[37m
172.16.1.170         +                   "label=0,proto=17,tclass=0,hlimit=1,frag=no),"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "udp(src=61252,dst=5355), packets:2, bytes:92, "\[0m
172.16.1.170 [37m
172.16.1.170         +                   "used:0.703s, actions:3,8,11,14,17,20,23,26,29,32,35,"\[0m[37m
172.16.1.170         +                   "38,41,44,47,50,53,56,59,62,65"[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            (fields, stats, _) = flow_line_split(line)[0m
172.16.1.170 [37m
172.16.1.170         +            stats_dict = elements_to_dict(stats)[0m
172.16.1.170 [37m
172.16.1.170         +            fields_dict = elements_to_dict(fields)[0m[37m
172.16.1.170         +            ##[0m[37m
172.16.1.170         +            # Test simple case of one line.[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db = FlowDB(False)[0m
172.16.1.170 [37m
172.16.1.170         +            matches = flow_aggregate(fields_dict, stats_dict)[0m
172.16.1.170 [37m
172.16.1.170         +            for match in matches:[0m[37m
172.16.1.170         +                flow_db.field_add(match)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            flow_types = flow_db.field_types_get()[0m
172.16.1.170 [37m
172.16.1.170         +            expected_flow_types = ["eth", "eth_type", "udp", "in_port", "ipv6"][0m
172.16.1.170 [37m
172.16.1.170         +            self.assert_(len(flow_types) == len(expected_flow_types))[0m[37m
172.16.1.170         +            for flow_type in flow_types:[0m
172.16.1.170 [37m
172.16.1.170         +                self.assertTrue(flow_type in expected_flow_types)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            for flow_type in flow_types:[0m
172.16.1.170 [37m
172.16.1.170         +                sum_value = flow_db.field_values_in_order("all", 1)[0m
172.16.1.170 [37m
172.16.1.170         +                self.assert_(len(sum_value) == 5)[0m[37m
172.16.1.170         +                self.assert_(sum_value[0].packets == 2)[0m
172.16.1.170 [37m
172.16.1.170         +                self.assert_(sum_value[0].count == 1)[0m[37m
172.16.1.170         +                self.assert_(sum_value[0].bytes == 92)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            ##[0m
172.16.1.170 [37m
172.16.1.170         +            # Add line again just to see counts go up.[0m
172.16.1.170 [37m
172.16.1.170         +            matches = flow_aggregate(fields_dict, stats_dict)[0m
172.16.1.170 [37m
172.16.1.170         +            for match in matches:[0m[37m
172.16.1.170         +                flow_db.field_add(match)[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            flow_types = flow_db.field_types_get()[0m[37m
172.16.1.170         +            self.assert_(len(flow_types) == len(expected_flow_types))[0m
172.16.1.170 [37m
172.16.1.170         +            for flow_type in flow_types:[0m[37m
172.16.1.170         +                self.assertTrue(flow_type in expected_flow_types)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            for flow_type in flow_types:[0m
172.16.1.170 [37m
172.16.1.170         +                sum_value = flow_db.field_values_in_order("all", 1)[0m
172.16.1.170 [37m
172.16.1.170         +                self.assert_(len(sum_value) == 5)[0m[37m
172.16.1.170         +                self.assert_(sum_value[0].packets == 4)[0m
172.16.1.170 [37m
172.16.1.170         +                self.assert_(sum_value[0].count == 2)[0m[37m
172.16.1.170         +                self.assert_(sum_value[0].bytes == 2 * 92)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        def test_assoc_list(self):[0m
172.16.1.170 [37m
172.16.1.170         +            """ test_assoc_list. """[0m[37m
172.16.1.170         +            line = "in_port(4),eth(src=00:50:56:b4:4e:f8,"\[0m[37m
172.16.1.170         +                   "dst=33:33:00:01:00:03),eth_type(0x86dd),"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "ipv6(src=fe80::55bf:fe42:bc96:2812,dst=ff02::1:3,"\[0m[37m
172.16.1.170         +                   "label=0,proto=17,tclass=0,hlimit=1,frag=no),"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "udp(src=61252,dst=5355), packets:2, bytes:92, "\[0m[37m
172.16.1.170         +                   "used:0.703s, actions:3,8,11,14,17,20,23,26,29,32,35,"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "38,41,44,47,50,53,56,59,62,65"[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            valid_flows = [[0m
172.16.1.170 [37m
172.16.1.170         +                'eth_type(0x86dd)',[0m[37m
172.16.1.170         +                'udp(dst=5355)',[0m[37m
172.16.1.170         +                'in_port(4)',[0m
172.16.1.170 [37m
172.16.1.170         +                'ipv6(src=fe80::55bf:fe42:bc96:2812,dst=ff02::1:3)',[0m[37m
172.16.1.170         +                'eth(src=00:50:56:b4:4e:f8,dst=33:33:00:01:00:03)'[0m
172.16.1.170 [37m
172.16.1.170         +                ][0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            (fields, stats, _) = flow_line_split(line)[0m
172.16.1.170 [37m
172.16.1.170         +            stats_dict = elements_to_dict(stats)[0m[37m
172.16.1.170         +            fields_dict = elements_to_dict(fields)[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            ##[0m
172.16.1.170 [37m
172.16.1.170         +            # Test simple case of one line.[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db = FlowDB(False)[0m
172.16.1.170 [37m
172.16.1.170         +            matches = flow_aggregate(fields_dict, stats_dict)[0m[37m
172.16.1.170         +            for match in matches:[0m
172.16.1.170 [37m
172.16.1.170         +                flow_db.field_add(match)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            for sum_value in flow_db.field_values_in_order("all", 1):[0m
172.16.1.170 [37m
172.16.1.170         +                assoc_list = Columns.assoc_list(sum_value)[0m[37m
172.16.1.170         +                for item in assoc_list:[0m
172.16.1.170 [37m
172.16.1.170         +                    if (item[0] == "fields"):[0m
172.16.1.170 [37m
172.16.1.170         +                        self.assertTrue(item[1] in valid_flows)[0m[37m
172.16.1.170         +                    elif (item[0] == "packets"):[0m
172.16.1.170 [37m
172.16.1.170         +                        self.assertTrue(item[1] == 2)[0m[37m
172.16.1.170         +                    elif (item[0] == "count"):[0m
172.16.1.170 [37m
172.16.1.170         +                        self.assertTrue(item[1] == 1)[0m
172.16.1.170 [37m
172.16.1.170         +                    elif (item[0] == "average"):[0m[37m
172.16.1.170         +                        self.assertTrue(item[1] == 46.0)[0m
172.16.1.170 [37m
172.16.1.170         +                    elif (item[0] == "bytes"):[0m[37m
172.16.1.170         +                        self.assertTrue(item[1] == 92)[0m
172.16.1.170 [37m
172.16.1.170         +                    else:[0m[37m
172.16.1.170         +                        raise ValueError("unknown %s", item[0])[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        def test_human_format(self):[0m
172.16.1.170 [37m
172.16.1.170         +            """ test_assoc_list. """[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(approximate_size(0.0), "0.0 KiB")[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(approximate_size(1024), "1.0 KiB")[0m[37m
172.16.1.170         +            self.assertEqual(approximate_size(1024 * 1024), "1.0 MiB")[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(approximate_size((1024 * 1024) + 100000),[0m
172.16.1.170 [37m
172.16.1.170         +                             "1.1 MiB")[0m[37m
172.16.1.170         +            value = (1024 * 1024 * 1024) + 100000000[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(approximate_size(value), "1.1 GiB")[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        def test_flow_line_split(self):[0m
172.16.1.170 [37m
172.16.1.170         +            """ Splitting a flow line is not trivial.[0m
172.16.1.170 [37m
172.16.1.170         +            There is no clear delimiter. Comma is used liberally."""[0m
172.16.1.170 [37m
172.16.1.170         +            expected_fields = ["in_port(4)",[0m
172.16.1.170 [37m
172.16.1.170         +                            "eth(src=00:50:56:b4:4e:f8,dst=33:33:00:01:00:03)",[0m[37m
172.16.1.170         +                            "eth_type(0x86dd)",[0m
172.16.1.170 [37m
172.16.1.170         +                           "ipv6(src=fe80::55bf:fe42:bc96:2812,dst=ff02::1:3,"[0m[37m
172.16.1.170         +                           "label=0,proto=17,tclass=0,hlimit=1,frag=no)",[0m
172.16.1.170 [37m
172.16.1.170         +                           "udp(src=61252,dst=5355)"][0m[37m
172.16.1.170         +            expected_stats = ["packets:2", "bytes:92", "used:0.703s"][0m
172.16.1.170 [37m
172.16.1.170         +            expected_actions = "actions:3,8,11,14,17,20,23,26,29,32,35," \[0m
172.16.1.170 [37m
172.16.1.170         +                               "38,41,44,47,50,53,56,59,62,65"[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            line = "in_port(4),eth(src=00:50:56:b4:4e:f8,"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "dst=33:33:00:01:00:03),eth_type(0x86dd),"\[0m[37m
172.16.1.170         +                   "ipv6(src=fe80::55bf:fe42:bc96:2812,dst=ff02::1:3,"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "label=0,proto=17,tclass=0,hlimit=1,frag=no),"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "udp(src=61252,dst=5355), packets:2, bytes:92, "\[0m[37m
172.16.1.170         +                   "used:0.703s, actions:3,8,11,14,17,20,23,26,29,32,35,"\[0m
172.16.1.170 [37m
172.16.1.170         +                   "38,41,44,47,50,53,56,59,62,65"[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            (fields, stats, actions) = flow_line_split(line)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(fields, expected_fields)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(stats, expected_stats)[0m[37m
172.16.1.170         +            self.assertEqual(actions, expected_actions)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        def test_accumulate_decay(self):[0m
172.16.1.170 [37m
172.16.1.170         +            """ test_accumulate_decay: test accumulated decay. """[0m
172.16.1.170 [37m
172.16.1.170         +            lines = ["in_port(1),eth(src=00:50:56:4f:dc:3b,"[0m
172.16.1.170 [37m
172.16.1.170         +                     "dst=ff:ff:ff:ff:ff:ff),"[0m[37m
172.16.1.170         +                     "eth_type(0x0806),arp(sip=10.24.105.107/255.255.255.255,"[0m[37m
172.16.1.170         +                     "tip=10.24.104.230/255.255.255.255,op=1/0xff,"[0m
172.16.1.170 [37m
172.16.1.170         +                     "sha=00:50:56:4f:dc:3b/00:00:00:00:00:00,"[0m
172.16.1.170 [37m
172.16.1.170         +                     "tha=00:00:00:00:00:00/00:00:00:00:00:00), "[0m[37m
172.16.1.170         +                     "packets:1, bytes:120, used:0.004s, actions:1"][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            flow_db = FlowDB(True)[0m[37m
172.16.1.170         +            flow_db.begin()[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.flow_line_add(lines[0])[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            # Make sure we decay[0m
172.16.1.170 [37m
172.16.1.170         +            time.sleep(4)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(flow_db.flow_stats_get()["flow_total"], 1)[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.decay(1)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(flow_db.flow_stats_get()["flow_total"], 0)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.flow_line_add(lines[0])[0m[37m
172.16.1.170         +            self.assertEqual(flow_db.flow_stats_get()["flow_total"], 1)[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.decay(30)[0m
172.16.1.170 [37m
172.16.1.170         +            # Should not be deleted.[0m[37m
172.16.1.170         +            self.assertEqual(flow_db.flow_stats_get()["flow_total"], 1)[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.flow_line_add(lines[0])[0m[37m
172.16.1.170         +            self.assertEqual(flow_db.flow_stats_get()["flow_total"], 1)[0m
172.16.1.170 [37m
172.16.1.170         +            timer = decay_timer_start(flow_db, 2)[0m
172.16.1.170 [37m
172.16.1.170         +            time.sleep(10)[0m[37m
172.16.1.170         +            self.assertEqual(flow_db.flow_stats_get()["flow_total"], 0)[0m
172.16.1.170 [37m
172.16.1.170         +            timer.stop()[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        def test_accumulate(self):[0m[37m
172.16.1.170         +            """ test_accumulate test that FlowDB supports accumulate. """[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            lines = ["in_port(1),eth(src=00:50:56:4f:dc:3b,"[0m
172.16.1.170 [37m
172.16.1.170         +                     "dst=ff:ff:ff:ff:ff:ff),"[0m
172.16.1.170 [37m
172.16.1.170         +                     "eth_type(0x0806),arp(sip=10.24.105.107/255.255.255.255,"[0m[37m
172.16.1.170         +                     "tip=10.24.104.230/255.255.255.255,op=1/0xff,"[0m
172.16.1.170 [37m
172.16.1.170         +                     "sha=00:50:56:4f:dc:3b/00:00:00:00:00:00,"[0m[37m
172.16.1.170         +                     "tha=00:00:00:00:00:00/00:00:00:00:00:00), "[0m
172.16.1.170 [37m
172.16.1.170         +                     "packets:1, bytes:120, used:0.004s, actions:1",[0m
172.16.1.170 [37m
172.16.1.170         +                     "in_port(2),"[0m[37m
172.16.1.170         +                     "eth(src=68:ef:bd:25:ef:c0,dst=33:33:00:00:00:66),"[0m
172.16.1.170 [37m
172.16.1.170         +                     "eth_type(0x86dd),ipv6(src=fe80::6aef:bdff:fe25:efc0/::,"[0m
172.16.1.170 [37m
172.16.1.170         +                     "dst=ff02::66/::,label=0/0,proto=17/0xff,tclass=0xe0/0,"[0m
172.16.1.170 [37m
172.16.1.170         +                     "hlimit=255/0,frag=no/0),udp(src=2029,dst=2029), "[0m
172.16.1.170 [37m
172.16.1.170         +                     "packets:2, bytes:5026, used:0.348s, actions:1",[0m
172.16.1.170 [37m
172.16.1.170         +                     "in_port(1),eth(src=ee:ee:ee:ee:ee:ee,"[0m
172.16.1.170 [37m
172.16.1.170         +                     "dst=ff:ff:ff:ff:ff:ff),"[0m
172.16.1.170 [37m
172.16.1.170         +                     "eth_type(0x0806),arp(sip=10.24.105.107/255.255.255.255,"[0m[37m
172.16.1.170         +                     "tip=10.24.104.230/255.255.255.255,op=1/0xff,"[0m
172.16.1.170 [37m
172.16.1.170         +                     "sha=00:50:56:4f:dc:3b/00:00:00:00:00:00,"[0m[37m
172.16.1.170         +                     "tha=00:00:00:00:00:00/00:00:00:00:00:00), packets:2, "[0m
172.16.1.170 [37m
172.16.1.170         +                     "bytes:240, used:0.004s, actions:1"][0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            lines = [[0m
172.16.1.170 [37m
172.16.1.170         +                "in_port(1),eth_type(0x0806), packets:1, bytes:120, actions:1",[0m
172.16.1.170 [37m
172.16.1.170         +                "in_port(2),eth_type(0x0806), packets:2, bytes:126, actions:1",[0m[37m
172.16.1.170         +                "in_port(1),eth_type(0x0806), packets:2, bytes:240, actions:1",[0m
172.16.1.170 [37m
172.16.1.170         +                "in_port(1),eth_type(0x0800), packets:1, bytes:120, actions:1",[0m[37m
172.16.1.170         +                "in_port(1),eth_type(0x0800), packets:2, bytes:240, actions:1",[0m
172.16.1.170 [37m
172.16.1.170         +                "in_port(1),eth_type(0x0806), packets:1, bytes:120, actions:1",[0m[37m
172.16.1.170         +                ][0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            # Turn on accumulate.[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db = FlowDB(True)[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.begin()[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.flow_line_add(lines[0])[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            # Test one flow exist.[0m
172.16.1.170 [37m
172.16.1.170         +            sum_values = flow_db.field_values_in_order("all", 1)[0m
172.16.1.170 [37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(1)")][0m[37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 120)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 1)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            # simulate another sample[0m
172.16.1.170 [37m
172.16.1.170         +            # Test two different flows exist.[0m[37m
172.16.1.170         +            flow_db.begin()[0m[37m
172.16.1.170         +            flow_db.flow_line_add(lines[1])[0m[37m
172.16.1.170         +            sum_values = flow_db.field_values_in_order("all", 1)[0m[37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(1)")][0m[37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 120)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 1)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(2)")][0m[37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 2)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 126)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 1)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            # Test first flow increments packets.[0m[37m
172.16.1.170         +            flow_db.begin()[0m[37m
172.16.1.170         +            flow_db.flow_line_add(lines[2])[0m[37m
172.16.1.170         +            sum_values = flow_db.field_values_in_order("all", 1)[0m[37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(1)")][0m[37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 2)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 240)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 1)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(2)")][0m[37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 2)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 126)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 1)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            # Test third flow but with the same in_port(1) as the first flow.[0m[37m
172.16.1.170         +            flow_db.begin()[0m[37m
172.16.1.170         +            flow_db.flow_line_add(lines[3])[0m[37m
172.16.1.170         +            sum_values = flow_db.field_values_in_order("all", 1)[0m[37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(1)")][0m[37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 3)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 360)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 2)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(2)")][0m[37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 2)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 126)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 1)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            # Third flow has changes.[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.begin()[0m[37m
172.16.1.170         +            flow_db.flow_line_add(lines[4])[0m
172.16.1.170 [37m
172.16.1.170         +            sum_values = flow_db.field_values_in_order("all", 1)[0m
172.16.1.170 [37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(1)")][0m[37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 4)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 480)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 2)[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(2)")][0m[37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 2)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 126)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 1)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            # First flow reset.[0m[37m
172.16.1.170         +            flow_db.begin()[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.flow_line_add(lines[5])[0m[37m
172.16.1.170         +            sum_values = flow_db.field_values_in_order("all", 1)[0m
172.16.1.170 [37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(1)")][0m[37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 3)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 360)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 2)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(2)")][0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 2)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 126)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 1)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        def test_parse_character_errors(self):[0m
172.16.1.170 [37m
172.16.1.170         +            """ test_parsing errors.[0m[37m
172.16.1.170         +            The flow parses is purposely loose. Its not designed to validate[0m
172.16.1.170 [37m
172.16.1.170         +            input. Merely pull out what it can but there are situations[0m
172.16.1.170 [37m
172.16.1.170         +            that a parse error can be detected.[0m[37m
172.16.1.170         +            """[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            lines = ["complete garbage",[0m
172.16.1.170 [37m
172.16.1.170         +                     "in_port(2),eth(src=68:ef:bd:25:ef:c0,"[0m[37m
172.16.1.170         +                     "dst=33:33:00:00:00:66),"[0m
172.16.1.170 [37m
172.16.1.170         +                     "eth_type(0x86dd),ipv6(src=fe80::6aef:bdff:fe25:efc0/::,"[0m
172.16.1.170 [37m
172.16.1.170         +                     "dst=ff02::66/::,label=0/0,proto=17/0xff,tclass=0xe0/0,"[0m[37m
172.16.1.170         +                     "hlimit=255/0,frag=no/0),udp(src=2029,dst=2029),"[0m
172.16.1.170 [37m
172.16.1.170         +                     "packets:2,bytes:5026,actions:1"][0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db = FlowDB(False)[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.begin()[0m
172.16.1.170 [37m
172.16.1.170         +            for line in lines:[0m[37m
172.16.1.170         +                try:[0m
172.16.1.170 [37m
172.16.1.170         +                    flow_db.flow_line_add(line)[0m
172.16.1.170 [37m
172.16.1.170         +                except ValueError:[0m[37m
172.16.1.170         +                    # We want an exception. That is how we know we have[0m
172.16.1.170 [37m
172.16.1.170         +                    # correctly found a simple parsing error. We are not[0m
172.16.1.170 [37m
172.16.1.170         +                    # looking to validate flow output just catch simple issues.[0m
172.16.1.170 [37m
172.16.1.170         +                    continue[0m[37m
172.16.1.170         +                self.assertTrue(False)[0m
172.16.1.170 [37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        def test_tunnel_parsing(self):[0m
172.16.1.170 [37m
172.16.1.170         +            """ test_tunnel_parsing test parse flows with tunnel. """[0m
172.16.1.170 [37m
172.16.1.170         +            lines = [[0m[37m
172.16.1.170         +                "tunnel(tun_id=0x0,src=192.168.1.1,dst=192.168.1.10,"[0m[37m
172.16.1.170         +                "tos=0x0,ttl=64,flags(key)),in_port(1),"[0m[37m
172.16.1.170         +                "eth(src=9e:40:f5:ef:ec:ee,dst=01:23:20:00:00:30),"[0m[37m
172.16.1.170         +                "eth_type(0x8902), packets:6, bytes:534, used:0.128s, "[0m[37m
172.16.1.170         +                "actions:userspace(pid=4294962691,slow_path(cfm))"[0m[37m
172.16.1.170         +                ][0m
172.16.1.170 [37m
172.16.1.170         +            flow_db = FlowDB(False)[0m[37m
172.16.1.170         +            flow_db.begin()[0m
172.16.1.170 [37m
172.16.1.170         +            flow_db.flow_line_add(lines[0])[0m[37m
172.16.1.170         +            sum_values = flow_db.field_values_in_order("all", 1)[0m
172.16.1.170 [37m
172.16.1.170         +            in_ports = [ii for ii in sum_values if (repr(ii) == "in_port(1)")][0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(len(in_ports), 1)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].packets, 6)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(in_ports[0].bytes, 534)[0m[37m
172.16.1.170         +            self.assertEqual(in_ports[0].count, 1)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +        def test_flow_multiple_paren(self):[0m
172.16.1.170 [37m
172.16.1.170         +            """ test_flow_multiple_paren. """[0m[37m
172.16.1.170         +            line = "tunnel(tun_id=0x0,src=192.168.1.1,flags(key)),in_port(2)"[0m
172.16.1.170 [37m
172.16.1.170         +            valid = ["tunnel(tun_id=0x0,src=192.168.1.1,flags(key))",[0m
172.16.1.170 [37m
172.16.1.170         +                     "in_port(2)"][0m[37m
172.16.1.170         +            rc = flow_line_iter(line)[0m
172.16.1.170 [37m
172.16.1.170         +            self.assertEqual(valid, rc)[0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +        def test_to_network(self):[0m
172.16.1.170 [37m
172.16.1.170         +            """ test_to_network test ipv4_to_network and ipv6_to_network. """[0m[37m
172.16.1.170         +            ipv4s = [[0m
172.16.1.170 [37m
172.16.1.170         +                ("192.168.0.1", "192.168.0.1"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("192.168.0.1/255.255.255.255", "192.168.0.1"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("192.168.0.1/255.255.255.0", "192.168.0.0"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("192.168.0.1/255.255.0.0", "192.168.0.0"),[0m[37m
172.16.1.170         +                ("192.168.0.1/255.0.0.0", "192.0.0.0"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("192.168.0.1/0.0.0.0", "0.0.0.0"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("10.24.106.230/255.255.255.255", "10.24.106.230"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("10.24.106.230/255.255.255.0", "10.24.106.0"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("10.24.106.0/255.255.255.0", "10.24.106.0"),[0m[37m
172.16.1.170         +                ("10.24.106.0/255.255.252.0", "10.24.104.0")[0m
172.16.1.170 [37m
172.16.1.170         +                ][0m[37m
172.16.1.170         +[0m
172.16.1.170 [37m
172.16.1.170         +            ipv6s = [[0m
172.16.1.170 [37m
172.16.1.170         +                ("1::192:168:0:1", "1::192:168:0:1"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("1::192:168:0:1/1::ffff:ffff:ffff:ffff", "1::192:168:0:1"),[0m[37m
172.16.1.170         +                ("1::192:168:0:1/1::ffff:ffff:ffff:0", "1::192:168:0:0"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("1::192:168:0:1/1::ffff:ffff:0:0", "1::192:168:0:0"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("1::192:168:0:1/1::ffff:0:0:0", "1::192:0:0:0"),[0m[37m
172.16.1.170         +                ("1::192:168:0:1/1::0:0:0:0", "1::"),[0m
172.16.1.170 [37m
172.16.1.170         +                ("1::192:168:0:1/::", "::")[0m
172.16.1.170 [37m
172.16.1.170         +                ][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            for (ipv4_test, ipv4_check) in ipv4s:[0m
172.16.1.170 [37m
172.16.1.170         +                self.assertEqual(ipv4_to_network(ipv4_test), ipv4_check)[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +            for (ipv6_test, ipv6_check) in ipv6s:[0m
172.16.1.170 [37m
172.16.1.170         +                self.assertEqual(ipv6_to_network(ipv6_test), ipv6_check)[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-network::dhcp_agent[0m
172.16.1.170   * package[openstack-neutron] action install[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[neutron-dhcp-agent] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[neutron-dhcp-agent][0m
172.16.1.170 [0m
172.16.1.170   * package[openstack-neutron-ml2] action install[0m (up to date)[0m
172.16.1.170   * template[/etc/neutron/dnsmasq.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - create template[/etc/neutron/dnsmasq.conf][0m
172.16.1.170 [37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-sa0412	2014-08-08 01:55:24.216999964 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-1ooa8i6	2014-08-08 01:55:24.216999964 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,9 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +dhcp-option=26,1454[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +server=8.8.8.8[0m[37m
172.16.1.170         +server=209.244.0.3[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/neutron/dhcp_agent.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/neutron/dhcp_agent.ini] from dfefa8 to cccbee[0m[37m
172.16.1.170         --- /etc/neutron/dhcp_agent.ini	2014-02-26 07:04:39.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-nxwvcy	2014-08-08 01:55:24.510999965 +0800[0m[37m
172.16.1.170         @@ -1,45 +1,44 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          [DEFAULT][0m[37m
172.16.1.170          # Show debugging output in log (sets DEBUG log level output)[0m[37m
172.16.1.170         -# debug = False[0m[37m
172.16.1.170         +debug = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # The DHCP agent will resync its state with Neutron to recover from any[0m[37m
172.16.1.170          # transient notification or rpc errors. The interval is number of[0m[37m
172.16.1.170          # seconds between attempts.[0m[37m
172.16.1.170         -# resync_interval = 5[0m[37m
172.16.1.170         +resync_interval = 5[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# The DHCP agent requires an interface driver be set. Choose the one that best[0m[37m
172.16.1.170         +# The DHCP requires that an inteface driver be set.  Choose the one that best[0m[37m
172.16.1.170          # matches your plugin.[0m[37m
172.16.1.170         -# interface_driver =[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Example of interface_driver option for OVS based plugins(OVS, Ryu, NEC, NVP,[0m[37m
172.16.1.170         -# BigSwitch/Floodlight)[0m[37m
172.16.1.170         +# OVS based plugins (OVS, Ryu, NEC, NVP, BigSwitch/Floodlight)[0m[37m
172.16.1.170          # interface_driver = neutron.agent.linux.interface.OVSInterfaceDriver[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Name of Open vSwitch bridge to use[0m[37m
172.16.1.170         -# ovs_integration_bridge = br-int[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Use veth for an OVS interface or not.[0m[37m
172.16.1.170         -# Support kernels with limited namespace support[0m[37m
172.16.1.170         -# (e.g. RHEL 6.5) so long as ovs_use_veth is set to True.[0m[37m
172.16.1.170         -# ovs_use_veth = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Example of interface_driver option for LinuxBridge[0m[37m
172.16.1.170         -# interface_driver = neutron.agent.linux.interface.BridgeInterfaceDriver[0m[37m
172.16.1.170         +# LinuxBridge[0m[37m
172.16.1.170         +#interface_driver = neutron.agent.linux.interface.BridgeInterfaceDriver[0m[37m
172.16.1.170         +interface_driver = neutron.agent.linux.interface.OVSInterfaceDriver[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# OVS based plugins(Ryu, NEC, NVP, BigSwitch/Floodlight) that use OVS[0m[37m
172.16.1.170         +# as OpenFlow switch and check port status[0m[37m
172.16.1.170         +ovs_use_veth = True[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # The agent can use other DHCP drivers.  Dnsmasq is the simplest and requires[0m[37m
172.16.1.170          # no additional setup of the DHCP server.[0m[37m
172.16.1.170         -# dhcp_driver = neutron.agent.linux.dhcp.Dnsmasq[0m[37m
172.16.1.170         +dhcp_driver = neutron.agent.linux.dhcp.Dnsmasq[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Allow overlapping IP (Must have kernel build with CONFIG_NET_NS=y and[0m[37m
172.16.1.170          # iproute2 package that supports namespaces).[0m[37m
172.16.1.170         -# use_namespaces = True[0m[37m
172.16.1.170         +use_namespaces = True[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # The DHCP server can assist with providing metadata support on isolated[0m[37m
172.16.1.170          # networks. Setting this value to True will cause the DHCP server to append[0m
172.16.1.170 [37m
172.16.1.170         -# specific host routes to the DHCP request. The metadata service will only[0m[37m
172.16.1.170         -# be activated when the subnet does not contain any router port. The guest[0m[37m
172.16.1.170         -# instance must be configured to request host routes via DHCP (Option 121).[0m[37m
172.16.1.170         -# enable_isolated_metadata = False[0m
172.16.1.170 [37m
172.16.1.170         +# specific host routes to the DHCP request.  The metadata service will only[0m[37m
172.16.1.170         +# be activated when the subnet gateway_ip is None.  The guest instance must[0m[37m
172.16.1.170         +# be configured to request host routes via DHCP (Option 121).[0m[37m
172.16.1.170         +enable_isolated_metadata = True[0m
172.16.1.170 [37m
172.16.1.170          [0m[37m
172.16.1.170          # Allows for serving metadata requests coming from a dedicated metadata[0m
172.16.1.170 [37m
172.16.1.170          # access network whose cidr is 169.254.169.254/16 (or larger prefix), and[0m
172.16.1.170 [37m
172.16.1.170         @@ -47,42 +46,15 @@[0m
172.16.1.170 [37m
172.16.1.170          # request. In this case DHCP Option 121 will not be injected in VMs, as[0m[37m
172.16.1.170          # they will be able to reach 169.254.169.254 through a router.[0m
172.16.1.170 [37m
172.16.1.170          # This option requires enable_isolated_metadata = True[0m
172.16.1.170 [37m
172.16.1.170         -# enable_metadata_network = False[0m
172.16.1.170 [37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of threads to use during sync process. Should not exceed connection[0m
172.16.1.170 [37m
172.16.1.170         -# pool size configured on server.[0m[37m
172.16.1.170         -# num_sync_threads = 4[0m[37m
172.16.1.170         +enable_metadata_network = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170         -# Location to store DHCP server config files[0m[37m
172.16.1.170         -# dhcp_confs = $state_path/dhcp[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Domain to use for building the hostnames[0m[37m
172.16.1.170         -# dhcp_domain = openstacklocal[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Override the default dnsmasq settings with this file[0m[37m
172.16.1.170         -# dnsmasq_config_file =[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Comma-separated list of DNS servers which will be used by dnsmasq[0m[37m
172.16.1.170         -# as forwarders.[0m[37m
172.16.1.170         -# dnsmasq_dns_servers =[0m[37m
172.16.1.170         +# Domain to use for building the host names of instances.[0m[37m
172.16.1.170         +# If not set, it will default to "openstacklocal"[0m[37m
172.16.1.170         +dhcp_domain = openstacklocal[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Pass a config file to dnsmasq so we can override settings[0m[37m
172.16.1.170         +# like the mtu passed to the virtual machine[0m[37m
172.16.1.170         +dnsmasq_config_file = /etc/neutron/dnsmasq.conf[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Limit number of leases to prevent a denial-of-service.[0m[37m
172.16.1.170         -# dnsmasq_lease_max = 16777216[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location to DHCP lease relay UNIX domain socket[0m[37m
172.16.1.170         -# dhcp_lease_relay_socket = $state_path/dhcp/lease_relay[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of Metadata Proxy UNIX domain socket[0m[37m
172.16.1.170         -# metadata_proxy_socket = $state_path/metadata_proxy[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# dhcp_delete_namespaces, which is false by default, can be set to True if[0m[37m
172.16.1.170         -# namespaces can be deleted cleanly on the host running the dhcp agent.[0m[37m
172.16.1.170         -# Do not enable this until you understand the problem with the Linux iproute[0m[37m
172.16.1.170         -# utility mentioned in https://bugs.launchpad.net/neutron/+bug/1052535 and[0m[37m
172.16.1.170         -# you are sure that your version of iproute does not suffer from the problem.[0m[37m
172.16.1.170         -# If True, namespaces will be deleted when a dhcp server is disabled.[0m[37m
172.16.1.170         -# dhcp_delete_namespaces = False[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Timeout for ovs-vsctl commands.[0m[37m
172.16.1.170         -# If the timeout expires, ovs commands will fail with ALARMCLOCK error.[0m
172.16.1.170 [37m
172.16.1.170         -# ovs_vsctl_timeout = 10[0m[37m
172.16.1.170         +dnsmasq_lease_max = 16777216[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * service[neutron-dhcp-agent] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[neutron-dhcp-agent][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-network::metadata_agent[0m
172.16.1.170   * template[/etc/neutron/metadata_agent.ini] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/neutron/metadata_agent.ini] from a74fd8 to f6e160[0m[37m
172.16.1.170         --- /etc/neutron/metadata_agent.ini	2014-02-26 07:04:39.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-o26slh	2014-08-08 01:55:24.833999964 +0800[0m[37m
172.16.1.170         @@ -1,38 +1,29 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          [DEFAULT][0m[37m
172.16.1.170          # Show debugging output in log (sets DEBUG log level output)[0m[37m
172.16.1.170         -# debug = True[0m[37m
172.16.1.170         +debug = False[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # The Neutron user information for accessing the Neutron API.[0m[37m
172.16.1.170         -auth_url = http://localhost:5000/v2.0[0m[37m
172.16.1.170         +auth_url = http://172.16.1.170:5000/v2.0[0m[37m
172.16.1.170          auth_region = RegionOne[0m[37m
172.16.1.170         -# Turn off verification of the certificate for ssl[0m[37m
172.16.1.170         -# auth_insecure = False[0m[37m
172.16.1.170         -# Certificate Authority public key (CA cert) file for ssl[0m[37m
172.16.1.170         -# auth_ca_cert =[0m[37m
172.16.1.170         -admin_tenant_name = %SERVICE_TENANT_NAME%[0m[37m
172.16.1.170         -admin_user = %SERVICE_USER%[0m[37m
172.16.1.170         -admin_password = %SERVICE_PASSWORD%[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Network service endpoint type to pull from the keystone catalog[0m[37m
172.16.1.170         -# endpoint_type = adminURL[0m[37m
172.16.1.170         +admin_tenant_name = service[0m[37m
172.16.1.170         +admin_user = neutron[0m[37m
172.16.1.170         +admin_password = openstack-network[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # IP address used by Nova metadata server[0m[37m
172.16.1.170         -# nova_metadata_ip = 127.0.0.1[0m[37m
172.16.1.170         +# Default: nova_metadata_ip = 127.0.0.1[0m[37m
172.16.1.170         +nova_metadata_ip = 172.16.1.170[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # TCP Port used by Nova metadata server[0m[37m
172.16.1.170         -# nova_metadata_port = 8775[0m[37m
172.16.1.170         +# Default: nova_metadata_port = 8775[0m[37m
172.16.1.170         +nova_metadata_port = 8775[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # When proxying metadata requests, Neutron signs the Instance-ID header with a[0m[37m
172.16.1.170          # shared secret to prevent spoofing.  You may select any string for a secret,[0m[37m
172.16.1.170          # but it must match here and in the configuration used by the Nova Metadata[0m[37m
172.16.1.170          # Server. NOTE: Nova uses a different key: neutron_metadata_proxy_shared_secret[0m[37m
172.16.1.170         -# metadata_proxy_shared_secret =[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Location of Metadata Proxy UNIX domain socket[0m[37m
172.16.1.170         -# metadata_proxy_socket = $state_path/metadata_proxy[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of separate worker processes for metadata server[0m[37m
172.16.1.170         -# metadata_workers = 0[0m[37m
172.16.1.170         -[0m[37m
172.16.1.170         -# Number of backlog requests to configure the metadata server socket with[0m[37m
172.16.1.170         -# metadata_backlog = 128[0m[37m
172.16.1.170         +metadata_proxy_shared_secret = neutron_metadata_secret[0m
172.16.1.170 [0m
172.16.1.170   * service[neutron-metadata-agent] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[neutron-metadata-agent][0m
172.16.1.170 [0m
172.16.1.170   * service[neutron-metadata-agent] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[neutron-metadata-agent][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-network::server[0m
172.16.1.170   * service[neutron-server] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[neutron-server][0m
172.16.1.170 [0m
172.16.1.170   * service[neutron-server] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[neutron-server][0m
172.16.1.170 [0m
172.16.1.170   * cookbook_file[neutron-ha-tool] action create[0m
172.16.1.170 [32m
172.16.1.170     - create a new cookbook_file /usr/local/bin/neutron-ha-tool.py[0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-3dsm2u	2014-08-08 01:55:25.376999965 +0800[0m[37m
172.16.1.170         +++ /var/chef/cache/cookbooks/openstack-network/files/default/neutron-ha-tool.py	2014-08-08 01:55:25.375999964 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,549 @@[0m[37m
172.16.1.170         +#! /usr/bin/env python[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# Copyright 2013 AT&T Services, Inc.[0m[37m
172.16.1.170         +# All Rights Reserved.[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +#    Licensed under the Apache License, Version 2.0 (the "License"); you may[0m[37m
172.16.1.170         +#    not use this file except in compliance with the License. You may obtain[0m[37m
172.16.1.170         +#    a copy of the License at[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +#         http://www.apache.org/licenses/LICENSE-2.0[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +#    Unless required by applicable law or agreed to in writing, software[0m[37m
172.16.1.170         +#    distributed under the License is distributed on an "AS IS" BASIS, WITHOUT[0m[37m
172.16.1.170         +#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the[0m[37m
172.16.1.170         +#    License for the specific language governing permissions and limitations[0m[37m
172.16.1.170         +#    under the License.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +import logging[0m[37m
172.16.1.170         +import os[0m[37m
172.16.1.170         +import sys[0m[37m
172.16.1.170         +import argparse[0m[37m
172.16.1.170         +import random[0m[37m
172.16.1.170         +import time[0m[37m
172.16.1.170         +from logging.handlers import SysLogHandler[0m[37m
172.16.1.170         +from collections import OrderedDict[0m[37m
172.16.1.170 
172.16.1.170         +from neutronclient.neutron import client[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +LOG = logging.getLogger('neutron-ha-tool')[0m[37m
172.16.1.170         +LOG_FORMAT = '%(asctime)s %(name)-12s %(levelname)-8s %(message)s'[0m[37m
172.16.1.170         +LOG_DATE = '%m-%d %H:%M'[0m[37m
172.16.1.170         +DESCRIPTION = "neutron High Availability Tool"[0m[37m
172.16.1.170         +TAKEOVER_DELAY = int(random.random()*30+30)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def parse_args():[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # ensure environment has necessary items to authenticate[0m[37m
172.16.1.170         +    for key in ['OS_TENANT_NAME', 'OS_USERNAME', 'OS_PASSWORD',[0m[37m
172.16.1.170         +                'OS_AUTH_URL']:[0m[37m
172.16.1.170         +        if key not in os.environ.keys():[0m[37m
172.16.1.170         +            LOG.exception("Your environment is missing '%s'")[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    ap = argparse.ArgumentParser(description=DESCRIPTION)[0m[37m
172.16.1.170         +    ap.add_argument('-d', '--debug', action='store_true',[0m[37m
172.16.1.170         +                    default=False, help='Show debugging output')[0m[37m
172.16.1.170         +    ap.add_argument('-q', '--quiet', action='store_true', default=False,[0m[37m
172.16.1.170         +                    help='Only show error and warning messages')[0m[37m
172.16.1.170         +    ap.add_argument('-n', '--noop', action='store_true', default=False,[0m[37m
172.16.1.170         +                    help='Do not do any modifying operations (dry-run)')[0m[37m
172.16.1.170         +    ap.add_argument('--l3-agent-check', action='store_true', default=False,[0m[37m
172.16.1.170         +                    help='Show routers associated with offline l3 agents')[0m[37m
172.16.1.170         +    ap.add_argument('--l3-agent-migrate', action='store_true', default=False,[0m[37m
172.16.1.170         +                    help='Migrate routers away from offline l3 agents')[0m
172.16.1.170 [37m
172.16.1.170         +    ap.add_argument('--l3-agent-rebalance', action='store_true', default=False,[0m[37m
172.16.1.170         +                    help='Rebalance router count on all l3 agents')[0m[37m
172.16.1.170         +    ap.add_argument('--replicate-dhcp', action='store_true', default=False,[0m[37m
172.16.1.170         +                    help='Replicate DHCP configuration to all agents')[0m[37m
172.16.1.170         +    ap.add_argument('--now', action='store_true', default=False,[0m[37m
172.16.1.170         +                    help='Migrate Routers immediately without a delay.')[0m[37m
172.16.1.170         +    ap.add_argument('--insecure', action='store_true', default=False,[0m[37m
172.16.1.170         +                    help='Explicitly allow neutron-ha-tool to perform '[0m[37m
172.16.1.170         +                         '"insecure" SSL (https) requests. The server\'s '[0m[37m
172.16.1.170         +                         'certificate will not be verified against any '[0m[37m
172.16.1.170         +                         'certificate authorities. This option should be used '[0m[37m
172.16.1.170         +                         'with caution.')[0m[37m
172.16.1.170         +    return ap.parse_args()[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def setup_logging(args):[0m[37m
172.16.1.170         +    level = logging.INFO[0m[37m
172.16.1.170         +    if args.quiet:[0m[37m
172.16.1.170         +        level = logging.WARN[0m[37m
172.16.1.170         +    if args.debug:[0m[37m
172.16.1.170         +        level = logging.DEBUG[0m[37m
172.16.1.170         +    logging.basicConfig(level=level, format=LOG_FORMAT, date_fmt=LOG_DATE)[0m[37m
172.16.1.170         +    handler = SysLogHandler(address='/dev/log')[0m[37m
172.16.1.170         +    syslog_formatter = logging.Formatter('%(name)s: %(levelname)s %(message)s')[0m[37m
172.16.1.170         +    handler.setFormatter(syslog_formatter)[0m[37m
172.16.1.170         +    LOG.addHandler(handler)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def run(args):[0m[37m
172.16.1.170         +    try:[0m[37m
172.16.1.170         +        ca = os.environ['OS_CACERT'][0m[37m
172.16.1.170         +    except KeyError:[0m[37m
172.16.1.170         +        ca = None[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # instantiate client[0m[37m
172.16.1.170         +    qclient = client.Client('2.0', auth_url=os.environ['OS_AUTH_URL'],[0m[37m
172.16.1.170         +                            username=os.environ['OS_USERNAME'],[0m[37m
172.16.1.170         +                            tenant_name=os.environ['OS_TENANT_NAME'],[0m[37m
172.16.1.170         +                            password=os.environ['OS_PASSWORD'],[0m[37m
172.16.1.170         +                            endpoint_type='internalURL',[0m[37m
172.16.1.170         +                            insecure=args.insecure,[0m
172.16.1.170 [37m
172.16.1.170         +                            ca_cert=ca)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # set json return type[0m[37m
172.16.1.170         +    qclient.format = 'json'[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    if args.l3_agent_check:[0m[37m
172.16.1.170         +        LOG.info("Performing L3 Agent Health Check")[0m[37m
172.16.1.170         +        l3_agent_check(qclient)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    if args.l3_agent_migrate:[0m[37m
172.16.1.170         +        LOG.info("Performing L3 Agent Migration for Offline L3 Agents")[0m[37m
172.16.1.170         +        l3_agent_migrate(qclient, args.noop, args.now)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    if args.l3_agent_rebalance:[0m[37m
172.16.1.170         +        LOG.info("Rebalancing L3 Agent Router Count")[0m[37m
172.16.1.170         +        l3_agent_rebalance(qclient, args.noop)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    if args.replicate_dhcp:[0m[37m
172.16.1.170         +        LOG.info("Performing DHCP Replication of Networks to Agents")[0m[37m
172.16.1.170         +        replicate_dhcp(qclient, args.noop)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def l3_agent_rebalance(qclient, noop=False):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Rebalance l3 agent router count across agents.  The number of routers[0m[37m
172.16.1.170         +    on each l3 agent will be as close as possible which should help[0m[37m
172.16.1.170         +    distribute load as new l3 agents come online.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param qclient: A neutronclient[0m[37m
172.16.1.170         +    :param noop: Optional noop flag[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # {u'binary': u'neutron-l3-agent',[0m[37m
172.16.1.170         +    #  u'description': None,[0m[37m
172.16.1.170         +    #  u'admin_state_up': True,[0m[37m
172.16.1.170         +    #  u'heartbeat_timestamp': u'2013-07-02 22:20:23',[0m[37m
172.16.1.170         +    #  u'alive': True,[0m[37m
172.16.1.170         +    #  u'topic': u'l3_agent',[0m[37m
172.16.1.170         +    #  u'host': u'o3r3.int.san3.attcompute.com',[0m[37m
172.16.1.170         +    #  u'agent_type': u'L3 agent',[0m[37m
172.16.1.170         +    #  u'created_at': u'2013-07-02 14:50:58',[0m[37m
172.16.1.170         +    #  u'started_at': u'2013-07-02 18:00:55',[0m[37m
172.16.1.170         +    #  u'id': u'6efe494a-616c-41ea-9c8f-2c592f4d46ff',[0m[37m
172.16.1.170         +    #  u'configurations': {[0m[37m
172.16.1.170         +    #      u'router_id': u'',[0m[37m
172.16.1.170         +    #      u'gateway_external_network_id': u'',[0m[37m
172.16.1.170         +    #      u'handle_internal_only_routers': True,[0m[37m
172.16.1.170         +    #      u'use_namespaces': True,[0m[37m
172.16.1.170         +    #      u'routers': 5,[0m[37m
172.16.1.170         +    #      u'interfaces': 3,[0m[37m
172.16.1.170         +    #      u'floating_ips': 9,[0m[37m
172.16.1.170         +    #      u'interface_driver':[0m[37m
172.16.1.170         +    #           u'neutron.agent.linux.interface.OVSInterfaceDriver',[0m[37m
172.16.1.170         +    #      u'ex_gw_ports': 3}[0m[37m
172.16.1.170         +    #  }[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    l3_agent_dict = {}[0m[37m
172.16.1.170         +    agents = list_agents(qclient, agent_type='L3 agent')[0m[37m
172.16.1.170         +    num_agents = len(agents)[0m[37m
172.16.1.170         +    if num_agents <= 1:[0m[37m
172.16.1.170         +        LOG.info("No rebalancing required for 1 or fewer agents")[0m[37m
172.16.1.170         +        return[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    for l3_agent in agents:[0m[37m
172.16.1.170         +        l3_agent_dict[l3_agent['id']] = \[0m[37m
172.16.1.170         +            list_routers_on_l3_agent(qclient, l3_agent['id'])[0m
172.16.1.170 [37m
172.16.1.170         +[0m[37m
172.16.1.170         +    ordered_l3_agent_dict = OrderedDict(sorted(l3_agent_dict.items(),[0m[37m
172.16.1.170         +                                               key=lambda t: len(t[0])))[0m[37m
172.16.1.170         +    ordered_l3_agent_list = list(ordered_l3_agent_dict)[0m[37m
172.16.1.170         +    num_agents = len(ordered_l3_agent_list)[0m[37m
172.16.1.170         +    LOG.info("Agent list: %s", ordered_l3_agent_list[0:(num_agents-1/2)+1])[0m[37m
172.16.1.170         +    i = 0[0m[37m
172.16.1.170         +    for agent in ordered_l3_agent_list[0:num_agents-1/2]:[0m[37m
172.16.1.170         +        low_agent_id = ordered_l3_agent_list[i][0m[37m
172.16.1.170         +        hgh_agent_id = ordered_l3_agent_list[-(i+1)][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        # do nothing if we end up comparing the same router[0m[37m
172.16.1.170         +        if low_agent_id == hgh_agent_id:[0m[37m
172.16.1.170         +            continue[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        LOG.info("Examining low_agent=%s, high_agent=%s",[0m[37m
172.16.1.170         +                 low_agent_id, hgh_agent_id)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        low_agent_router_count = len(l3_agent_dict[low_agent_id])[0m[37m
172.16.1.170         +        hgh_agent_router_count = len(l3_agent_dict[hgh_agent_id])[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        LOG.info("Low Count=%s, High Count=%s",[0m[37m
172.16.1.170         +                 low_agent_router_count, hgh_agent_router_count)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        for router_id in l3_agent_dict[hgh_agent_id]:[0m[37m
172.16.1.170         +            if low_agent_router_count >= hgh_agent_router_count:[0m[37m
172.16.1.170         +                break[0m[37m
172.16.1.170         +            else:[0m[37m
172.16.1.170         +                LOG.info("Migrating router=%s from agent=%s to agent=%s",[0m[37m
172.16.1.170         +                         router_id, hgh_agent_id, low_agent_id)[0m[37m
172.16.1.170         +                try:[0m[37m
172.16.1.170         +                    if not noop:[0m[37m
172.16.1.170         +                        migrate_router(qclient, router_id, hgh_agent_id,[0m[37m
172.16.1.170         +                                       low_agent_id)[0m[37m
172.16.1.170         +                    low_agent_router_count += 1[0m[37m
172.16.1.170         +                    hgh_agent_router_count -= 1[0m[37m
172.16.1.170         +                except:[0m[37m
172.16.1.170         +                    LOG.exception("Failed to migrate router=%s from agent=%s "[0m[37m
172.16.1.170         +                                  "to agent=%s", router_id, hgh_agent_id,[0m[37m
172.16.1.170         +                                  low_agent_id)[0m[37m
172.16.1.170         +                    continue[0m[37m
172.16.1.170         +        i += 1[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def l3_agent_check(qclient):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Walk the l3 agents searching for agents that are offline.  Show routers[0m[37m
172.16.1.170         +    that are offline and where we would migrate them to.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param qclient: A neutronclient[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    migration_count = 0[0m[37m
172.16.1.170         +    agent_list = list_agents(qclient)[0m[37m
172.16.1.170         +    agent_dead_list = agent_dead_id_list(agent_list, 'L3 agent')[0m[37m
172.16.1.170         +    agent_alive_list = agent_alive_id_list(agent_list, 'L3 agent')[0m[37m
172.16.1.170         +    LOG.info("There are %s offline L3 agents and %s online L3 agents",[0m[37m
172.16.1.170         +             len(agent_dead_list), len(agent_alive_list))[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    if len(agent_dead_list) > 0:[0m[37m
172.16.1.170         +        for agent_id in agent_dead_list:[0m[37m
172.16.1.170         +            LOG.info("Querying agent_id=%s for routers to migrate", agent_id)[0m[37m
172.16.1.170         +            router_id_list = list_routers_on_l3_agent(qclient, agent_id)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            for router_id in router_id_list:[0m[37m
172.16.1.170         +                try:[0m
172.16.1.170 [37m
172.16.1.170         +                    target_id = random.choice(agent_alive_list)[0m[37m
172.16.1.170         +                except IndexError:[0m[37m
172.16.1.170         +                    LOG.warn("There are no l3 agents alive we could "[0m[37m
172.16.1.170         +                             "migrate routers onto.")[0m[37m
172.16.1.170         +                    target_id = None[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +                migration_count += 1[0m[37m
172.16.1.170         +                LOG.warn("Would like to migrate router=%s to agent=%s",[0m[37m
172.16.1.170         +                         router_id, target_id)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        if migration_count > 0:[0m[37m
172.16.1.170         +            sys.exit(2)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def l3_agent_migrate(qclient, noop=False, now=False):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Walk the l3 agents searching for agents that are offline.  For those that[0m[37m
172.16.1.170         +    are offline, we will retrieve a list of routers on them and migrate them to[0m[37m
172.16.1.170         +    a random l3 agent that is online.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param qclient: A neutronclient[0m[37m
172.16.1.170         +    :param noop: Optional noop flag[0m[37m
172.16.1.170         +    :param now: Optional. If false (the default), we'll wait for a random[0m[37m
172.16.1.170         +                amount of time (between 30 and 60 seconds) before migration. If[0m[37m
172.16.1.170         +                true, routers are migrated immediately.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    migration_count = 0[0m[37m
172.16.1.170         +    agent_list = list_agents(qclient)[0m[37m
172.16.1.170         +    agent_dead_list = agent_dead_id_list(agent_list, 'L3 agent')[0m[37m
172.16.1.170         +    agent_alive_list = agent_alive_id_list(agent_list, 'L3 agent')[0m[37m
172.16.1.170         +    LOG.info("There are %s offline L3 agents and %s online L3 agents",[0m[37m
172.16.1.170         +             len(agent_dead_list), len(agent_alive_list))[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    if len(agent_dead_list) > 0:[0m[37m
172.16.1.170         +        if len(agent_alive_list) < 1:[0m[37m
172.16.1.170         +            LOG.exception("There are no l3 agents alive to migrate "[0m[37m
172.16.1.170         +                          "routers onto")[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        timeout = 0[0m[37m
172.16.1.170         +        if not now:[0m[37m
172.16.1.170         +            while timeout < TAKEOVER_DELAY:[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +                agent_list_new = list_agents(qclient)[0m[37m
172.16.1.170         +                agent_dead_list_new = agent_dead_id_list(agent_list_new,[0m[37m
172.16.1.170         +                                                         'L3 agent')[0m[37m
172.16.1.170         +                if len(agent_dead_list_new) < len(agent_dead_list):[0m[37m
172.16.1.170         +                    LOG.info("Skipping router failover since an agent came "[0m[37m
172.16.1.170         +                             "online while ensuring agents offline for %s "[0m[37m
172.16.1.170         +                             "seconds", TAKEOVER_DELAY)[0m[37m
172.16.1.170         +                    sys.exit(0)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +                LOG.info("Agent found offline for seconds=%s but waiting "[0m[37m
172.16.1.170         +                         "seconds=%s before migration",[0m[37m
172.16.1.170         +                         timeout, TAKEOVER_DELAY)[0m[37m
172.16.1.170         +                timeout += 1[0m[37m
172.16.1.170         +                time.sleep(1)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        for agent_id in agent_dead_list:[0m[37m
172.16.1.170         +            LOG.info("Querying agent_id=%s for routers to migrate", agent_id)[0m[37m
172.16.1.170         +            router_id_list = list_routers_on_l3_agent(qclient, agent_id)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +            for router_id in router_id_list:[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +                target_id = random.choice(agent_alive_list)[0m[37m
172.16.1.170         +                LOG.info("Migrating router=%s to agent=%s",[0m[37m
172.16.1.170         +                         router_id, target_id)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170     
172.16.1.170     +                try:[0m
172.16.1.170 [37m
172.16.1.170         +                    if not noop:[0m[37m
172.16.1.170         +                        migrate_router(qclient, router_id, agent_id, target_id)[0m[37m
172.16.1.170         +                        migration_count += 1[0m[37m
172.16.1.170         +                except:[0m[37m
172.16.1.170         +                    LOG.exception("There was an error migrating a router")[0m[37m
172.16.1.170         +                    continue[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +        LOG.info("%s routers required migration from offline L3 agents",[0m[37m
172.16.1.170         +                 migration_count)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def replicate_dhcp(qclient, noop=False):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Retrieve a network list and then probe each DHCP agent to ensure[0m[37m
172.16.1.170         +    they have that network assigned.[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param qclient: A neutronclient[0m[37m
172.16.1.170         +    :param noop: Optional noop flag[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    added = 0[0m[37m
172.16.1.170         +    networks = list_networks(qclient)[0m[37m
172.16.1.170         +    network_id_list = [n['id'] for n in networks][0m[37m
172.16.1.170         +    agents = list_agents(qclient, agent_type='DHCP agent')[0m[37m
172.16.1.170         +    LOG.info("Replicating %s networks to %s DHCP agents", len(networks),[0m[37m
172.16.1.170         +             len(agents))[0m[37m
172.16.1.170         +    for dhcp_agent_id in [a['id'] for a in agents]:[0m[37m
172.16.1.170         +        networks_on_agent = \[0m[37m
172.16.1.170         +            qclient.list_networks_on_dhcp_agent(dhcp_agent_id)['networks'][0m[37m
172.16.1.170         +        network_id_on_agent = [n['id'] for n in networks_on_agent][0m[37m
172.16.1.170         +        for network_id in network_id_list:[0m[37m
172.16.1.170         +            if network_id not in network_id_on_agent:[0m[37m
172.16.1.170         +                try:[0m[37m
172.16.1.170         +                    dhcp_body = {'network_id': network_id}[0m[37m
172.16.1.170         +                    if not noop:[0m[37m
172.16.1.170         +                        qclient.add_network_to_dhcp_agent(dhcp_agent_id,[0m[37m
172.16.1.170         +                                                          dhcp_body)[0m[37m
172.16.1.170         +                    LOG.info("Added missing network=%s to dhcp agent=%s",[0m[37m
172.16.1.170         +                             network_id, dhcp_agent_id)[0m[37m
172.16.1.170         +                    added += 1[0m[37m
172.16.1.170         +                except:[0m[37m
172.16.1.170         +                    LOG.exception("Failed to add network_id=%s to"[0m[37m
172.16.1.170         +                                  "dhcp_agent=%s", network_id, dhcp_agent_id)[0m[37m
172.16.1.170         +                    continue[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    LOG.info("Added %s networks to DHCP agents", added)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def migrate_router(qclient, router_id, agent_id, target_id):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Returns nothing, and raises on exception[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param qclient: A neutronclient[0m[37m
172.16.1.170         +    :param router_id: The id of the router to migrate[0m[37m
172.16.1.170         +    :param agent_id: The id of the l3 agent to migrate from[0m[37m
172.16.1.170         +    :param target_id: The id of the l3 agent to migrate to[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # N.B. The neutron API will return "success" even when there is a[0m[37m
172.16.1.170         +    # subsequent failure during the add or remove process so we must check to[0m[37m
172.16.1.170         +    # ensure the router has been added or removed[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # remove the router from the dead agent[0m[37m
172.16.1.170         +    qclient.remove_router_from_l3_agent(agent_id, router_id)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # ensure it is removed or log an error[0m[37m
172.16.1.170         +    if router_id in list_routers_on_l3_agent(qclient, agent_id):[0m
172.16.1.170 [37m
172.16.1.170         +        LOG.exception("Failed to remove router_id=%s from agent_id=%s",[0m[37m
172.16.1.170         +                      router_id, agent_id)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # add the router id to a live agent[0m[37m
172.16.1.170         +    router_body = {'router_id': router_id}[0m[37m
172.16.1.170         +    qclient.add_router_to_l3_agent(target_id, router_body)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # ensure it is removed or log an error[0m[37m
172.16.1.170         +    if router_id not in list_routers_on_l3_agent(qclient, target_id):[0m[37m
172.16.1.170         +        LOG.exception("Failed to add router_id=%s from agent_id=%s",[0m[37m
172.16.1.170         +                      router_id, agent_id)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def list_networks(qclient):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Return a list of network objects[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param qclient: A neutronclient[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    resp = qclient.list_networks()[0m[37m
172.16.1.170         +    LOG.debug("list_networks: %s", resp)[0m[37m
172.16.1.170         +    return resp['networks'][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def list_dhcp_agent_networks(qclient, agent_id):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Return a list of network ids assigned to a particular DHCP agent[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param qclient: A neutronclient[0m[37m
172.16.1.170         +    :param agent_id: A DHCP agent id[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    resp = qclient.list_networks_on_dhcp_agent(agent_id)[0m[37m
172.16.1.170         +    LOG.debug("list_networks_on_dhcp_agent: %s", resp)[0m[37m
172.16.1.170         +    return [s['id'] for s in resp['networks']][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def list_routers(qclient):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Return a list of router objects[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param qclient: A neutronclient[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # {'routers': [[0m[37m
172.16.1.170         +    #    {u'status': u'ACTIVE',[0m[37m
172.16.1.170         +    #     u'external_gateway_info':[0m[37m
172.16.1.170         +    #        {u'network_id': u'b970297c-d80e-4527-86d7-e49d2da9fdef'},[0m[37m
172.16.1.170         +    #     u'name': u'router1',[0m[37m
172.16.1.170         +    #     u'admin_state_up': True,[0m[37m
172.16.1.170         +    #     u'tenant_id': u'5603b97ee7f047ea999e25492c7fcb23',[0m[37m
172.16.1.170         +    #     u'routes': [],[0m[37m
172.16.1.170         +    #     u'id': u'0a122e5c-1623-412e-8c53-a1e21d1daff8'}[0m[37m
172.16.1.170         +    # ]}[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    resp = qclient.list_routers()[0m[37m
172.16.1.170         +    LOG.debug("list_routers: %s", resp)[0m[37m
172.16.1.170         +    return resp['routers'][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def list_routers_on_l3_agent(qclient, agent_id):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Return a list of router ids on an agent[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param qclient: A neutronclient[0m
172.16.1.170 [37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    resp = qclient.list_routers_on_l3_agent(agent_id)[0m[37m
172.16.1.170         +    LOG.debug("list_routers_on_l3_agent: %s", resp)[0m[37m
172.16.1.170         +    return [r['id'] for r in resp['routers']][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def list_agents(qclient, agent_type=None):[0m[37m
172.16.1.170         +    """Return a list of agent objects[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param qclient: A neutronclient[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    # {u'agents': [[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    #   {u'binary': u'neutron-openvswitch-agent',[0m[37m
172.16.1.170         +    #    u'description': None,[0m[37m
172.16.1.170         +    #    u'admin_state_up': True,[0m[37m
172.16.1.170         +    #    u'heartbeat_timestamp': u'2013-07-02 22:20:25',[0m[37m
172.16.1.170         +    #    u'alive': True,[0m[37m
172.16.1.170         +    #    u'topic': u'N/A',[0m[37m
172.16.1.170         +    #    u'host': u'o3r3.int.san3.attcompute.com',[0m[37m
172.16.1.170         +    #    u'agent_type': u'Open vSwitch agent',[0m[37m
172.16.1.170         +    #    u'created_at': u'2013-07-02 14:50:57',[0m[37m
172.16.1.170         +    #    u'started_at': u'2013-07-02 14:50:57',[0m[37m
172.16.1.170         +    #    u'id': u'3a577f1d-d86e-4f1a-a395-8d4c8e4df1e2',[0m[37m
172.16.1.170         +    #    u'configurations': {u'devices': 10}},[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    #   {u'binary': u'neutron-dhcp-agent',[0m[37m
172.16.1.170         +    #    u'description': None,[0m[37m
172.16.1.170         +    #    u'admin_state_up': True,[0m[37m
172.16.1.170         +    #    u'heartbeat_timestamp': u'2013-07-02 22:20:23',[0m[37m
172.16.1.170         +    #    u'alive': True,[0m[37m
172.16.1.170         +    #    u'topic': u'dhcp_agent',[0m[37m
172.16.1.170         +    #    u'host': u'o5r4.int.san3.attcompute.com',[0m[37m
172.16.1.170         +    #    u'agent_type': u'DHCP agent',[0m[37m
172.16.1.170         +    #    u'created_at': u'2013-06-26 16:21:02',[0m[37m
172.16.1.170         +    #    u'started_at': u'2013-06-28 13:32:52',[0m[37m
172.16.1.170         +    #    u'id': u'3e8be28e-05a0-472b-9288-a59f8d8d2271',[0m[37m
172.16.1.170         +    #    u'configurations': {[0m[37m
172.16.1.170         +    #         u'subnets': 4,[0m[37m
172.16.1.170         +    #         u'use_namespaces': True,[0m[37m
172.16.1.170         +    #         u'dhcp_driver': u'neutron.agent.linux.dhcp.Dnsmasq',[0m[37m
172.16.1.170         +    #         u'networks': 4,[0m[37m
172.16.1.170         +    #         u'dhcp_lease_time': 120,[0m[37m
172.16.1.170         +    #         u'ports': 38}},[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    #   {u'binary': u'neutron-l3-agent',[0m[37m
172.16.1.170         +    #    u'description': None,[0m[37m
172.16.1.170         +    #    u'admin_state_up': True,[0m[37m
172.16.1.170         +    #    u'heartbeat_timestamp': u'2013-07-02 22:20:23',[0m[37m
172.16.1.170         +    #    u'alive': True,[0m[37m
172.16.1.170         +    #    u'topic': u'l3_agent',[0m[37m
172.16.1.170         +    #    u'host': u'o3r3.int.san3.attcompute.com',[0m[37m
172.16.1.170         +    #    u'agent_type': u'L3 agent',[0m[37m
172.16.1.170         +    #    u'created_at': u'2013-07-02 14:50:58',[0m[37m
172.16.1.170         +    #    u'started_at': u'2013-07-02 18:00:55',[0m[37m
172.16.1.170         +    #    u'id': u'6efe494a-616c-41ea-9c8f-2c592f4d46ff',[0m[37m
172.16.1.170         +    #    u'configurations': {[0m[37m
172.16.1.170         +    #         u'router_id': u'',[0m[37m
172.16.1.170         +    #         u'gateway_external_network_id': u'',[0m[37m
172.16.1.170         +    #         u'handle_internal_only_routers': True,[0m[37m
172.16.1.170         +    #         u'use_namespaces': True,[0m[37m
172.16.1.170         +    #         u'routers': 5,[0m[37m
172.16.1.170         +    #         u'interfaces': 3,[0m[37m
172.16.1.170         +    #         u'floating_ips': 9,[0m[37m
172.16.1.170         +    #         u'interface_driver':[0m
172.16.1.170 [37m
172.16.1.170         +    #             u'neutron.agent.linux.interface.OVSInterfaceDriver',[0m[37m
172.16.1.170         +    #         u'ex_gw_ports': 3}},[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    resp = qclient.list_agents()[0m[37m
172.16.1.170         +    LOG.debug("list_agents: %s", resp)[0m[37m
172.16.1.170         +    if agent_type:[0m[37m
172.16.1.170         +        return [agent for agent in resp['agents'][0m[37m
172.16.1.170         +                if agent['agent_type'] == agent_type][0m[37m
172.16.1.170         +    return resp['agents'][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def agent_alive_id_list(agent_list, agent_type):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Return a list of agents that are alive from an API list of agents[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param agent_list: API response for list_agents()[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    return [agent['id'] for agent in agent_list[0m[37m
172.16.1.170         +            if agent['agent_type'] == agent_type and agent['alive'] is True][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +def agent_dead_id_list(agent_list, agent_type):[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    Return a list of agents that are dead from an API list of agents[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    :param agent_list: API response for list_agents()[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    """[0m[37m
172.16.1.170         +    return [agent['id'] for agent in agent_list[0m[37m
172.16.1.170         +            if agent['agent_type'] == agent_type and agent['alive'] is False][0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +if __name__ == '__main__':[0m[37m
172.16.1.170         +    args = parse_args()[0m[37m
172.16.1.170         +    setup_logging(args)[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +    try:[0m[37m
172.16.1.170         +        run(args)[0m[37m
172.16.1.170         +        sys.exit(0)[0m[37m
172.16.1.170         +    except Exception as err:[0m[37m
172.16.1.170         +        LOG.error(err)[0m[37m
172.16.1.170         +        sys.exit(1)[0m[37m
172.16.1.170         +    except KeyboardInterrupt:[0m[37m
172.16.1.170         +        sys.exit(1)[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/sysconfig/neutron] action create[0m
172.16.1.170  (skipped due to only_if)[0m
172.16.1.170 Recipe: openstack-network::identity_registration[0m
172.16.1.170   * openstack-identity_register[Register Network API Service] action create_service[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register Network Endpoint] action create_endpoint[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Register Service Tenant] action create_tenant[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * openstack-identity_register[Register neutron User] action create_user[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170   * openstack-identity_register[Grant 'admin' Role to neutron User for service Tenant] action grant_role[0m
172.16.1.170 
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::compute[0m
172.16.1.170   * package[openstack-nova-compute] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package openstack-nova-compute from uninstalled to 2014.1-201402251728.ibm.el6.85[0m
172.16.1.170 [0m
172.16.1.170   * package[nfs-utils] action upgrade[0m
172.16.1.170 [32m
172.16.1.170     - upgrade package nfs-utils from 1.2.3-36.el6 to 1.2.3-39.el6[0m
172.16.1.170 [0m
172.16.1.170   * package[nfs-utils-lib] action upgrade[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * cookbook_file[/etc/nova/nova-compute.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - create a new cookbook_file /etc/nova/nova-compute.conf[0m[37m
172.16.1.170         --- /tmp/chef-tempfile20140808-1737-dth787	2014-08-08 01:57:27.631999966 +0800[0m[37m
172.16.1.170         +++ /var/chef/cache/cookbooks/openstack-compute/files/default/nova-compute.conf	2014-08-08 01:57:27.630999965 +0800[0m[37m
172.16.1.170         @@ -0,0 +1,10 @@[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# On ubuntu systems, this file is populated (by the nova-compute package) with:[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# libvirt_type=kvm[0m[37m
172.16.1.170         +# compute_driver=libvirt.LibvirtDriver[0m[37m
172.16.1.170         +#[0m[37m
172.16.1.170         +# In order to properly manage these options in the main nova.conf, we need to[0m[37m
172.16.1.170         +# replace that file with this empty one.[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::libvirt[0m
172.16.1.170   * package[libvirt] action install[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * group[libvirtd] action create[0m
172.16.1.170 [32m
172.16.1.170     - create group[libvirtd][0m
172.16.1.170 [0m
172.16.1.170   * link[/usr/bin/qemu-system-x86_64] action create[0m[32m
172.16.1.170     - create symlink at /usr/bin/qemu-system-x86_64 to /usr/libexec/qemu-kvm[0m
172.16.1.170 [0m
172.16.1.170   * service[dbus] action enable[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[dbus] action start[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[libvirt-bin] action enable[0m
172.16.1.170  (up to date)[0m
172.16.1.170   * service[libvirt-bin] action start[0m
172.16.1.170 [32m
172.16.1.170     - start service service[libvirt-bin][0m
172.16.1.170 [0m
172.16.1.170   * execute[Disabling default libvirt network] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute virsh net-autostart default --disable[0m
172.16.1.170 [0m
172.16.1.170   * execute[Deleting default libvirt network] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute virsh net-destroy default[0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/libvirt/libvirtd.conf] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/libvirt/libvirtd.conf] from e7cfe4 to 37d108[0m[37m
172.16.1.170         --- /etc/libvirt/libvirtd.conf	2013-10-09 18:28:11.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-gpuftk	2014-08-08 01:57:29.325999964 +0800[0m[37m
172.16.1.170         @@ -1,3 +1,8 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          # Master libvirt daemon configuration file[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # For further information consult http://libvirt.org/format.html[0m[37m
172.16.1.170         @@ -19,7 +24,7 @@[0m[37m
172.16.1.170          # using this capability.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # This is enabled by default, uncomment this to disable it[0m[37m
172.16.1.170         -#listen_tls = 0[0m[37m
172.16.1.170         +listen_tls = 0[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Listen for unencrypted TCP connections on the public TCP/IP port.[0m[37m
172.16.1.170          # NB, must pass the --listen flag to the libvirtd process for this to[0m[37m
172.16.1.170         @@ -30,7 +35,7 @@[0m[37m
172.16.1.170          # DIGEST_MD5 and GSSAPI (Kerberos5)[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # This is disabled by default, uncomment this to enable it.[0m[37m
172.16.1.170         -#listen_tcp = 1[0m[37m
172.16.1.170         +listen_tcp = 1[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [0m[37m
172.16.1.170         @@ -56,8 +61,8 @@[0m[37m
172.16.1.170          # Alternatively can disable for all services on a host by[0m[37m
172.16.1.170          # stopping the Avahi daemon[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# This is disabled by default, uncomment this to enable it[0m[37m
172.16.1.170         -#mdns_adv = 1[0m[37m
172.16.1.170         +# This is enabled by default, uncomment this to disable it[0m[37m
172.16.1.170         +#mdns_adv = 0[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Override the default mDNS advertizement name. This must be[0m
172.16.1.170 [37m
172.16.1.170          # unique on the immediate broadcast network.[0m[37m
172.16.1.170         @@ -78,7 +83,7 @@[0m[37m
172.16.1.170          # without becoming root.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # This is restricted to 'root' by default.[0m[37m
172.16.1.170         -#unix_sock_group = "libvirt"[0m[37m
172.16.1.170         +unix_sock_group = "libvirtd"[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Set the UNIX socket permissions for the R/O socket. This is used[0m[37m
172.16.1.170          # for monitoring VM status only[0m[37m
172.16.1.170         @@ -95,7 +100,7 @@[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # If not using PolicyKit and setting group ownership for access[0m[37m
172.16.1.170          # control then you may want to relax this to:[0m[37m
172.16.1.170         -#unix_sock_rw_perms = "0770"[0m[37m
172.16.1.170         +unix_sock_rw_perms = "0770"[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Set the name of the directory in which sockets will be found/created.[0m[37m
172.16.1.170          #unix_sock_dir = "/var/run/libvirt"[0m[37m
172.16.1.170         @@ -126,7 +131,7 @@[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # To restrict monitoring of domains you may wish to enable[0m[37m
172.16.1.170          # an authentication mechanism here[0m[37m
172.16.1.170         -#auth_unix_ro = "none"[0m[37m
172.16.1.170         +auth_unix_ro = "none"[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Set an authentication scheme for UNIX read-write sockets[0m[37m
172.16.1.170          # By default socket permissions only allow root. If PolicyKit[0m[37m
172.16.1.170         @@ -135,7 +140,7 @@[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # If the unix_sock_rw_perms are changed you may wish to enable[0m[37m
172.16.1.170          # an authentication mechanism here[0m[37m
172.16.1.170         -#auth_unix_rw = "none"[0m[37m
172.16.1.170         +auth_unix_rw = "none"[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Change the authentication scheme for TCP sockets.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         @@ -143,7 +148,7 @@[0m[37m
172.16.1.170          # Don't do this outside of a dev/test scenario. For real world[0m[37m
172.16.1.170          # use, always enable SASL and use the GSSAPI or DIGEST-MD5[0m[37m
172.16.1.170          # mechanism in /etc/sasl2/libvirt.conf[0m[37m
172.16.1.170         -#auth_tcp = "sasl"[0m[37m
172.16.1.170         +auth_tcp = "none"[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Change the authentication scheme for TLS sockets.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         @@ -246,7 +251,7 @@[0m[37m
172.16.1.170          [0m
172.16.1.170 [37m
172.16.1.170          # The maximum number of concurrent client connections to allow[0m[37m
172.16.1.170          # over all sockets combined.[0m[37m
172.16.1.170         -#max_clients = 20[0m[37m
172.16.1.170         +max_clients = 20[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # The minimum limit sets the number of workers to start up[0m[37m
172.16.1.170         @@ -255,7 +260,7 @@[0m[37m
172.16.1.170          # Typically you'd want max_workers to equal maximum number[0m[37m
172.16.1.170          # of clients allowed[0m[37m
172.16.1.170          #min_workers = 5[0m[37m
172.16.1.170         -#max_workers = 20[0m[37m
172.16.1.170         +max_workers = 20[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # The number of priority workers. If all workers from above[0m[37m
172.16.1.170         @@ -271,13 +276,13 @@[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # XXX this isn't actually enforced yet, only the per-client[0m[37m
172.16.1.170          # limit is used so far[0m[37m
172.16.1.170         -#max_requests = 20[0m[37m
172.16.1.170         +max_requests = 20[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Limit on concurrent requests from a single client[0m[37m
172.16.1.170          # connection. To avoid one client monopolizing the server[0m[37m
172.16.1.170          # this should be a small fraction of the global max_requests[0m[37m
172.16.1.170          # and max_workers parameter[0m[37m
172.16.1.170         -#max_client_requests = 5[0m[37m
172.16.1.170         +max_client_requests = 5[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          #################################################################[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         @@ -291,13 +296,10 @@[0m[37m
172.16.1.170          # Logging filters:[0m[37m
172.16.1.170          # A filter allows to select a different logging level for a given category[0m[37m
172.16.1.170          # of logs[0m[37m
172.16.1.170         -# The format for a filter is one of:[0m[37m
172.16.1.170         +# The format for a filter is:[0m[37m
172.16.1.170          #    x:name[0m[37m
172.16.1.170         -#    x:+name[0m[37m
172.16.1.170         -#      where name is a string which is matched against source file name,[0m[37m
172.16.1.170         -#      e.g., "remote", "qemu", or "util/json", the optional "+" prefix[0m[37m
172.16.1.170         -#      tells libvirt to log stack trace for each message matching name,[0m[37m
172.16.1.170         -#      and x is the minimal level where matching messages should be logged:[0m[37m
172.16.1.170         +#      where name is a match string e.g. remote or qemu[0m[37m
172.16.1.170         +# the x prefix is the minimal level where matching messages should be logged[0m[37m
172.16.1.170          #    1: DEBUG[0m[37m
172.16.1.170          #    2: INFO[0m[37m
172.16.1.170          #    3: WARNING[0m[37m
172.16.1.170         @@ -306,9 +308,10 @@[0m[37m
172.16.1.170          # Multiple filter can be defined in a single @filters, they just need to be[0m[37m
172.16.1.170          # separated by spaces.[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170         -# e.g. to only get warning or errors from the remote layer and only errors[0m[37m
172.16.1.170         -# from the event layer:[0m[37m
172.16.1.170         -#log_filters="3:remote 4:event"[0m[37m
172.16.1.170         +# e.g:[0m[37m
172.16.1.170         +# log_filters="3:remote 4:event"[0m[37m
172.16.1.170         +# to only get warning or errors from the remote layer and only errors from[0m[37m
172.16.1.170         +# the event layer.[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Logging outputs:[0m
172.16.1.170 [37m
172.16.1.170          # An output is one of the places to save logging information[0m[37m
172.16.1.170         @@ -326,9 +329,9 @@[0m[37m
172.16.1.170          #    4: ERROR[0m[37m
172.16.1.170          #[0m[37m
172.16.1.170          # Multiple output can be defined, they just need to be separated by spaces.[0m[37m
172.16.1.170         -# e.g. to log all warnings and errors to syslog under the libvirtd ident:[0m[37m
172.16.1.170         -#log_outputs="3:syslog:libvirtd"[0m[37m
172.16.1.170         -#[0m[37m
172.16.1.170         +# e.g.:[0m[37m
172.16.1.170         +# log_outputs="3:syslog:libvirtd"[0m[37m
172.16.1.170         +# to log all warnings and errors to syslog under the libvirtd ident[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Log debug buffer size: default 64[0m[37m
172.16.1.170          # The daemon keeps an internal debug log buffer which will be dumped in case[0m
172.16.1.170 [0m
172.16.1.170   * service[libvirt-bin] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[libvirt-bin][0m
172.16.1.170 [0m
172.16.1.170   * template[/etc/default/libvirt-bin] action create[0m (skipped due to only_if)[0m
172.16.1.170   * template[/etc/sysconfig/libvirtd] action create[0m
172.16.1.170 [32m
172.16.1.170     - update template[/etc/sysconfig/libvirtd] from a1400d to e113b0[0m[37m
172.16.1.170         --- /etc/sysconfig/libvirtd	2013-10-09 18:28:11.000000000 +0800[0m[37m
172.16.1.170         +++ /tmp/chef-rendered-template20140808-1737-cv0nzf	2014-08-08 01:57:29.841999964 +0800[0m[37m
172.16.1.170         @@ -1,3 +1,8 @@[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +# This file autogenerated by Chef[0m[37m
172.16.1.170         +# Do not edit, changes will be overwritten[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170         +[0m[37m
172.16.1.170          # Override the default config file[0m[37m
172.16.1.170          # NOTE: This setting is no longer honoured if using[0m[37m
172.16.1.170          # systemd. Set '--config /etc/libvirt/libvirtd.conf'[0m[37m
172.16.1.170         @@ -6,7 +11,7 @@[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Listen for TCP/IP connections[0m[37m
172.16.1.170          # NB. must setup TLS/SSL keys prior to using this[0m[37m
172.16.1.170         -#LIBVIRTD_ARGS="--listen"[0m[37m
172.16.1.170         +LIBVIRTD_ARGS="--listen"[0m[37m
172.16.1.170          [0m[37m
172.16.1.170          # Override Kerberos service keytab for SASL/GSSAPI[0m[37m
172.16.1.170          #KRB5_KTNAME=/etc/libvirt/krb5.tab[0m
172.16.1.170 [0m
172.16.1.170   * service[libvirt-bin] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[libvirt-bin][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::compute[0m
172.16.1.170   * service[nova-compute] action enable[0m
172.16.1.170 [32m
172.16.1.170     - enable service service[nova-compute][0m
172.16.1.170 [0m
172.16.1.170   * service[nova-compute] action start[0m
172.16.1.170 [32m
172.16.1.170     - start service service[nova-compute][0m
172.16.1.170 [0m
172.16.1.170   * directory[/var/lib/nova/instances] action create[0m[32m
172.16.1.170     - change mode from '02755' to '0755'[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-identity::server[0m
172.16.1.170   * service[keystone] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[keystone][0m
172.16.1.170 [0m
172.16.1.170   * execute[Keystone: sleep] action run[0m
172.16.1.170 [32m
172.16.1.170     - execute sleep 10s[0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::api-ec2[0m
172.16.1.170   * service[nova-api-ec2] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[nova-api-ec2][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::api-os-compute[0m
172.16.1.170   * service[nova-api-os-compute] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[nova-api-os-compute][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::api-metadata[0m
172.16.1.170   * service[nova-api-metadata] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[nova-api-metadata][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::vncproxy[0m
172.16.1.170   * service[openstack-nova-novncproxy] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[openstack-nova-novncproxy][0m
172.16.1.170 [0m
172.16.1.170   * service[nova-consoleauth] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[nova-consoleauth][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::scheduler[0m
172.16.1.170   * service[nova-scheduler] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[nova-scheduler][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::conductor[0m
172.16.1.170   * service[nova-conductor] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[nova-conductor][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::nova-cert[0m
172.16.1.170   * service[nova-cert] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[nova-cert][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-compute::compute[0m
172.16.1.170   * service[nova-compute] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[nova-compute][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-network::openvswitch[0m
172.16.1.170   * service[neutron-plugin-openvswitch-agent] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[neutron-plugin-openvswitch-agent][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-network::dhcp_agent[0m
172.16.1.170   * service[neutron-dhcp-agent] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[neutron-dhcp-agent][0m
172.16.1.170 [0m
172.16.1.170 Recipe: openstack-network::metadata_agent[0m
172.16.1.170   * service[neutron-metadata-agent] action restart[0m
172.16.1.170 [32m
172.16.1.170     - restart service service[neutron-metadata-agent][0m
172.16.1.170 [0m
172.16.1.170 Chef Client finished, 208 resources updated[0m
